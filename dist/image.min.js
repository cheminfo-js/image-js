(function(I){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=I();else if("function"==typeof define&&define.amd)define([],I);else{var R;R="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,R.IJS=I()}})(function(){var define;return function I(R,T,L){function E(Z,Q){if(!T[Z]){if(!R[Z]){var $="function"==typeof require&&require;if(!Q&&$)return $(Z,!0);if(G)return G(Z,!0);var J=new Error("Cannot find module '"+Z+"'");throw J.code="MODULE_NOT_FOUND",J}var ee=T[Z]={exports:{}};R[Z][0].call(ee.exports,function(te){var ae=R[Z][1][te];return E(ae?ae:te)},ee,ee.exports,I,R,T,L)}return T[Z].exports}var G="function"==typeof require&&require;for(var W=0;W<L.length;W++)E(L[W]);return E}({1:[function(I,R){(function(T){"use strict";var L=I("es-abstract/es6"),E=Number.isNaN||function(Z){return Z!==Z},G=Number.isFinite||function(Z){return"number"==typeof Z&&T.isFinite(Z)},W=Array.prototype.indexOf;R.exports=function(Q){var $=1<arguments.length?L.ToInteger(arguments[1]):0;if(W&&!E(Q)&&G($)&&"undefined"!=typeof Q)return-1<W.apply(this,arguments);var J=L.ToObject(this),ee=L.ToLength(J.length);if(0===ee)return!1;for(var te=0<=$?$:Math.max(0,ee+$);te<ee;){if(L.SameValueZero(Q,J[te]))return!0;te+=1}return!1}}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"es-abstract/es6":24}],2:[function(I,R){"use strict";var T=I("define-properties"),L=I("es-abstract/es6"),E=I("./implementation"),G=I("./polyfill"),W=G(),Z=I("./shim"),Q=Array.prototype.slice,$=function(ee){return L.RequireObjectCoercible(ee),W.apply(ee,Q.call(arguments,1))};T($,{implementation:E,getPolyfill:G,shim:Z}),R.exports=$},{"./implementation":1,"./polyfill":3,"./shim":4,"define-properties":22,"es-abstract/es6":24}],3:[function(I,R){"use strict";var T=I("./implementation");R.exports=function(){return Array.prototype.includes||T}},{"./implementation":1}],4:[function(I,R){"use strict";var T=I("define-properties"),L=I("./polyfill");R.exports=function(){var G=L();return Array.prototype.includes!==G&&T(Array.prototype,{includes:G}),G}},{"./polyfill":3,"define-properties":22}],5:[function(I,R){"use strict";function T(ae){for(var ie=ae.length,ne=new ArrayBuffer(ie),le=new Uint8Array(ne),oe=-1;++oe<ie;)le[oe]=ae.charCodeAt(oe);return ne}function L(ae){for(var ie="",ne=new Uint8Array(ae),le=ne.byteLength,oe=-1;++oe<le;)ie+=String.fromCharCode(ne[oe]);return ie}function E(ae,ie){return new te(function(ne,le){var oe=new Image;ie&&(oe.crossOrigin=ie),oe.onload=function(){ne(oe)},oe.onerror=le,oe.src=ae})}function G(ae){var ie=document.createElement("canvas");ie.width=ae.width,ie.height=ae.height;var ne=ie.getContext("2d");return ne.drawImage(ae,0,0,ae.width,ae.height,0,0,ae.width,ae.height),ie}function W(ae,ie){return ie=ie||{},"string"==typeof ie&&(ie={type:ie}),new ee(ae,ie)}function Z(ae){return new te(function(ie,ne){var le=new FileReader,oe="function"==typeof le.readAsBinaryString;le.onloadend=function(se){var de=se.target.result||"";return oe?ie(de):void ie(L(de))},le.onerror=ne,oe?le.readAsBinaryString(ae):le.readAsArrayBuffer(ae)})}function Q(ae,ie){return te.resolve().then(function(){var ne=[T(atob(ae))];return ie?W(ne,{type:ie}):W(ne)})}function $(ae){return te.resolve().then(function(){var ie=ae.match(/data:([^;]+)/)[1],ne=ae.replace(/^[^,]+,/,""),le=T(atob(ne));return W([le],{type:ie})})}function J(ae,ie,ne){return te.resolve().then(function(){return"function"==typeof ae.toBlob?new te(function(le){ae.toBlob(le,ie,ne)}):$(ae.toDataURL(ie,ne))})}var ee=I("blob"),te=I("native-or-lie");R.exports={createBlob:W,createObjectURL:function(ie){return(window.URL||window.webkitURL).createObjectURL(ie)},revokeObjectURL:function(ie){return(window.URL||window.webkitURL).revokeObjectURL(ie)},imgSrcToBlob:function(ie,ne,le,oe){return ne=ne||"image/png",E(ie,le).then(function(se){return G(se)}).then(function(se){return J(se,ne,oe)})},imgSrcToDataURL:function(ie,ne,le,oe){return ne=ne||"image/png",E(ie,le).then(function(se){return G(se)}).then(function(se){return se.toDataURL(ne,oe)})},canvasToBlob:J,dataURLToBlob:$,blobToBase64String:function(ie){return Z(ie).then(function(ne){return btoa(ne)})},base64StringToBlob:Q,binaryStringToBlob:function(ie,ne){return te.resolve().then(function(){return Q(btoa(ie),ne)})},blobToBinaryString:Z,arrayBufferToBlob:function(ie,ne){return te.resolve().then(function(){return W([ie],ne)})},blobToArrayBuffer:function(ie){return new te(function(ne,le){var oe=new FileReader;oe.onloadend=function(se){var de=se.target.result||new ArrayBuffer(0);ne(de)},oe.onerror=le,oe.readAsArrayBuffer(ie)})}}},{blob:6,"native-or-lie":117}],6:[function(I,R){(function(T){"use strict";function L(J){for(var ee=0;ee<J.length;ee++){var te=J[ee];if(te.buffer instanceof ArrayBuffer){var ae=te.buffer;if(te.byteLength!==ae.byteLength){var ie=new Uint8Array(te.byteLength);ie.set(new Uint8Array(ae,te.byteOffset,te.byteLength)),ae=ie.buffer}J[ee]=ae}}}function E(J,ee){ee=ee||{};var te=new W;L(J);for(var ae=0;ae<J.length;ae++)te.append(J[ae]);return ee.type?te.getBlob(ee.type):te.getBlob()}function G(J,ee){return L(J),new Blob(J,ee||{})}var W=T.BlobBuilder||T.WebKitBlobBuilder||T.MSBlobBuilder||T.MozBlobBuilder,Z=function(){try{var J=new Blob(["hi"]);return 2===J.size}catch(ee){return!1}}(),Q=Z&&function(){try{var J=new Blob([new Uint8Array([1,2])]);return 2===J.size}catch(ee){return!1}}(),$=W&&W.prototype.append&&W.prototype.getBlob;R.exports=function(){if(Z)return Q?T.Blob:G;return $?E:void 0}()}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],7:[function(){"use strict"},{}],8:[function(I,R){"use strict";R.exports={hex2rgb:I("./lib/hex2rgb"),hsv2hex:I("./lib/hsv2hex"),hsv2rgb:I("./lib/hsv2rgb"),rgb2hex:I("./lib/rgb2hex"),rgb2hsv:I("./lib/rgb2hsv"),rgba:I("./lib/rgba"),rgba2rgb:I("./lib/rgba2rgb"),rgba2hex:I("./lib/rgba2hex"),hsl2hsv:I("./lib/hsl2hsv"),hsv2hsl:I("./lib/hsv2hsl"),hsl2rgb:I("./lib/hsl2rgb"),cssColor:I("./lib/css-color")}},{"./lib/css-color":10,"./lib/hex2rgb":11,"./lib/hsl2hsv":12,"./lib/hsl2rgb":13,"./lib/hsv2hex":14,"./lib/hsv2hsl":15,"./lib/hsv2rgb":16,"./lib/rgb2hex":17,"./lib/rgb2hsv":18,"./lib/rgba":19,"./lib/rgba2hex":20,"./lib/rgba2rgb":21}],9:[function(I,R){"use strict";R.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]}},{}],10:[function(I,R){"use strict";function T(ee){var te=J[ee.toLowerCase()];if(te)return{r:te[0],g:te[1],b:te[2],a:100}}function L(ee){if(0==ee.indexOf("rgb(")){ee=ee.match(/rgb\(([^)]+)\)/)[1];var te=ee.split(/ *, */).map(Number);return{r:te[0],g:te[1],b:te[2],a:100}}}function E(ee){if(0===ee.indexOf("rgba(")){ee=ee.match(/rgba\(([^)]+)\)/)[1];var te=ee.split(/ *, */).map(Number);return{r:te[0],g:te[1],b:te[2],a:100*te[3]}}}function G(ee){if("#"===ee[0]&&7===ee.length)return{r:parseInt(ee.slice(1,3),16),g:parseInt(ee.slice(3,5),16),b:parseInt(ee.slice(5,7),16),a:100}}function W(ee){if("#"===ee[0]&&4===ee.length)return{r:parseInt(ee[1]+ee[1],16),g:parseInt(ee[2]+ee[2],16),b:parseInt(ee[3]+ee[3],16),a:100}}function Z(ee){if(0===ee.indexOf("hsl(")){ee=ee.match(/hsl\(([^)]+)\)/)[1];var te=ee.split(/ *, */),ae=parseInt(te[0],10),ie=parseInt(te[1],10),ne=parseInt(te[2],10),le=$(ae,ie,ne);return le.a=100,le}}function Q(ee){if(0===ee.indexOf("hsla(")){ee=ee.match(/hsla\(([^)]+)\)/)[1];var te=ee.split(/ *, */),ae=parseInt(te[0],10),ie=parseInt(te[1],10),ne=parseInt(te[2],10),le=parseInt(100*te[3],10),oe=$(ae,ie,ne);return oe.a=le,oe}}var $=I("./hsl2rgb"),J=I("./_colors");R.exports=function(te){return T(te)||W(te)||G(te)||L(te)||E(te)||Z(te)||Q(te)}},{"./_colors":9,"./hsl2rgb":13}],11:[function(I,R){"use strict";R.exports=function(T){return("#"===T[0]&&(T=T.substr(1)),6===T.length)?{r:parseInt(T.substr(0,2),16),g:parseInt(T.substr(2,2),16),b:parseInt(T.substr(4,2),16)}:3===T.length?{r:parseInt(T[0]+T[0],16),g:parseInt(T[1]+T[1],16),b:parseInt(T[2]+T[2],16)}:void 0}},{}],12:[function(I,R){"use strict";R.exports=function(T,L,E){return L*=(50>E?E:100-E)/100,console.log("s",L),{h:T,s:100*(2*L/(E+L)),v:E+L}}},{}],13:[function(I,R){"use strict";var T=I("./hsl2hsv"),L=I("./hsv2rgb");R.exports=function(E,G,W){var Z=T(E,G,W);return L(Z.h,Z.s,Z.v)}},{"./hsl2hsv":12,"./hsv2rgb":16}],14:[function(I,R){"use strict";var T=I("./hsv2rgb"),L=I("./rgb2hex");R.exports=function(E,G,W){var Z=T(E,G,W);return L(Z.r,Z.g,Z.b)}},{"./hsv2rgb":16,"./rgb2hex":17}],15:[function(I,R){"use strict";R.exports=function(T,L,E){var G=(200-L)*E/100;return{h:T,s:L*E/(100>G?G:200-G),l:G/2}}},{}],16:[function(I,R){"use strict";R.exports=function(T,L,E){var L=L/100,E=E/100,G=[],W=E*L,Z=T/60,Q=W*(1-Math.abs(Z%2-1)),$=E-W;switch(parseInt(Z,10)){case 0:G=[W,Q,0];break;case 1:G=[Q,W,0];break;case 2:G=[0,W,Q];break;case 3:G=[0,Q,W];break;case 4:G=[Q,0,W];break;case 5:G=[W,0,Q];}return{r:Math.round(255*(G[0]+$)),g:Math.round(255*(G[1]+$)),b:Math.round(255*(G[2]+$))}}},{}],17:[function(I,R){"use strict";R.exports=function(T,L,E){function G(W){var Z=W.toString(16);return 1===Z.length?"0"+Z:Z}return[G(T),G(L),G(E)].join("")}},{}],18:[function(I,R){"use strict";R.exports=function(T,L,E){var Q=Math.max(T,L,E),$=Math.min(T,L,E),J=Q-$,G,W,Z;return 0==J?G=0:T===Q?G=(L-E)/J%6:L===Q?G=(E-T)/J+2:E===Q&&(G=(T-L)/J+4),G=Math.round(60*G),0>G&&(G+=360),W=Math.round(100*(0===Q?0:J/Q)),Z=Math.round(100*(Q/255)),{h:G,s:W,v:Z}}},{}],19:[function(I,R){"use strict";R.exports=function(T,L,E,G){return"rgba("+[T,L,E,G/100].join(",")+")"}},{}],20:[function(I,R){"use strict";var T=I("./rgba2rgb"),L=I("./rgb2hex");R.exports=function(E,G,W,Z){var Q=T(E,G,W,Z);return L(Q.r,Q.g,Q.b)}},{"./rgb2hex":17,"./rgba2rgb":21}],21:[function(I,R){"use strict";R.exports=function(T,L,E,G){return G=G/100,{r:parseInt(255*(1-G)+G*T,10),g:parseInt(255*(1-G)+G*L,10),b:parseInt(255*(1-G)+G*E,10)}}},{}],22:[function(I,R){"use strict";var T=I("object-keys"),L=I("foreach"),E="function"==typeof Symbol&&"symbol"==typeof Symbol(),G=Object.prototype.toString,W=function(ee){return"function"==typeof ee&&"[object Function]"===G.call(ee)},Z=Object.defineProperty&&function(){var ee={};try{for(var te in Object.defineProperty(ee,"x",{enumerable:!1,value:ee}),ee)return!1;return ee.x===ee}catch(ae){return!1}}(),Q=function(ee,te,ae,ie){(!(te in ee)||W(ie)&&ie())&&(Z?Object.defineProperty(ee,te,{configurable:!0,enumerable:!1,value:ae,writable:!0}):ee[te]=ae)},$=function(ee,te){var ae=2<arguments.length?arguments[2]:{},ie=T(te);E&&(ie=ie.concat(Object.getOwnPropertySymbols(te))),L(ie,function(ne){Q(ee,ne,te[ne],ae[ne])})};$.supportsDescriptors=!!Z,R.exports=$},{foreach:45,"object-keys":121}],23:[function(I,R){"use strict";var T=I("./helpers/isNaN"),L=I("./helpers/isFinite"),E=I("./helpers/sign"),G=I("./helpers/mod"),W=I("is-callable"),Z=I("es-to-primitive/es5");R.exports={ToPrimitive:Z,ToBoolean:function($){return!!$},ToNumber:function($){return+$},ToInteger:function($){var J=this.ToNumber($);return T(J)?0:0!==J&&L(J)?E(J)*Math.floor(Math.abs(J)):J},ToInt32:function($){return this.ToNumber($)>>0},ToUint32:function($){return this.ToNumber($)>>>0},ToUint16:function($){var J=this.ToNumber($);if(T(J)||0===J||!L(J))return 0;var ee=E(J)*Math.floor(Math.abs(J));return G(ee,65536)},ToString:function($){return $+""},ToObject:function($){return this.CheckObjectCoercible($),Object($)},CheckObjectCoercible:function($,J){if(null==$)throw new TypeError(J||"Cannot call method on "+$);return $},IsCallable:W,SameValue:function($,J){return $===J?0!==$||1/$==1/J:T($)&&T(J)},Type:function($){return null===$?"Null":"undefined"==typeof $?"Undefined":"function"==typeof $||"object"==typeof $?"Object":"number"==typeof $?"Number":"boolean"==typeof $?"Boolean":"string"==typeof $?"String":void 0}}},{"./helpers/isFinite":26,"./helpers/isNaN":27,"./helpers/mod":29,"./helpers/sign":30,"es-to-primitive/es5":31,"is-callable":54}],24:[function(I,R){"use strict";var T=Object.prototype.toString,L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,E=L?Symbol.prototype.toString:T,G=I("./helpers/isNaN"),W=I("./helpers/isFinite"),Z=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Q=I("./helpers/assign"),$=I("./helpers/sign"),J=I("./helpers/mod"),ee=I("./helpers/isPrimitive"),te=I("es-to-primitive/es6"),ae=parseInt,ie=I("function-bind"),ne=ie.call(Function.call,String.prototype.slice),le=ie.call(Function.call,RegExp.prototype.test,/^0b[01]+$/i),oe=ie.call(Function.call,RegExp.prototype.test,/^0o[0-7]+$/i),se=["\x85","\u200B","\uFFFE"].join(""),de=new RegExp("["+se+"]","g"),he=ie.call(Function.call,RegExp.prototype.test,de),ue=/^[\-\+]0x[0-9a-f]+$/i,ce=ie.call(Function.call,RegExp.prototype.test,ue),ge=["\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028","\u2029\uFEFF"].join(""),pe=new RegExp("(^["+ge+"]+)|(["+ge+"]+$)","g"),fe=ie.call(Function.call,String.prototype.replace),_e=function(ke){return fe(ke,pe,"")},be=I("./es5"),ye=I("is-regex"),xe=Q(Q({},be),{Call:function(ke,ve){var Me=2<arguments.length?arguments[2]:[];if(!this.IsCallable(ke))throw new TypeError(ke+" is not a function");return ke.apply(ve,Me)},ToPrimitive:te,ToNumber:function(ke){var ve=ee(ke)?ke:te(ke,"number");if("symbol"==typeof ve)throw new TypeError("Cannot convert a Symbol value to a number");if("string"==typeof ve){if(le(ve))return this.ToNumber(ae(ne(ve,2),2));if(oe(ve))return this.ToNumber(ae(ne(ve,2),8));if(he(ve)||ce(ve))return NaN;var Me=_e(ve);if(Me!==ve)return this.ToNumber(Me)}return+ve},ToInt16:function(ke){var ve=this.ToUint16(ke);return 32768<=ve?ve-65536:ve},ToInt8:function(ke){var ve=this.ToUint8(ke);return 128<=ve?ve-256:ve},ToUint8:function(ke){var ve=this.ToNumber(ke);if(G(ve)||0===ve||!W(ve))return 0;var Me=$(ve)*Math.floor(Math.abs(ve));return J(Me,256)},ToUint8Clamp:function(ke){var ve=this.ToNumber(ke);if(G(ve)||0>=ve)return 0;if(255<=ve)return 255;var Me=Math.floor(ke);return Me+0.5<ve?Me+1:ve<Me+0.5?Me:0==Me%2?Me:Me+1},ToString:function(ke){if("symbol"==typeof ke)throw new TypeError("Cannot convert a Symbol value to a string");return ke+""},ToObject:function(ke){return this.RequireObjectCoercible(ke),Object(ke)},ToPropertyKey:function(ke){var ve=this.ToPrimitive(ke,String);return"symbol"==typeof ve?E.call(ve):this.ToString(ve)},ToLength:function(ke){var ve=this.ToInteger(ke);return 0>=ve?0:ve>Z?Z:ve},CanonicalNumericIndexString:function(ke){if("[object String]"!==T.call(ke))throw new TypeError("must be a string");if("-0"===ke)return-0;var ve=this.ToNumber(ke);return this.SameValue(this.ToString(ve),ke)?ve:void 0},RequireObjectCoercible:be.CheckObjectCoercible,IsArray:Array.isArray||function(ke){return"[object Array]"===T.call(ke)},IsConstructor:function(ke){return"function"==typeof ke&&!!ke.prototype},IsExtensible:function(ke){return!Object.preventExtensions||!ee(ke)&&Object.isExtensible(ke)},IsInteger:function(ke){if("number"!=typeof ke||G(ke)||!W(ke))return!1;var ve=Math.abs(ke);return Math.floor(ve)===ve},IsPropertyKey:function(ke){return"string"==typeof ke||"symbol"==typeof ke},IsRegExp:function(ke){if(!ke||"object"!=typeof ke)return!1;if(L){var ve=ke[Symbol.match];if("undefined"!=typeof ve)return be.ToBoolean(ve)}return ye(ke)},SameValueZero:function(ke,ve){return ke===ve||G(ke)&&G(ve)},Type:function(ke){return"symbol"==typeof ke?"Symbol":be.Type(ke)},SpeciesConstructor:function(ke,ve){if("Object"!==this.Type(ke))throw new TypeError("Assertion failed: Type(O) is not Object");var Me=ke.constructor;if("undefined"==typeof Me)return ve;if("Object"!==this.Type(Me))throw new TypeError("O.constructor is not an Object");var je=L&&Symbol.species?Me[Symbol.species]:void 0;if(null==je)return ve;if(this.IsConstructor(je))return je;throw new TypeError("no constructor found")}});delete xe.CheckObjectCoercible,R.exports=xe},{"./es5":23,"./helpers/assign":25,"./helpers/isFinite":26,"./helpers/isNaN":27,"./helpers/isPrimitive":28,"./helpers/mod":29,"./helpers/sign":30,"es-to-primitive/es6":32,"function-bind":47,"is-regex":58}],25:[function(I,R){"use strict";var T=Object.prototype.hasOwnProperty;R.exports=Object.assign||function(E,G){for(var W in G)T.call(G,W)&&(E[W]=G[W]);return E}},{}],26:[function(I,R){"use strict";var T=Number.isNaN||function(L){return L!==L};R.exports=Number.isFinite||function(L){return"number"==typeof L&&!T(L)&&L!==1/0&&L!==-(1/0)}},{}],27:[function(I,R){"use strict";R.exports=Number.isNaN||function(L){return L!==L}},{}],28:[function(I,R){"use strict";R.exports=function(L){return null===L||"function"!=typeof L&&"object"!=typeof L}},{}],29:[function(I,R){"use strict";R.exports=function(L,E){var G=L%E;return Math.floor(0<=G?G:G+E)}},{}],30:[function(I,R){"use strict";R.exports=function(L){return 0<=L?1:-1}},{}],31:[function(I,R){"use strict";var T=Object.prototype.toString,L=I("./helpers/isPrimitive"),E=I("is-callable"),G={"[[DefaultValue]]":function(Z,Q){var $=Q||("[object Date]"===T.call(Z)?String:Number);if($===String||$===Number){var J=$===String?["toString","valueOf"]:["valueOf","toString"],ee,te;for(te=0;te<J.length;++te)if(E(Z[J[te]])&&(ee=Z[J[te]](),L(ee)))return ee;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")}};R.exports=function(Z,Q){return L(Z)?Z:G["[[DefaultValue]]"](Z,Q)}},{"./helpers/isPrimitive":33,"is-callable":54}],32:[function(I,R){"use strict";var T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,L=I("./helpers/isPrimitive"),E=I("is-callable"),G=I("is-date-object"),W=I("is-symbol"),Z=function(J,ee){if("undefined"==typeof J||null===J)throw new TypeError("Cannot call method on "+J);if("string"!=typeof ee||"number"!==ee&&"string"!==ee)throw new TypeError("hint must be \"string\" or \"number\"");var te="string"===ee?["toString","valueOf"]:["valueOf","toString"],ae,ie,ne;for(ne=0;ne<te.length;++ne)if(ae=J[te[ne]],E(ae)&&(ie=ae.call(J),L(ie)))return ie;throw new TypeError("No default value")},Q=function(J,ee){var te=J[ee];if(null!==te&&"undefined"!=typeof te){if(!E(te))throw new TypeError(te+" returned for property "+ee+" of object "+J+" is not a function");return te}};R.exports=function(J,ee){if(L(J))return J;var te="default";1<arguments.length&&(ee===String?te="string":ee===Number&&(te="number"));var ae;if(T&&(Symbol.toPrimitive?ae=Q(J,Symbol.toPrimitive):W(J)&&(ae=Symbol.prototype.valueOf)),"undefined"!=typeof ae){var ie=ae.call(J,te);if(L(ie))return ie;throw new TypeError("unable to convert exotic object to primitive")}return"default"==te&&(G(J)||W(J))&&(te="string"),Z(J,"default"==te?"number":te)}},{"./helpers/isPrimitive":33,"is-callable":54,"is-date-object":55,"is-symbol":59}],33:[function(I,R,T){arguments[4][28][0].apply(T,arguments)},{dup:28}],34:[function(I,R){"use strict";var T=Object.prototype.hasOwnProperty,L=Object.prototype.toString,E=function(Z){return"function"==typeof Array.isArray?Array.isArray(Z):"[object Array]"===L.call(Z)},G=function(Z){if(!Z||"[object Object]"!==L.call(Z))return!1;var Q=T.call(Z,"constructor"),$=Z.constructor&&Z.constructor.prototype&&T.call(Z.constructor.prototype,"isPrototypeOf");if(Z.constructor&&!Q&&!$)return!1;for(var J in Z);return"undefined"==typeof J||T.call(Z,J)};R.exports=function W(){var ae=arguments[0],ie=1,ne=arguments.length,le=!1,Z,Q,$,J,ee,te;for("boolean"==typeof ae?(le=ae,ae=arguments[1]||{},ie=2):("object"!=typeof ae&&"function"!=typeof ae||null==ae)&&(ae={});ie<ne;++ie)if(Z=arguments[ie],null!=Z)for(Q in Z)$=ae[Q],J=Z[Q],ae!==J&&(le&&J&&(G(J)||(ee=E(J)))?(ee?(ee=!1,te=$&&E($)?$:[]):te=$&&G($)?$:{},ae[Q]=W(le,te,J)):"undefined"!=typeof J&&(ae[Q]=J));return ae}},{}],35:[function(I,R){(function(T){"use strict";var L=I("utf8"),E=[];R.exports=class{constructor(W,Z){Z=Z||{};var Q=!1;W===void 0&&(W=8192),"number"==typeof W?W=new ArrayBuffer(W):(Q=!0,this._lastWrittenByte=W.byteLength);var $=Z.offset?Z.offset>>>0:0,J=W.byteLength-$,ee=$;W.buffer&&(W.byteLength!==W.buffer.byteLength&&(ee=W.byteOffset+$),W=W.buffer),this._lastWrittenByte=Q?J:0,this.buffer=W,this.length=J,this.byteLength=J,this.byteOffset=ee,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,ee,J),this._mark=0,this._marks=[]}available(W){return void 0===W&&(W=1),this.offset+W<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(W){return void 0===W&&(W=1),this.offset+=W,this}seek(W){return this.offset=W,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){var W=this._marks.pop();if(void 0===W)throw new Error("Mark stack empty");return this.seek(W),this}rewind(){return this.offset=0,this}ensureAvailable(W){if(void 0===W&&(W=1),!this.available(W)){var Z=this.offset+W,Q=2*Z,$=new Uint8Array(Q);$.set(new Uint8Array(this.buffer)),this.buffer=$.buffer,this.length=this.byteLength=Q,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(W){W===void 0&&(W=1);var Z=new Uint8Array(W);for(var Q=0;Q<W;Q++)Z[Q]=this.readByte();return Z}readInt16(){var W=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,W}readUint16(){var W=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,W}readInt32(){var W=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,W}readUint32(){var W=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,W}readFloat32(){var W=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,W}readFloat64(){var W=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,W}readChar(){return String.fromCharCode(this.readInt8())}readChars(W){W===void 0&&(W=1),E.length=W;for(var Z=0;Z<W;Z++)E[Z]=this.readChar();return E.join("")}readUtf8(W){W===void 0&&(W=1);var Z=this.readChars(W);return L.decode(Z)}writeBoolean(W){return this.writeUint8(W?255:0),this}writeInt8(W){return this.ensureAvailable(1),this._data.setInt8(this.offset++,W),this._updateLastWrittenByte(),this}writeUint8(W){return this.ensureAvailable(1),this._data.setUint8(this.offset++,W),this._updateLastWrittenByte(),this}writeByte(W){return this.writeUint8(W)}writeBytes(W){this.ensureAvailable(W.length);for(var Z=0;Z<W.length;Z++)this._data.setUint8(this.offset++,W[Z]);return this._updateLastWrittenByte(),this}writeInt16(W){return this.ensureAvailable(2),this._data.setInt16(this.offset,W,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(W){return this.ensureAvailable(2),this._data.setUint16(this.offset,W,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(W){return this.ensureAvailable(4),this._data.setInt32(this.offset,W,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(W){return this.ensureAvailable(4),this._data.setUint32(this.offset,W,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(W){return this.ensureAvailable(4),this._data.setFloat32(this.offset,W,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(W){return this.ensureAvailable(8),this._data.setFloat64(this.offset,W,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(W){return this.writeUint8(W.charCodeAt(0))}writeChars(W){for(var Z=0;Z<W.length;Z++)this.writeUint8(W.charCodeAt(Z));return this}writeUtf8(W){var Z=L.encode(W);return this.writeChars(Z)}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this._lastWrittenByte)}getBuffer(){return"undefined"==typeof T?this.toArray():T.from(this.toArray())}_updateLastWrittenByte(){this.offset>this._lastWrittenByte&&(this._lastWrittenByte=this.offset)}}}).call(this,I("buffer").Buffer)},{buffer:7,utf8:148}],36:[function(I,R){"use strict";R.exports={BITMAPV5HEADER:{LogicalColorSpace:{LCS_CALIBRATED_RGB:0,LCS_sRGB:1934772034,LCS_WINDOWS_COLOR_SPACE:1466527264},Compression:{BI_RGB:0,BI_RLE8:1,BI_RLE4:2,BI_BITFIELDS:3,BI_JPEG:4,BI_PNG:5,BI_CMYK:11,BI_CMYKRLE8:12,BI_CMYKRLE4:13},GamutMappingIntent:{LCS_GM_ABS_COLORIMETRIC:8,LCS_GM_BUSINESS:1,LCS_GM_GRAPHICS:2,LCS_GM_IMAGES:4}}}},{}],37:[function(I,R){"use strict";function T(J,ee){var te=4*Math.floor((ee.bitDepth*ee.width+31)/32),ae=Math.ceil(ee.bitDepth*ee.width/8),ie=ee.bitDepth*ee.width%8,ne=0===ie?0:8-ie,le=te*ee.height,oe,se,de=new W(ee.data),he=0,ue=0,ce=8;J.mark(),se=de.readUint8();for(var ge=ee.height-1;0<=ge;ge--){var pe=0===ge;J.reset(),J.skip(ge*te);for(var fe=0;fe<ae;fe++){var _e=fe===ae-1;ue<=ne&&_e?(J.writeByte(se<<ue),(0==ne||ne==ue)&&!pe&&(oe=se,se=de.readByte())):0==ue?(oe=se,se=de.readUint8(),J.writeByte(oe)):(oe=se,se=de.readUint8(),J.writeByte(oe<<ue&Q[ue]|se>>ce)),_e?(he+=ie||8,J.skip(te-ae),ue=he%8,ce=8-ue):he+=8}}te>ae&&(J.reset(),J.skip(le-1),J.writeUint8(0))}function L(J,ee){8<ee.bitDepth||J.writeUint32(0).writeUint32(16777215)}function E(J,ee){J.writeChars("BM"),J.writeInt32(J._lastWrittenByte),J.writeUint16(0),J.writeUint16(0),J.writeUint32(ee)}function G(J,ee){J.writeUint32(124).writeInt32(ee.width).writeInt32(ee.height).writeUint16(1).writeUint16(ee.bitDepth).writeUint32(Z.BITMAPV5HEADER.Compression.BI_RGB).writeUint32(ee.width*ee.height*ee.bitDepth).writeInt32(0).writeInt32(0).writeUint32(Math.pow(2,ee.bitDepth)).writeUint32(Math.pow(2,ee.bitDepth)).writeUint32(4278190080).writeUint32(16711680).writeUint32(65280).writeUint32(255).writeUint32(Z.BITMAPV5HEADER.LogicalColorSpace.LCS_sRGB).skip(36).skip(12).writeUint32(Z.BITMAPV5HEADER.GamutMappingIntent.LCS_GM_IMAGES).skip(12)}var W=I("iobuffer"),Z=I("./constants"),Q=[];for(var $=0;8>=$;$++)Q.push(255<<$);R.exports=function(J){if(1!==J.bitDepth)throw new Error("Only bitDepth of 1 is supported");if(!J.height||!J.width)throw new Error("ImageData width and height are required");if(1!==J.components)throw new Error("Only 1 component is supported");if(1!==J.channels)throw new Error("Only 1 channel is supported");var ee=new W;ee.skip(14),G(ee,J),L(ee,J);var te=ee.offset;return T(ee,J),ee.rewind(),E(ee,te),ee.getBuffer()}},{"./constants":36,iobuffer:35}],38:[function(I,R,T){"use strict";T.encode=I("./encode")},{"./encode":37}],39:[function(I,R){"use strict";var T=I("iobuffer"),L=I("tiff");R.exports=function(G){var W=new T(G),Z={};W.setBigEndian();var Q=W.readUint16();if(65496!==Q)throw new Error("SOI marker not found. Not a valid JPEG file");var $=W.readUint16();if(65505===$){W.readUint16();var J=W.readBytes(6);if(69===J[0]&&120===J[1]&&105===J[2]&&102===J[3]&&0===J[4]&&0===J[5]){var ee=L.decode(W,{onlyFirst:!0,ignoreImageData:!0,offset:W.offset});Z.exif=ee}}return Z}},{iobuffer:52,tiff:142}],40:[function(I,R,T){"use strict";T.decode=I("./decode")},{"./decode":39}],41:[function(I,R,T){"use strict";(function(){function L(G,W,Z){this.next=Z,Z&&(Z.prev=this),this.prev=W,W&&(W.next=this),this.data=G}function E(){return this instanceof E?void(this._head=null,this._tail=null,this.length=0):new E}E.prototype={push:function(W){this._tail=new L(W,this._tail,null),this._head||(this._head=this._tail),this.length++},pop:function(){if(0===this.length)return void 0;var W=this._tail;return this._tail=W.prev,W.prev&&(W.prev=this._tail.next=null),this.length--,1===this.length?this._head=this._tail:0===this.length&&(this._head=this._tail=null),W.data},unshift:function(W){this._head=new L(W,null,this._head),this._tail||(this._tail=this._head),this.length++},shift:function(){if(0===this.length)return void 0;var W=this._head;return this._head=W.next,W.next&&(W.next=this._head.prev=null),this.length--,1===this.length?this._tail=this._head:0===this.length&&(this._head=this._tail=null),W.data},item:function(W){0>W&&(W=this.length+W);for(var Z=this._head;0<W--&&Z;)Z=Z.next;return Z?Z.data:void 0},slice:function(W,Z){if(W||(W=0),Z||(Z=this.length),0>Z&&(Z=this.length+Z),0>W&&(W=this.length+W),Z===W)return[];if(Z<W)throw new Error("invalid offset: "+W+","+Z+" (length="+this.length+")");for(var Q=Z-W,$=Array(Q),J=0,ee=this._head;0<W--&&ee;)ee=ee.next;for(;J<Q&&ee;)$[J++]=ee.data,ee=ee.next;return $},drop:function(){E.call(this)},forEach:function(W,Z){for(var Q=this._head,$=0,J=this.length;$<J&&Q;)W.call(Z||this,Q.data,$,this),Q=Q.next,$++},map:function(W,Z){var Q=new E;return this.forEach(function($,J,ee){Q.push(W.call(Z||ee,$,J,ee))}),Q},filter:function(W,Z){var Q=new E;return this.forEach(function($,J,ee){W.call(Z||ee,$,J,ee)&&Q.push($)}),Q},reduce:function(W,Z,Q){var $=0,J=this._head,ee=this.length;for(Z||($=1,Z=J&&J.data,J=J&&J.next);$<ee&&J;)Z=W.call(Q||this,Z,J.data,this),$++,J=J.next;return Z}},"undefined"==typeof T?"function"==typeof define&&define.amd?define("FastList",function(){return E}):function(){return this}().FastList=E:R.exports=E})()},{}],42:[function(I,R){"use strict";function T(te,ae,ie){for(var ne=0;ne<ie;ne++)ae[ne]=te[ne]}function L(te,ae,ie,ne){for(var le=0;le<ne;le++)ae[le]=te[le];for(;le<ie;le++)ae[le]=255&te[le]+ae[le-ne]}function E(te,ae,ie,ne){var le=0;if(0===ie.length)for(;le<ne;le++)ae[le]=te[le];else for(;le<ne;le++)ae[le]=255&te[le]+ie[le]}function G(te,ae,ie,ne,le){var oe=0;if(0===ie.length){for(;oe<le;oe++)ae[oe]=te[oe];for(;oe<ne;oe++)ae[oe]=255&te[oe]+(ae[oe-le]>>1)}else{for(;oe<le;oe++)ae[oe]=255&te[oe]+(ie[oe]>>1);for(;oe<ne;oe++)ae[oe]=255&te[oe]+(ae[oe-le]+ie[oe]>>1)}}function W(te,ae,ie,ne,le){var oe=0;if(0===ie.length){for(;oe<le;oe++)ae[oe]=te[oe];for(;oe<ne;oe++)ae[oe]=255&te[oe]+ae[oe-le]}else{for(;oe<le;oe++)ae[oe]=255&te[oe]+ie[oe];for(;oe<ne;oe++)ae[oe]=255&te[oe]+Z(ae[oe-le],ie[oe],ie[oe-le])}}function Z(te,ae,ie){var ne=te+ae-ie,le=Math.abs(ne-te),oe=Math.abs(ne-ae),se=Math.abs(ne-ie);if(le<=oe&&le<=se)return te;return oe<=se?ae:ie}var Q=I("iobuffer"),$=I("pako").Inflate,J=new Uint8Array(0),ee=[137,80,78,71,13,10,26,10];R.exports=class extends Q{constructor(ae){super(ae),this._decoded=!1,this._inflator=new $,this._png=null,this._end=!1,this.setBigEndian()}decode(){if(this._decoded)return this._png;for(this._png={tEXt:{}},this.decodeSignature();!this._end;)this.decodeChunk();return this.decodeImage(),this._png}decodeSignature(){for(var ae=0;8>ae;ae++)if(this.readUint8()!==ee[ae])throw new Error(`Wrong PNG signature. Byte at ${ae} should be ${ee[ae]}.`)}decodeChunk(){var ae=this.readUint32(),ie=this.readChars(4),ne=this.offset;switch(ie){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(ae);break;case"IDAT":this.decodeIDAT(ae);break;case"tEXt":this.decodetEXt(ae);break;case"IEND":this._end=!0;break;default:this.skip(ae);}if(this.offset-ne!==ae)throw new Error("Length mismatch while decoding chunk "+ie);this.readUint32()}decodeIHDR(){var ae=this._png;if(ae.width=this.readUint32(),ae.height=this.readUint32(),ae.bitDepth=this.readUint8(),ae.colourType=this.readUint8(),ae.compressionMethod=this.readUint8(),ae.filterMethod=this.readUint8(),ae.interlaceMethod=this.readUint8(),0!==this._png.compressionMethod)throw new Error("Unsupported compression method: "+ae.compressionMethod)}decodePLTE(ae){if(0!=ae%3)throw new RangeError("PLTE field length must be a multiple of 3. Got "+ae);var ie=ae/3;this._hasPalette=!0;var ne=this._palette=Array(ie);for(var le=0;le<ie;le++)ne[le]=[this.readUint8(),this.readUint8(),this.readUint8()]}decodeIDAT(ae){this._inflator.push(new Uint8Array(this.buffer,this.offset,ae)),this.skip(ae)}decodetEXt(ae){for(var ie="",ne;"\0"!==(ne=this.readChar());)ie+=ne;this._png.tEXt[ie]=this.readChars(ae-ie.length-1)}decodeImage(){if(this._inflator.push(J,!0),this._inflator.err)throw new Error("Error while decompressing the data");var ae=this._inflator.result;if(this._inflator=null,0!==this._png.filterMethod)throw new Error("Filter method "+this._png.filterMethod+" not supported");if(0===this._png.interlaceMethod)this.decodeInterlaceNull(ae);else throw new Error("Interlace method "+this._png.interlaceMethod+" not supported")}decodeInterlaceNull(ae){var ie;switch(this._png.colourType){case 0:ie=1;break;case 2:ie=3;break;case 3:if(!this._hasPalette)throw new Error("Missing palette");ie=1;break;case 4:ie=2;break;case 6:ie=4;break;default:throw new Error("Unknown colour type: "+this._png.colourType);}var ne=this._png.height,le=ie*this._png.bitDepth/8,oe=this._png.width*le,se=new Uint8Array(this._png.height*oe),de=J,he=0,ue,ce;for(var ge=0;ge<ne;ge++){switch(ue=ae.subarray(he+1,he+1+oe),ce=se.subarray(ge*oe,(ge+1)*oe),ae[he]){case 0:T(ue,ce,oe);break;case 1:L(ue,ce,oe,le);break;case 2:E(ue,ce,de,oe);break;case 3:G(ue,ce,de,oe,le);break;case 4:W(ue,ce,de,oe,le);break;default:throw new Error("Unsupported filter: "+ae[he]);}de=ce,he+=oe+1}this._hasPalette&&(this._png.palette=this._palette),this._png.data=se}}},{iobuffer:52,pako:123}],43:[function(I,R,T){"use strict";T.PNGDecoder=I("./PNGDecoder")},{"./PNGDecoder":42}],44:[function(I,R){"use strict";R.exports=function(T){return T&&1<T.length?255===T[0]&&216===T[1]&&255===T[2]?{ext:"jpg",mime:"image/jpeg"}:137===T[0]&&80===T[1]&&78===T[2]&&71===T[3]?{ext:"png",mime:"image/png"}:71===T[0]&&73===T[1]&&70===T[2]?{ext:"gif",mime:"image/gif"}:87===T[8]&&69===T[9]&&66===T[10]&&80===T[11]?{ext:"webp",mime:"image/webp"}:70===T[0]&&76===T[1]&&73===T[2]&&70===T[3]?{ext:"flif",mime:"image/flif"}:(73===T[0]&&73===T[1]&&42===T[2]&&0===T[3]||77===T[0]&&77===T[1]&&0===T[2]&&42===T[3])&&67===T[8]&&82===T[9]?{ext:"cr2",mime:"image/x-canon-cr2"}:73===T[0]&&73===T[1]&&42===T[2]&&0===T[3]||77===T[0]&&77===T[1]&&0===T[2]&&42===T[3]?{ext:"tif",mime:"image/tiff"}:66===T[0]&&77===T[1]?{ext:"bmp",mime:"image/bmp"}:73===T[0]&&73===T[1]&&188===T[2]?{ext:"jxr",mime:"image/vnd.ms-photo"}:56===T[0]&&66===T[1]&&80===T[2]&&83===T[3]?{ext:"psd",mime:"image/vnd.adobe.photoshop"}:80===T[0]&&75===T[1]&&3===T[2]&&4===T[3]&&109===T[30]&&105===T[31]&&109===T[32]&&101===T[33]&&116===T[34]&&121===T[35]&&112===T[36]&&101===T[37]&&97===T[38]&&112===T[39]&&112===T[40]&&108===T[41]&&105===T[42]&&99===T[43]&&97===T[44]&&116===T[45]&&105===T[46]&&111===T[47]&&110===T[48]&&47===T[49]&&101===T[50]&&112===T[51]&&117===T[52]&&98===T[53]&&43===T[54]&&122===T[55]&&105===T[56]&&112===T[57]?{ext:"epub",mime:"application/epub+zip"}:80===T[0]&&75===T[1]&&3===T[2]&&4===T[3]&&77===T[30]&&69===T[31]&&84===T[32]&&65===T[33]&&45===T[34]&&73===T[35]&&78===T[36]&&70===T[37]&&47===T[38]&&109===T[39]&&111===T[40]&&122===T[41]&&105===T[42]&&108===T[43]&&108===T[44]&&97===T[45]&&46===T[46]&&114===T[47]&&115===T[48]&&97===T[49]?{ext:"xpi",mime:"application/x-xpinstall"}:80===T[0]&&75===T[1]&&(3===T[2]||5===T[2]||7===T[2])&&(4===T[3]||6===T[3]||8===T[3])?{ext:"zip",mime:"application/zip"}:117===T[257]&&115===T[258]&&116===T[259]&&97===T[260]&&114===T[261]?{ext:"tar",mime:"application/x-tar"}:82===T[0]&&97===T[1]&&114===T[2]&&33===T[3]&&26===T[4]&&7===T[5]&&(0===T[6]||1===T[6])?{ext:"rar",mime:"application/x-rar-compressed"}:31===T[0]&&139===T[1]&&8===T[2]?{ext:"gz",mime:"application/gzip"}:66===T[0]&&90===T[1]&&104===T[2]?{ext:"bz2",mime:"application/x-bzip2"}:55===T[0]&&122===T[1]&&188===T[2]&&175===T[3]&&39===T[4]&&28===T[5]?{ext:"7z",mime:"application/x-7z-compressed"}:120===T[0]&&1===T[1]?{ext:"dmg",mime:"application/x-apple-diskimage"}:0===T[0]&&0===T[1]&&0===T[2]&&(24===T[3]||32===T[3])&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]||51===T[0]&&103===T[1]&&112===T[2]&&53===T[3]||0===T[0]&&0===T[1]&&0===T[2]&&28===T[3]&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]&&109===T[8]&&112===T[9]&&52===T[10]&&50===T[11]&&109===T[16]&&112===T[17]&&52===T[18]&&49===T[19]&&109===T[20]&&112===T[21]&&52===T[22]&&50===T[23]&&105===T[24]&&115===T[25]&&111===T[26]&&109===T[27]||0===T[0]&&0===T[1]&&0===T[2]&&28===T[3]&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]&&105===T[8]&&115===T[9]&&111===T[10]&&109===T[11]||0===T[0]&&0===T[1]&&0===T[2]&&28===T[3]&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]&&109===T[8]&&112===T[9]&&52===T[10]&&50===T[11]&&0===T[12]&&0===T[13]&&0===T[14]&&0===T[15]?{ext:"mp4",mime:"video/mp4"}:0===T[0]&&0===T[1]&&0===T[2]&&28===T[3]&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]&&77===T[8]&&52===T[9]&&86===T[10]?{ext:"m4v",mime:"video/x-m4v"}:77===T[0]&&84===T[1]&&104===T[2]&&100===T[3]?{ext:"mid",mime:"audio/midi"}:109===T[31]&&97===T[32]&&116===T[33]&&114===T[34]&&111===T[35]&&115===T[36]&&107===T[37]&&97===T[38]?{ext:"mkv",mime:"video/x-matroska"}:26===T[0]&&69===T[1]&&223===T[2]&&163===T[3]?{ext:"webm",mime:"video/webm"}:0===T[0]&&0===T[1]&&0===T[2]&&20===T[3]&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]?{ext:"mov",mime:"video/quicktime"}:82===T[0]&&73===T[1]&&70===T[2]&&70===T[3]&&65===T[8]&&86===T[9]&&73===T[10]?{ext:"avi",mime:"video/x-msvideo"}:48===T[0]&&38===T[1]&&178===T[2]&&117===T[3]&&142===T[4]&&102===T[5]&&207===T[6]&&17===T[7]&&166===T[8]&&217===T[9]?{ext:"wmv",mime:"video/x-ms-wmv"}:0===T[0]&&0===T[1]&&1===T[2]&&"b"===T[3].toString(16)[0]?{ext:"mpg",mime:"video/mpeg"}:73===T[0]&&68===T[1]&&51===T[2]||255===T[0]&&251===T[1]?{ext:"mp3",mime:"audio/mpeg"}:102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]&&77===T[8]&&52===T[9]&&65===T[10]||77===T[0]&&52===T[1]&&65===T[2]&&32===T[3]?{ext:"m4a",mime:"audio/m4a"}:79===T[28]&&112===T[29]&&117===T[30]&&115===T[31]&&72===T[32]&&101===T[33]&&97===T[34]&&100===T[35]?{ext:"opus",mime:"audio/opus"}:79===T[0]&&103===T[1]&&103===T[2]&&83===T[3]?{ext:"ogg",mime:"audio/ogg"}:102===T[0]&&76===T[1]&&97===T[2]&&67===T[3]?{ext:"flac",mime:"audio/x-flac"}:82===T[0]&&73===T[1]&&70===T[2]&&70===T[3]&&87===T[8]&&65===T[9]&&86===T[10]&&69===T[11]?{ext:"wav",mime:"audio/x-wav"}:35===T[0]&&33===T[1]&&65===T[2]&&77===T[3]&&82===T[4]&&10===T[5]?{ext:"amr",mime:"audio/amr"}:37===T[0]&&80===T[1]&&68===T[2]&&70===T[3]?{ext:"pdf",mime:"application/pdf"}:77===T[0]&&90===T[1]?{ext:"exe",mime:"application/x-msdownload"}:(67===T[0]||70===T[0])&&87===T[1]&&83===T[2]?{ext:"swf",mime:"application/x-shockwave-flash"}:123===T[0]&&92===T[1]&&114===T[2]&&116===T[3]&&102===T[4]?{ext:"rtf",mime:"application/rtf"}:119===T[0]&&79===T[1]&&70===T[2]&&70===T[3]&&(0===T[4]&&1===T[5]&&0===T[6]&&0===T[7]||79===T[4]&&84===T[5]&&84===T[6]&&79===T[7])?{ext:"woff",mime:"application/font-woff"}:119===T[0]&&79===T[1]&&70===T[2]&&50===T[3]&&(0===T[4]&&1===T[5]&&0===T[6]&&0===T[7]||79===T[4]&&84===T[5]&&84===T[6]&&79===T[7])?{ext:"woff2",mime:"application/font-woff"}:76===T[34]&&80===T[35]&&(0===T[8]&&0===T[9]&&1===T[10]||1===T[8]&&0===T[9]&&2===T[10]||2===T[8]&&0===T[9]&&2===T[10])?{ext:"eot",mime:"application/octet-stream"}:0===T[0]&&1===T[1]&&0===T[2]&&0===T[3]&&0===T[4]?{ext:"ttf",mime:"application/font-sfnt"}:79===T[0]&&84===T[1]&&84===T[2]&&79===T[3]&&0===T[4]?{ext:"otf",mime:"application/font-sfnt"}:0===T[0]&&0===T[1]&&1===T[2]&&0===T[3]?{ext:"ico",mime:"image/x-icon"}:70===T[0]&&76===T[1]&&86===T[2]&&1===T[3]?{ext:"flv",mime:"video/x-flv"}:37===T[0]&&33===T[1]?{ext:"ps",mime:"application/postscript"}:253===T[0]&&55===T[1]&&122===T[2]&&88===T[3]&&90===T[4]&&0===T[5]?{ext:"xz",mime:"application/x-xz"}:83===T[0]&&81===T[1]&&76===T[2]&&105===T[3]?{ext:"sqlite",mime:"application/x-sqlite3"}:78===T[0]&&69===T[1]&&83===T[2]&&26===T[3]?{ext:"nes",mime:"application/x-nintendo-nes-rom"}:67===T[0]&&114===T[1]&&50===T[2]&&52===T[3]?{ext:"crx",mime:"application/x-google-chrome-extension"}:77===T[0]&&83===T[1]&&67===T[2]&&70===T[3]||73===T[0]&&83===T[1]&&99===T[2]&&40===T[3]?{ext:"cab",mime:"application/vnd.ms-cab-compressed"}:33===T[0]&&60===T[1]&&97===T[2]&&114===T[3]&&99===T[4]&&104===T[5]&&62===T[6]&&10===T[7]&&100===T[8]&&101===T[9]&&98===T[10]&&105===T[11]&&97===T[12]&&110===T[13]&&45===T[14]&&98===T[15]&&105===T[16]&&110===T[17]&&97===T[18]&&114===T[19]&&121===T[20]?{ext:"deb",mime:"application/x-deb"}:33===T[0]&&60===T[1]&&97===T[2]&&114===T[3]&&99===T[4]&&104===T[5]&&62===T[6]?{ext:"ar",mime:"application/x-unix-archive"}:237===T[0]&&171===T[1]&&238===T[2]&&219===T[3]?{ext:"rpm",mime:"application/x-rpm"}:31===T[0]&&160===T[1]||31===T[0]&&157===T[1]?{ext:"Z",mime:"application/x-compress"}:76===T[0]&&90===T[1]&&73===T[2]&&80===T[3]?{ext:"lz",mime:"application/x-lzip"}:208===T[0]&&207===T[1]&&17===T[2]&&224===T[3]&&161===T[4]&&177===T[5]&&26===T[6]&&225===T[7]?{ext:"msi",mime:"application/x-msi"}:null:null}},{}],45:[function(I,R){"use strict";var T=Object.prototype.hasOwnProperty,L=Object.prototype.toString;R.exports=function(G,W,Z){if("[object Function]"!==L.call(W))throw new TypeError("iterator must be a function");var Q=G.length;if(Q===+Q)for(var $=0;$<Q;$++)W.call(Z,G[$],$,G);else for(var J in G)T.call(G,J)&&W.call(Z,G[J],J,G)}},{}],46:[function(I,R){"use strict";var T=Array.prototype.slice,L=Object.prototype.toString;R.exports=function(G){var W=this;if("function"!=typeof W||"[object Function]"!==L.call(W))throw new TypeError("Function.prototype.bind called on incompatible "+W);var Z=T.call(arguments,1),$=Math.max(0,W.length-Z.length),J=[],Q;for(var ee=0;ee<$;ee++)J.push("$"+ee);if(Q=Function("binder","return function ("+J.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof Q){var ie=W.apply(this,Z.concat(T.call(arguments)));return Object(ie)===ie?ie:this}return W.apply(G,Z.concat(T.call(arguments)))}),W.prototype){var te=function(){};te.prototype=W.prototype,Q.prototype=new te,te.prototype=null}return Q}},{}],47:[function(I,R){"use strict";var T=I("./implementation");R.exports=Function.prototype.bind||T},{"./implementation":46}],48:[function(I,R,T){"use strict";var L=Object.prototype.hasOwnProperty;R.exports=T=function(G,W){return L.call(W,G)},T.version=I("./package").version},{"./package":49}],49:[function(I,R){R.exports={name:"has-own",version:"1.0.0",description:"A safer .hasOwnProperty() - hasOwn(name, obj)",main:"index.js",scripts:{test:"make test"},author:"Aaron Heckmann <aaron.heckmann+github@gmail.com>",license:"MIT",repository:{type:"git",url:"git://github.com/pebble/has-own.git"},homepage:"https://github.com/pebble/has-own/",devDependencies:{mocha:"^1.21.0"}}},{}],50:[function(I,R){"use strict";var T=I("file-type");R.exports=function(L){var E=T(L);return-1===["jpg","png","gif","webp","tif","bmp","jxr","psd"].indexOf(E&&E.ext)?null:E}},{"file-type":44}],51:[function(I,R){(function(T){"use strict";function L(){J=!0;for(var ie=ee.length,te,ae;ie;){for(ae=ee,ee=[],te=-1;++te<ie;)ae[te]();ie=ee.length}J=!1}var E=T.MutationObserver||T.WebKitMutationObserver,G;if(E){var W=0,Z=new E(L),Q=T.document.createTextNode("");Z.observe(Q,{characterData:!0}),G=function(){Q.data=W=++W%2}}else if(!T.setImmediate&&"undefined"!=typeof T.MessageChannel){var $=new T.MessageChannel;$.port1.onmessage=L,G=function(){$.port2.postMessage(0)}}else G="document"in T&&"onreadystatechange"in T.document.createElement("script")?function(){var ae=T.document.createElement("script");ae.onreadystatechange=function(){L(),ae.onreadystatechange=null,ae.parentNode.removeChild(ae),ae=null},T.document.documentElement.appendChild(ae)}:function(){setTimeout(L,0)};var J,ee=[];R.exports=function(ae){1!==ee.push(ae)||J||G()}}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],52:[function(I,R){"use strict";var T=8192,L=[];R.exports=class{constructor(G,W){W=W||{},G===void 0&&(G=T),"number"==typeof G&&(G=new ArrayBuffer(G));var Z=G.byteLength,Q=W.offset?W.offset>>>0:0;G.buffer&&(Z=G.byteLength-Q,G=G.byteLength===G.buffer.byteLength?Q?G.buffer.slice(Q):G.buffer:G.buffer.slice(G.byteOffset+Q,G.byteOffset+G.byteLength)),this.buffer=G,this.length=Z,this.byteLength=Z,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=Z||T,this._mark=0}available(G){return void 0===G&&(G=1),this.offset+G<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(G){G===void 0&&(G=1),this.offset+=G}seek(G){this.offset=G}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(G){if(void 0===G&&(G=1),!this.available(G)){var W=this._increment+this._increment;this._increment=W;var Z=this.length+W,Q=new Uint8Array(Z);Q.set(new Uint8Array(this.buffer)),this.buffer=Q.buffer,this.length=Z,this._data=new DataView(this.buffer)}}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(G){G===void 0&&(G=1);var W=new Uint8Array(G);for(var Z=0;Z<G;Z++)W[Z]=this.readByte();return W}readInt16(){var G=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,G}readUint16(){var G=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,G}readInt32(){var G=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,G}readUint32(){var G=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,G}readFloat32(){var G=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,G}readFloat64(){var G=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,G}readChar(){return String.fromCharCode(this.readInt8())}readChars(G){G===void 0&&(G=1),L.length=G;for(var W=0;W<G;W++)L[W]=this.readChar();return L.join("")}writeBoolean(G){this.writeUint8(G?255:0)}writeInt8(G){this.ensureAvailable(1),this._data.setInt8(this.offset++,G)}writeUint8(G){this.ensureAvailable(1),this._data.setUint8(this.offset++,G)}writeByte(G){this.writeUint8(G)}writeBytes(G){this.ensureAvailable(G.length);for(var W=0;W<G.length;W++)this._data.setUint8(this.offset++,G[W])}writeInt16(G){this.ensureAvailable(2),this._data.setInt16(this.offset,G,this.littleEndian),this.offset+=2}writeUint16(G){this.ensureAvailable(2),this._data.setUint16(this.offset,G,this.littleEndian),this.offset+=2}writeInt32(G){this.ensureAvailable(4),this._data.setInt32(this.offset,G,this.littleEndian),this.offset+=4}writeUint32(G){this.ensureAvailable(4),this._data.setUint32(this.offset,G,this.littleEndian),this.offset+=4}writeFloat32(G){this.ensureAvailable(4),this._data.setFloat32(this.offset,G,this.littleEndian),this.offset+=4}writeFloat64(G){this.ensureAvailable(8),this._data.setFloat64(this.offset,G,this.littleEndian),this.offset+=8}writeChar(G){this.writeUint8(G.charCodeAt(0))}writeChars(G){for(var W=0;W<G.length;W++)this.writeUint8(G.charCodeAt(W))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}},{}],53:[function(I,R){"use strict";var T=Object.prototype.toString;R.exports=function(E){return"Array"===T.call(E).substr(-6,5)}},{}],54:[function(I,R){"use strict";var T=Function.prototype.toString,L=/^\s*class /,E=function($){try{var J=T.call($),ee=J.replace(/\/\/.*\n/g,""),te=ee.replace(/\/\*[.\s\S]*\*\//g,""),ae=te.replace(/\n/mg," ").replace(/ {2}/g," ");return L.test(ae)}catch(ie){return!1}},G=function($){try{return!E($)&&(T.call($),!0)}catch(J){return!1}},W=Object.prototype.toString,Z="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;R.exports=function($){if(!$)return!1;if("function"!=typeof $&&"object"!=typeof $)return!1;if(Z)return G($);if(E($))return!1;var J=W.call($);return"[object Function]"===J||"[object GeneratorFunction]"===J}},{}],55:[function(I,R){"use strict";var T=Date.prototype.getDay,L=function(Z){try{return T.call(Z),!0}catch(Q){return!1}},E=Object.prototype.toString,G="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;R.exports=function(Z){return"object"!=typeof Z||null===Z?!1:G?L(Z):"[object Date]"===E.call(Z)}},{}],56:[function(I,R){"use strict";var T=I("number-is-nan");R.exports=Number.isFinite||function(L){return!("number"!=typeof L||T(L)||L===1/0||L===-(1/0))}},{"number-is-nan":120}],57:[function(I,R){"use strict";var T=I("is-finite");R.exports=Number.isInteger||function(L){return"number"==typeof L&&T(L)&&Math.floor(L)===L}},{"is-finite":56}],58:[function(I,R){"use strict";var T=RegExp.prototype.exec,L=function(Z){try{return T.call(Z),!0}catch(Q){return!1}},E=Object.prototype.toString,G="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;R.exports=function(Z){return!("object"!=typeof Z)&&(G?L(Z):"[object RegExp]"===E.call(Z))}},{}],59:[function(I,R){"use strict";var T=Object.prototype.toString,L="function"==typeof Symbol&&"symbol"==typeof Symbol();if(L){var E=Symbol.prototype.toString,G=/^Symbol\(.*\)$/,W=function(Q){return!("symbol"!=typeof Q.valueOf())&&G.test(E.call(Q))};R.exports=function(Q){if("symbol"==typeof Q)return!0;if("[object Symbol]"!==T.call(Q))return!1;try{return W(Q)}catch($){return!1}}}else R.exports=function(){return!1}},{}],60:[function(I,R,T){(function(L){"use strict";(function(E){if("object"==typeof T&&"undefined"!=typeof R)R.exports=E();else if("function"==typeof define&&define.amd)define([],E);else{var G;G="undefined"==typeof window?"undefined"==typeof L?"undefined"==typeof self?this:self:L:window,G.PriorityQueue=E()}})(function(){return function E(G,W,Z){function Q(ee,te){if(!W[ee]){if(!G[ee]){var ae="function"==typeof I&&I;if(!te&&ae)return ae(ee,!0);if($)return $(ee,!0);var ie=new Error("Cannot find module '"+ee+"'");throw ie.code="MODULE_NOT_FOUND",ie}var ne=W[ee]={exports:{}};G[ee][0].call(ne.exports,function(le){var oe=G[ee][1][le];return Q(oe?oe:le)},ne,ne.exports,E,G,W,Z)}return W[ee].exports}var $="function"==typeof I&&I;for(var J=0;J<Z.length;J++)Q(Z[J]);return Q}({1:[function(E,G){var ee=function(ie,ne){function le(){this.constructor=ie}for(var oe in ne)te.call(ne,oe)&&(ie[oe]=ne[oe]);return le.prototype=ne.prototype,ie.prototype=new le,ie.__super__=ne.prototype,ie},te={}.hasOwnProperty,W,Z,Q,$,J;W=E("./PriorityQueue/AbstractPriorityQueue"),Z=E("./PriorityQueue/ArrayStrategy"),$=E("./PriorityQueue/BinaryHeapStrategy"),Q=E("./PriorityQueue/BHeapStrategy"),J=function(ae){function ie(ne){ne||(ne={}),ne.strategy||(ne.strategy=$),ne.comparator||(ne.comparator=function(le,oe){return(le||0)-(oe||0)}),ie.__super__.constructor.call(this,ne)}return ee(ie,ae),ie}(W),J.ArrayStrategy=Z,J.BinaryHeapStrategy=$,J.BHeapStrategy=Q,G.exports=J},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(E,G){var W;G.exports=W=function(){function Z(Q){var $;if(null==(null==Q?void 0:Q.strategy))throw"Must pass options.strategy, a strategy";if(null==(null==Q?void 0:Q.comparator))throw"Must pass options.comparator, a comparator";this.priv=new Q.strategy(Q),this.length=(null==Q||null==($=Q.initialValues)?void 0:$.length)||0}return Z.prototype.queue=function(Q){return this.length++,this.priv.queue(Q),void 0},Z.prototype.dequeue=function(){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},Z.prototype.peek=function(){if(!this.length)throw"Empty queue";return this.priv.peek()},Z.prototype.clear=function(){return this.length=0,this.priv.clear()},Z}()},{}],3:[function(E,G){var W,Z;Z=function($,J,ee){var te,ae,ie;for(ae=0,te=$.length;ae<te;)ie=ae+te>>>1,0<=ee($[ie],J)?ae=ie+1:te=ie;return ae},G.exports=W=function(){function Q($){var J;this.options=$,this.comparator=this.options.comparator,this.data=(null==(J=this.options.initialValues)?void 0:J.slice(0))||[],this.data.sort(this.comparator).reverse()}return Q.prototype.queue=function($){var J=Z(this.data,$,this.comparator);return this.data.splice(J,0,$),void 0},Q.prototype.dequeue=function(){return this.data.pop()},Q.prototype.peek=function(){return this.data[this.data.length-1]},Q.prototype.clear=function(){return this.data.length=0,void 0},Q}()},{}],4:[function(E,G){var W;G.exports=W=function(){function Z(Q){var $,J,ee,te,ae,ie,ne,le,oe;for(this.comparator=(null==Q?void 0:Q.comparator)||function(se,de){return se-de},this.pageSize=(null==Q?void 0:Q.pageSize)||512,this.length=0,le=0;1<<le<this.pageSize;)le+=1;if(1<<le!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=le,this._emptyMemoryPageTemplate=$=[],(J=ee=0,ie=this.pageSize);0<=ie?ee<ie:ee>ie;J=0<=ie?++ee:--ee)$.push(null);if(this._memory=[],this._mask=this.pageSize-1,Q.initialValues)for(ne=Q.initialValues,te=0,ae=ne.length;te<ae;te++)oe=ne[te],this.queue(oe)}return Z.prototype.queue=function(Q){return this.length+=1,this._write(this.length,Q),this._bubbleUp(this.length,Q),void 0},Z.prototype.dequeue=function(){var Q,$;return Q=this._read(1),$=this._read(this.length),this.length-=1,0<this.length&&(this._write(1,$),this._bubbleDown(1,$)),Q},Z.prototype.peek=function(){return this._read(1)},Z.prototype.clear=function(){return this.length=0,this._memory.length=0,void 0},Z.prototype._write=function(Q,$){for(var J=Q>>this._shift;J>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[J][Q&this._mask]=$},Z.prototype._read=function(Q){return this._memory[Q>>this._shift][Q&this._mask]},Z.prototype._bubbleUp=function(Q,$){var J,ee,te,ae;for(J=this.comparator;1<Q&&(ee=Q&this._mask,Q<this.pageSize||3<ee?te=Q&~this._mask|ee>>1:2>ee?(te=Q-this.pageSize>>this._shift,te+=te&~(this._mask>>1),te|=this.pageSize>>1):te=Q-2,ae=this._read(te),!(0>J(ae,$)));)this._write(te,$),this._write(Q,ae),Q=te;0},Z.prototype._bubbleDown=function(Q,$){var J,ee,te,ae,ie;for(ie=this.comparator;Q<this.length;)if(Q>this._mask&&!(Q&this._mask-1)?J=ee=Q+2:Q&this.pageSize>>1?(J=(Q&~this._mask)>>1,J|=Q&this._mask>>1,J=J+1<<this._shift,ee=J+1):(J=Q+(Q&this._mask),ee=J+1),J!==ee&&ee<=this.length){if(te=this._read(J),ae=this._read(ee),0>ie(te,$)&&0>=ie(te,ae))this._write(J,$),this._write(Q,te),Q=J;else if(0>ie(ae,$))this._write(ee,$),this._write(Q,ae),Q=ee;else break;}else if(!(J<=this.length))break;else if(te=this._read(J),0>ie(te,$))this._write(J,$),this._write(Q,te),Q=J;else break;0},Z}()},{}],5:[function(E,G){var W;G.exports=W=function(){function Z(Q){var $;this.comparator=(null==Q?void 0:Q.comparator)||function(J,ee){return J-ee},this.length=0,this.data=(null==($=Q.initialValues)?void 0:$.slice(0))||[],this._heapify()}return Z.prototype._heapify=function(){var Q,$,J;if(0<this.data.length)for(Q=$=1,J=this.data.length;1<=J?$<J:$>J;Q=1<=J?++$:--$)this._bubbleUp(Q);0},Z.prototype.queue=function(Q){return this.data.push(Q),this._bubbleUp(this.data.length-1),void 0},Z.prototype.dequeue=function(){var Q,$;return $=this.data[0],Q=this.data.pop(),0<this.data.length&&(this.data[0]=Q,this._bubbleDown(0)),$},Z.prototype.peek=function(){return this.data[0]},Z.prototype.clear=function(){return this.length=0,this.data.length=0,void 0},Z.prototype._bubbleUp=function(Q){for(var $,J;0<Q&&($=Q-1>>>1,0>this.comparator(this.data[Q],this.data[$]));)J=this.data[$],this.data[$]=this.data[Q],this.data[Q]=J,Q=$;0},Z.prototype._bubbleDown=function(Q){var $,J,ee,te,ae;for($=this.data.length-1;J=(Q<<1)+1,te=J+1,ee=Q,J<=$&&0>this.comparator(this.data[J],this.data[ee])&&(ee=J),te<=$&&0>this.comparator(this.data[te],this.data[ee])&&(ee=te),ee!==Q;)ae=this.data[ee],this.data[ee]=this.data[Q],this.data[Q]=ae,Q=ee;0},Z}()},{}]},{},[1])(1)})}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],61:[function(I,R){"use strict";function T(){}function L(ie){if("function"!=typeof ie)throw new TypeError("resolver must be a function");this.state=ae,this.queue=[],this.outcome=void 0,ie!==T&&Z(this,ie)}function E(ie,ne,le){this.promise=ie,"function"==typeof ne&&(this.onFulfilled=ne,this.callFulfilled=this.otherCallFulfilled),"function"==typeof le&&(this.onRejected=le,this.callRejected=this.otherCallRejected)}function G(ie,ne,le){$(function(){var oe;try{oe=ne(le)}catch(se){return J.reject(ie,se)}oe===ie?J.reject(ie,new TypeError("Cannot resolve promise with itself")):J.resolve(ie,oe)})}function W(ie){var ne=ie&&ie.then;if(ie&&"object"==typeof ie&&"function"==typeof ne)return function(){ne.apply(ie,arguments)}}function Z(ie,ne){function le(he){se||(se=!0,J.reject(ie,he))}function oe(he){se||(se=!0,J.resolve(ie,he))}var se=!1,de=Q(function(){ne(oe,le)});"error"===de.status&&le(de.value)}function Q(ie,ne){var le={};try{le.value=ie(ne),le.status="success"}catch(oe){le.status="error",le.value=oe}return le}var $=I("immediate"),J={},ee=["REJECTED"],te=["FULFILLED"],ae=["PENDING"];R.exports=L,L.prototype["catch"]=function(ie){return this.then(null,ie)},L.prototype.then=function(ie,ne){if("function"!=typeof ie&&this.state===te||"function"!=typeof ne&&this.state===ee)return this;var le=new this.constructor(T);if(this.state!==ae){var oe=this.state===te?ie:ne;G(le,oe,this.outcome)}else this.queue.push(new E(le,ie,ne));return le},E.prototype.callFulfilled=function(ie){J.resolve(this.promise,ie)},E.prototype.otherCallFulfilled=function(ie){G(this.promise,this.onFulfilled,ie)},E.prototype.callRejected=function(ie){J.reject(this.promise,ie)},E.prototype.otherCallRejected=function(ie){G(this.promise,this.onRejected,ie)},J.resolve=function(ie,ne){var le=Q(W,ne);if("error"===le.status)return J.reject(ie,le.value);var oe=le.value;if(oe)Z(ie,oe);else{ie.state=te,ie.outcome=ne;for(var se=-1,de=ie.queue.length;++se<de;)ie.queue[se].callFulfilled(ne)}return ie},J.reject=function(ie,ne){ie.state=ee,ie.outcome=ne;for(var le=-1,oe=ie.queue.length;++le<oe;)ie.queue[le].callRejected(ne);return ie},L.resolve=function(ne){return ne instanceof this?ne:J.resolve(new this(T),ne)},L.reject=function(ne){var le=new this(T);return J.reject(le,ne)},L.all=function(ne){function le(pe,fe){oe.resolve(pe).then(function(be){he[fe]=be,++ue!==se||de||(de=!0,J.resolve(ge,he))},function(_e){de||(de=!0,J.reject(ge,_e))})}var oe=this;if("[object Array]"!==Object.prototype.toString.call(ne))return this.reject(new TypeError("must be an array"));var se=ne.length,de=!1;if(!se)return this.resolve([]);for(var he=Array(se),ue=0,ce=-1,ge=new this(T);++ce<se;)le(ne[ce],ce);return ge},L.race=function(ne){function le(ce){oe.resolve(ce).then(function(ge){de||(de=!0,J.resolve(ue,ge))},function(ge){de||(de=!0,J.reject(ue,ge))})}var oe=this;if("[object Array]"!==Object.prototype.toString.call(ne))return this.reject(new TypeError("must be an array"));var se=ne.length,de=!1;if(!se)return this.resolve([]);for(var he=-1,ue=new this(T);++he<se;)le(ne[he]);return ue}},{immediate:51}],62:[function(I,R){"use strict";function T(E){var G=Array(E[0].length);for(var W=0;W<G.length;++W)G[W]=Array(E.length);for(W=0;W<E.length;++W)for(var Z=0;Z<E[0].length;++Z)G[Z][W]=E[W][Z];return G}var L=I("ml-stat").array;R.exports={coordArrayToPoints:function(G,W){if(0!=G.length%W)throw new RangeError("Dimensions number must be accordance with the size of the array.");var Z=G.length/W,Q=Array(Z),$=0;for(var J=0;J<G.length;J+=W){var ee=Array(W);for(var te=0;te<W;++te)ee[te]=G[J+te];Q[$]=ee,$++}return Q},coordArrayToCoordMatrix:function(G,W){if(0!=G.length%W)throw new RangeError("Dimensions number must be accordance with the size of the array.");var Z=Array(W),Q=G.length/W;for(var $=0;$<Z.length;$++)Z[$]=Array(Q);for($=0;$<G.length;$+=W)for(var J=0;J<W;++J){var ee=Math.floor($/W);Z[J][ee]=G[$+J]}return Z},coordMatrixToCoordArray:function(G){var W=Array(G.length*G[0].length),Z=0;for(var Q=0;Q<G[0].length;++Q)for(var $=0;$<G.length;++$)W[Z]=G[$][Q],++Z;return W},coordMatrixToPoints:T,pointsToCoordArray:function(G){var W=Array(G.length*G[0].length),Z=0;for(var Q=0;Q<G.length;++Q)for(var $=0;$<G[0].length;++$)W[Z]=G[Q][$],++Z;return W},pointsToCoordMatrix:T,applyDotProduct:function(G,W){var Z,Q;G.length<=W.length?(Q=G,Z=W):(Q=W,Z=G);var $=Z.length-Q.length+1,J=Array($);for(var ee=0;ee<$;++ee){var te=0;for(var ae=0;ae<Q.length;++ae)te+=Q[ae]*Z[ee+ae];J[ee]=te}return J},scale:function(G,W){var Z;Z=W.inPlace?G:Array(G.length);var Q=W.max,$=W.min;if("number"==typeof Q){if("number"==typeof $){var J=L.minMax(G),ee=(Q-$)/(J.max-J.min);for(var te=0;te<Z.length;te++)Z[te]=(G[te]-J.min)*ee+$}else{var ae=L.max(G),ee=Q/ae;for(var te=0;te<Z.length;te++)Z[te]=G[te]*ee}}else if("number"==typeof $){var ae=L.min(G),ee=$/ae;for(var te=0;te<Z.length;te++)Z[te]=G[te]*ee}return Z}}},{"ml-stat":115}],63:[function(I,R,T){"use strict";function L(W,Z,Q,$,J){function ee(ve,Me,je,Pe){return(Pe-Me)/(je-ve)}var te=W.length,ae=($-Q)/(J-1),ie=Q-ae/2,ne=Array(J),le=W[1]-W[0],oe=W[W.length-1]-W[W.length-2],se=ie,de=ie+ae,he=Number.MIN_VALUE,ue=0,ce=W[0]-le,ge=0,pe=0,fe=0,_e=0,be=0,ye=0,xe=0,we=0;main:for(;!0;){for(;0<=ce-de;){var ke=G(0,de-he,fe,ue);if(ye=pe+ke,ne[we]=(ye-be)/ae,we++,we===J)break main;se=de,de+=ae,be=ye}he<=se&&se<=ce&&(ke=G(0,se-he,fe,ue),be=pe+ke),pe+=G(he,ce,fe,_e),he=ce,ue=ge,xe<te?(ce=W[xe],ge=Z[xe],xe++):xe===te&&(ce+=oe,ge=0),fe=ee(he,ue,ce,ge),_e=-fe*he+ue}return ne}function E(W,Z,Q,$,J){var ee=W.length,te=($-Q)/(J-1),ae=W[W.length-1]-W[W.length-2],ie=Q-te/2,ne=Array(J),le=ie,oe=ie+te,se=-Number.MAX_VALUE,de=0,he=W[0],ue=Z[0],ce=0,ge=!0,pe=0,fe=0,_e=1,be=0;main:for(;!0;){if(se>=he)throw new Error("x must be an increasing serie");for(;0<se-oe;){if(ge&&(fe++,ge=!1),ne[be]=0>=fe?0:pe/fe,be++,be===J)break main;le=oe,oe+=te,pe=0,fe=0}se>le&&(pe+=de,fe++),(se==-Number.MAX_VALUE||1<ce)&&fe--,se=he,de=ue,_e<ee?(he=W[_e],ue=Z[_e],_e++):(he+=ae,ue=0,ce++)}return ne}function G(W,Z,Q,$){return 0.5*Q*Z*Z+$*Z-(0.5*Q*W*W+$*W)}T.getEquallySpacedData=function(Z,Q,$){1<Z.length&&Z[0]>Z[1]&&(Z=Z.slice().reverse(),Q=Q.slice().reverse());var J=Z.length;if(J!==Q.length)throw new RangeError("the x and y vector doesn't have the same size.");$===void 0&&($={});var ee=$.from===void 0?Z[0]:$.from;if(isNaN(ee)||!isFinite(ee))throw new RangeError("'From' value must be a number");var te=$.to===void 0?Z[Z.length-1]:$.to;if(isNaN(te)||!isFinite(te))throw new RangeError("'To' value must be a number");var ae=ee>te;if(ae){var ie=ee;ee=te,te=ie}var ne=$.numberOfPoints===void 0?100:$.numberOfPoints;if(isNaN(ne)||!isFinite(ne))throw new RangeError("'Number of points' value must be a number");if(1>ne)throw new RangeError("the number of point must be higher than 1");var le="slot"===$.variant?"slot":"smooth",oe="slot"==le?E(Z,Q,ee,te,ne):L(Z,Q,ee,te,ne);return ae?oe.reverse():oe},T.integral=G},{}],64:[function(I,R,T){"use strict";R.exports=T=I("./ArrayUtils"),T.getEquallySpacedData=I("./getEquallySpaced").getEquallySpacedData,T.SNV=I("./snv").SNV},{"./ArrayUtils":62,"./getEquallySpaced":63,"./snv":65}],65:[function(I,R,T){"use strict";T.SNV=function(G){var W=L.mean(G),Z=L.standardDeviation(G),Q=G.slice();for(var $=0;$<G.length;$++)Q[$]=(Q[$]-W)/Z;return Q};var L=I("ml-stat").array},{"ml-stat":115}],66:[function(I,R){"use strict";function T(L){this.value=L,this.parent=null,this.rank=0}R.exports=class{constructor(){this.nodes=new Map}add(E){var G=this.nodes.get(E);return G||(G=new T(E),this.nodes.set(E,G)),G}union(E,G){var W=this.find(E),Z=this.find(G);W===Z||(W.rank<Z.rank?W.parent=Z:W.rank>Z.rank?Z.parent=W:(Z.parent=W,W.rank++))}find(E){for(var G=E;null!==G.parent;)G=G.parent;for(var W=E;null!==W.parent;){var Z=W;W=W.parent,Z.parent=G}return G}connected(E,G){return this.find(E)===this.find(G)}}},{}],67:[function(I,R){"use strict";function T(E,G){var W=0;for(var Z=0;Z<E.length;Z++)W+=(E[Z]-G[Z])*(E[Z]-G[Z]);return W}function L(E,G){return Math.sqrt(T(E,G))}R.exports=L,L.squared=T},{}],68:[function(I,R){"use strict";var T=I("./fftlib");R.exports={DEBUG:!1,ifft2DArray:function(E,G,W){var Z=Array(G*W),Q=G/2,$=2*(W-1);T.init(Q);var J={re:Array(Q),im:Array(Q)};for(var ee=0;ee<W;ee++){for(var te=Q-1;0<=te;te--)J.re[te]=E[2*te*W+ee],J.im[te]=E[(2*te+1)*W+ee];T.bt(J.re,J.im);for(var te=Q-1;0<=te;te--)Z[2*te*W+ee]=J.re[te],Z[(2*te+1)*W+ee]=J.im[te]}var ae=Array(Q*$);T.init($);var ie={re:Array($),im:Array($)};for(var te=0;te<G;te+=2){ie.re[0]=Z[te*W],ie.im[0]=Z[(te+1)*W];for(var ee=1;ee<W;ee++)ie.re[ee]=Z[te*W+ee],ie.im[ee]=Z[(te+1)*W+ee],ie.re[$-ee]=Z[te*W+ee],ie.im[$-ee]=-Z[(te+1)*W+ee];T.bt(ie.re,ie.im);var ne=te/2*$;for(var ee=$-1;0<=ee;ee--)ae[ne+ee]=ie.re[ee]/($*Q)}return ae},fft2DArray:function(E,G,W){Object.assign({},{inplace:!0});var Z=W/2+1,Q=2*G,$=Array(Q*Z);T.init(W);var J={re:Array(W),im:Array(W)},ee={re:Array(W),im:Array(W)},te={re:Array(W),im:Array(W)},ae,ie,ne,le,oe;for(var se=0;se<G/2;se++){ae=2*se*W,J.re=E.slice(ae,ae+W),ae=(2*se+1)*W,J.im=E.slice(ae,ae+W),T.fft1d(J.re,J.im),this.reconstructTwoRealFFT(J,ee,te),ie=4*se*Z,ne=(4*se+1)*Z,le=(4*se+2)*Z,oe=(4*se+3)*Z;for(var de=Z-1;0<=de;de--)$[ie+de]=ee.re[de],$[ne+de]=ee.im[de],$[le+de]=te.re[de],$[oe+de]=te.im[de]}ee=null,te=null;var he=Array(Q*Z);T.init(G);var ue={re:Array(G),im:Array(G)};for(var ce=Z-1;0<=ce;ce--){for(var se=G-1;0<=se;se--)ue.re[se]=$[2*se*Z+ce],ue.im[se]=$[(2*se+1)*Z+ce],isNaN(ue.re[se])&&(ue.re[se]=0),isNaN(ue.im[se])&&(ue.im[se]=0);T.fft1d(ue.re,ue.im);for(var se=G-1;0<=se;se--)he[2*se*Z+ce]=ue.re[se],he[(2*se+1)*Z+ce]=ue.im[se]}return he},reconstructTwoRealFFT:function(E,G,W){var Z=E.re.length;G.re[0]=E.re[0],G.im[0]=0,W.re[0]=E.im[0],W.im[0]=0;var Q,$,J,ee,te;for(var ae=Z/2;0<ae;ae--)te=Z-ae,Q=0.5*(E.re[ae]-E.re[te]),$=0.5*(E.re[ae]+E.re[te]),J=0.5*(E.im[ae]-E.im[te]),ee=0.5*(E.im[ae]+E.im[te]),G.re[ae]=$,G.im[ae]=J,G.re[te]=$,G.im[te]=-J,W.re[ae]=ee,W.im[ae]=-Q,W.re[te]=ee,W.im[te]=Q},convolute2DI:function(E,G,W,Z){var Q,$;for(var J=0;J<W/2;J++)for(var ee=0;ee<Z;ee++)Q=E[2*J*Z+ee]*G[2*J*Z+ee]-E[(2*J+1)*Z+ee]*G[(2*J+1)*Z+ee],$=E[2*J*Z+ee]*G[(2*J+1)*Z+ee]+E[(2*J+1)*Z+ee]*G[2*J*Z+ee],E[2*J*Z+ee]=Q,E[(2*J+1)*Z+ee]=$},convolute:function(E,G,W,Z){var Q=Array(Z*W);for(var $=0;$<W*Z;$++)Q[$]=E[$];Q=this.fft2DArray(Q,W,Z);var J=G.length,ee=G[0].length,te=Array(Z*W);for(var $=0;$<Z*W;$++)te[$]=0;var ne=Math.floor((J-1)/2),le=Math.floor((ee-1)/2),ae,ie;for(var oe=0;oe<J;oe++){ae=(oe-ne+W)%W;for(var se=0;se<ee;se++)ie=(se-le+Z)%Z,te[ae*Z+ie]=G[oe][se]}te=this.fft2DArray(te,W,Z);var de=2*W,he=Z/2+1;return this.convolute2DI(Q,te,de,he),this.ifft2DArray(Q,de,he)},toRadix2:function(E,G,W){var Z,Q,$,J,ee=W,te=G;if(0===W||0!=(W&W-1)){for(ee=0;0!=W>>++ee;);ee=1<<ee}if(0===G||0!=(G&G-1)){for(te=0;0!=G>>++te;);te=1<<te}if(te==G&&ee==W)return{data:E,rows:G,cols:W};var ae=Array(te*ee),ie=Math.floor((te-G)/2)-G,ne=Math.floor((ee-W)/2)-W;for(Z=0;Z<te;Z++)for($=Z*ee,J=(Z-ie)%G*W,Q=0;Q<ee;Q++)ae[$+Q]=E[J+(Q-ne)%W];return{data:ae,rows:te,cols:ee}},crop:function(E,G,W,Z,Q,$){if(G==Z&&W==Q)return E;Object.assign({},$);var J=Array(Q*Z),ee=Math.floor((G-Z)/2),te=Math.floor((W-Q)/2),ae,ie,ne,le;for(ne=0;ne<Z;ne++)for(ae=ne*Q,ie=(ne+ee)*W,le=0;le<Q;le++)J[ae+le]=E[ie+(le+te)];return J}}},{"./fftlib":69}],69:[function(I,R,T){"use strict";(function(){var L;L="undefined"==typeof T?{}:T;var E={release:"0.3.0",date:"2013-03"};L.toString=function(){return"version "+E.release+", released "+E.date};var G=0,W=null,Z=null,Q={init:function(te){if(0!==te&&0==(te&te-1))G=te,Q._initArray(),Q._makeBitReversalTable(),Q._makeCosSinTable();else throw new Error("init: radix-2 required")},fft1d:function(te,ae){Q.fft(te,ae,1)},ifft1d:function(te,ae){var ie=1/G;Q.fft(te,ae,-1);for(var ne=0;ne<G;ne++)te[ne]*=ie,ae[ne]*=ie},bt1d:function(te,ae){Q.fft(te,ae,-1)},fft2d:function(te,ae){var ie=[],ne=[],le=0;for(var oe=0;oe<G;oe++){le=oe*G;for(var se=0;se<G;se++)ie[se]=te[se+le],ne[se]=ae[se+le];Q.fft1d(ie,ne);for(var de=0;de<G;de++)te[de+le]=ie[de],ae[de+le]=ne[de]}for(var he=0;he<G;he++){for(var ue=0;ue<G;ue++)le=he+ue*G,ie[ue]=te[le],ne[ue]=ae[le];Q.fft1d(ie,ne);for(var ce=0;ce<G;ce++)le=he+ce*G,te[le]=ie[ce],ae[le]=ne[ce]}},ifft2d:function(te,ae){var ie=[],ne=[],le=0;for(var oe=0;oe<G;oe++){le=oe*G;for(var se=0;se<G;se++)ie[se]=te[se+le],ne[se]=ae[se+le];Q.ifft1d(ie,ne);for(var de=0;de<G;de++)te[de+le]=ie[de],ae[de+le]=ne[de]}for(var he=0;he<G;he++){for(var ue=0;ue<G;ue++)le=he+ue*G,ie[ue]=te[le],ne[ue]=ae[le];Q.ifft1d(ie,ne);for(var ce=0;ce<G;ce++)le=he+ce*G,te[le]=ie[ce],ae[le]=ne[ce]}},fft:function(te,ae,ie){var pe=G>>2,ne,le,oe,se,de,he,ue,ce,ge;for(var fe=0;fe<G;fe++)se=W[fe],fe<se&&(de=te[fe],te[fe]=te[se],te[se]=de,de=ae[fe],ae[fe]=ae[se],ae[se]=de);for(var _e=1;_e<G;_e<<=1){le=0,ne=G/(_e<<1);for(var be=0;be<_e;be++){he=Z[le+pe],ue=ie*Z[le];for(var ye=be;ye<G;ye+=_e<<1)oe=ye+_e,ce=he*te[oe]+ue*ae[oe],ge=he*ae[oe]-ue*te[oe],te[oe]=te[ye]-ce,te[ye]+=ce,ae[oe]=ae[ye]-ge,ae[ye]+=ge;le+=ne}}},_initArray:function(){W="undefined"==typeof Uint32Array?[]:new Uint32Array(G),Z="undefined"==typeof Float64Array?[]:new Float64Array(1.25*G)},_paddingZero:function(){},_makeBitReversalTable:function(){var te=0,ae=0,ie=0;for(W[0]=0;++te<G;){for(ie=G>>1;ie<=ae;)ae-=ie,ie>>=1;ae+=ie,W[te]=ae}},_makeCosSinTable:function(){var te=G>>1,ae=G>>2,ie=G>>3,ne=Math.sin(Math.PI/G),le=2*ne*ne,oe=Math.sqrt(le*(2-le)),se=Z[ae]=1,de=Z[0]=0;ne=2*le;for(var he=1;he<ie;he++)se-=le,le+=ne*se,de+=oe,oe-=ne*de,Z[he]=de,Z[ae-he]=se;0!=ie&&(Z[ie]=Math.sqrt(0.5));for(var ue=0;ue<ae;ue++)Z[te-ue]=Z[ue];for(var ce=0;ce<te+ae;ce++)Z[ce+te]=-Z[ce]}},$=["init","fft1d","ifft1d","fft2d","ifft2d"];for(var J=0;J<$.length;J++)L[$[J]]=Q[$[J]];return L.bt=Q.bt1d,L.fft=Q.fft1d,L.ifft=Q.ifft1d,L}).call(void 0)},{}],70:[function(I,R,T){"use strict";T.FFTUtils=I("./FFTUtils"),T.FFT=I("./fftlib")},{"./FFTUtils":68,"./fftlib":69}],71:[function(I,R){"use strict";var T=I("ml-distance-euclidean").squared,L={sigma:1};R.exports=class{constructor(G){G=Object.assign({},L,G),this.sigma=G.sigma,this.divisor=2*G.sigma*G.sigma}compute(G,W){var Z=T(G,W);return Math.exp(-Z/this.divisor)}}},{"ml-distance-euclidean":67}],72:[function(I,R){"use strict";var T={degree:1,constant:1,scale:1};R.exports=class{constructor(E){E=Object.assign({},T,E),this.degree=E.degree,this.constant=E.constant,this.scale=E.scale}compute(E,G){var W=0;for(var Z=0;Z<E.length;Z++)W+=E[Z]*G[Z];return Math.pow(this.scale*W+this.constant,this.degree)}}},{}],73:[function(I,R){"use strict";var T={alpha:0.01,constant:-Math.E};R.exports=class{constructor(E){E=Object.assign({},T,E),this.alpha=E.alpha,this.constant=E.constant}compute(E,G){var W=0;for(var Z=0;Z<E.length;Z++)W+=E[Z]*G[Z];return Math.tanh(this.alpha*W+this.constant)}}},{}],74:[function(I,R){"use strict";var T=I("ml-matrix"),L=I("ml-kernel-gaussian"),E=I("ml-kernel-polynomial"),G=I("./kernels/anova-kernel"),W=I("./kernels/cauchy-kernel"),Z=I("./kernels/exponential-kernel"),Q=I("./kernels/histogram-intersection-kernel"),$=I("./kernels/laplacian-kernel"),J=I("./kernels/multiquadratic-kernel"),ee=I("./kernels/rational-quadratic-kernel"),te=I("ml-kernel-sigmoid"),ae={gaussian:L,rbf:L,polynomial:E,poly:E,anova:G,cauchy:W,exponential:Z,histogram:Q,min:Q,laplacian:$,multiquadratic:J,rational:ee,sigmoid:te,mlp:te};R.exports=class{constructor(ne,le){if(this.kernelType=ne,"linear"!==ne)if("string"==typeof ne){ne=ne.toLowerCase();var oe=ae[ne];if(oe)this.kernelFunction=new oe(le);else throw new Error("unsupported kernel type: "+ne)}else if("object"==typeof ne&&"function"==typeof ne.compute)this.kernelFunction=ne;else throw new TypeError("first argument must be a valid kernel type or instance")}compute(ne,le){if(void 0===le&&(le=ne),"linear"===this.kernelType){var oe=new T(ne);return oe.mmul(new T(le).transpose())}var se=new T(ne.length,le.length),de,he;if(ne===le)for(de=0;de<ne.length;de++)for(he=de;he<ne.length;he++)se[de][he]=se[he][de]=this.kernelFunction.compute(ne[de],ne[he]);else for(de=0;de<ne.length;de++)for(he=0;he<le.length;he++)se[de][he]=this.kernelFunction.compute(ne[de],le[he]);return se}}},{"./kernels/anova-kernel":75,"./kernels/cauchy-kernel":76,"./kernels/exponential-kernel":77,"./kernels/histogram-intersection-kernel":78,"./kernels/laplacian-kernel":79,"./kernels/multiquadratic-kernel":80,"./kernels/rational-quadratic-kernel":81,"ml-kernel-gaussian":71,"ml-kernel-polynomial":72,"ml-kernel-sigmoid":73,"ml-matrix":91}],75:[function(I,R){"use strict";var T={sigma:1,degree:1};R.exports=class{constructor(E){E=Object.assign({},T,E),this.sigma=E.sigma,this.degree=E.degree}compute(E,G){var W=0,Z=Math.min(E.length,G.length);for(var Q=1;Q<=Z;++Q)W+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(E[Q-1],Q)-Math.pow(G[Q-1],Q),2)),this.degree);return W}}},{}],76:[function(I,R){"use strict";var T=I("ml-distance-euclidean").squared,L={sigma:1};R.exports=class{constructor(G){G=Object.assign({},L,G),this.sigma=G.sigma}compute(G,W){return 1/(1+T(G,W)/(this.sigma*this.sigma))}}},{"ml-distance-euclidean":67}],77:[function(I,R){"use strict";var T=I("ml-distance-euclidean"),L={sigma:1};R.exports=class{constructor(G){G=Object.assign({},L,G),this.sigma=G.sigma,this.divisor=2*G.sigma*G.sigma}compute(G,W){var Z=T(G,W);return Math.exp(-Z/this.divisor)}}},{"ml-distance-euclidean":67}],78:[function(I,R){"use strict";R.exports=class{compute(L,E){var G=Math.min(L.length,E.length),W=0;for(var Z=0;Z<G;++Z)W+=Math.min(L[Z],E[Z]);return W}}},{}],79:[function(I,R){"use strict";var T=I("ml-distance-euclidean"),L={sigma:1};R.exports=class{constructor(G){G=Object.assign({},L,G),this.sigma=G.sigma}compute(G,W){var Z=T(G,W);return Math.exp(-Z/this.sigma)}}},{"ml-distance-euclidean":67}],80:[function(I,R){"use strict";var T=I("ml-distance-euclidean").squared,L={constant:1};R.exports=class{constructor(G){G=Object.assign({},L,G),this.constant=G.constant}compute(G,W){return Math.sqrt(T(G,W)+this.constant*this.constant)}}},{"ml-distance-euclidean":67}],81:[function(I,R){"use strict";var T=I("ml-distance-euclidean").squared,L={constant:1};R.exports=class{constructor(G){G=Object.assign({},L,G),this.constant=G.constant}compute(G,W){var Z=T(G,W);return 1-Z/(Z+this.constant)}}},{"ml-distance-euclidean":67}],82:[function(I,R){"use strict";"use strict;";function T(E){var G=E,W,Z;if("number"!=typeof E[0]){W=E.length,Z=E[0].length,G=Array(W*Z);for(var Q=0;Q<W;Q++)for(var $=0;$<Z;$++)G[Q*Z+$]=E[Q][$]}else{var J=Math.sqrt(E.length);Number.isInteger(J)&&(W=J,Z=J)}return{data:G,rows:W,cols:Z}}var L=I("ml-fft").FFTUtils;R.exports={fft:function(G,W,Z){var Q=T(G),$=Q.data,J=Object.assign({normalize:!1,divisor:1,rows:Q.rows,cols:Q.cols},Z),ee,te;if(J.rows&&J.cols)ee=J.rows,te=J.cols;else throw new Error("Invalid number of rows or columns "+ee+" "+te);var ae=J.divisor,le=W.length,oe=W[0].length,ie,ne;if(J.normalize)for(ae=0,ie=0;ie<le;ie++)for(ne=0;ne<oe;ne++)ae+=W[ie][ne];if(0===ae)throw new RangeError("convolution: The divisor is equal to zero");var se=L.toRadix2($,ee,te),de=L.convolute(se.data,W,se.rows,se.cols);if(de=L.crop(de,se.rows,se.cols,ee,te),0!=ae&&1!=ae)for(ie=0;ie<de.length;ie++)de[ie]/=ae;return de},direct:function(G,W,Z){var Q=T(G),$=Q.data,J=Object.assign({normalize:!1,divisor:1,rows:Q.rows,cols:Q.cols},Z),ee,te;if(J.rows&&J.cols)ee=J.rows,te=J.cols;else throw new Error("Invalid number of rows or columns "+ee+" "+te);var ae=J.divisor,ie=W.length,ne=W[0].length,le,oe,se,de,he,ue,ce,ge,pe;if(J.normalize)for(ae=0,le=0;le<ie;le++)for(oe=0;oe<ne;oe++)ae+=W[le][oe];if(0===ae)throw new RangeError("convolution: The divisor is equal to zero");var fe=Array(ee*te),_e=Math.floor(ie/2),be=Math.floor(ne/2);for(de=0;de<ee;de++)for(se=0;se<te;se++){for(ue=0,oe=0;oe<ie;oe++)for(le=0;le<ne;le++)ce=W[ie-oe-1][ne-le-1],ge=(de+oe-_e+ee)%ee,pe=(se+le-be+te)%te,he=ge*te+pe,ue+=$[he]*ce;he=de*te+se,fe[he]=ue/ae}return fe},kernelFactory:{LoG:function(G,W,Z){var Q=1e3;Z&&Z.factor&&(Q=Z.factor);var $=Array(W),J,ee,te,ae;Q*=-1;var ie=(W-1)/2;for(J=0;J<W;J++)for($[J]=Array(W),ae=(J-ie)*(J-ie),ee=0;ee<W;ee++)te=-((ee-ie)*(ee-ie)+ae)/(2*G*G),$[J][ee]=Math.round(Q*(1+te)*Math.exp(te));return $}},matrix2Array:T}},{"ml-fft":70}],83:[function(require,module){"use strict";module.exports=function(superCtor){function compareNumbers(I,R){return I-R}function fillTemplateFunction(I,R){for(var T in R)I=I.replace(new RegExp("%"+T+"%","g"),R[T]);return I}superCtor===void 0&&(superCtor=Object);class I extends superCtor{static get[Symbol.species](){return this}static from1DArray(R,T,L){if(R*T!==L.length)throw new RangeError("Data length does not match given dimensions");var E=new this(R,T);for(var G=0;G<R;G++)for(var W=0;W<T;W++)E.set(G,W,L[G*T+W]);return E}static rowVector(R){var T=new this(1,R.length);for(var L=0;L<R.length;L++)T.set(0,L,R[L]);return T}static columnVector(R){var T=new this(R.length,1);for(var L=0;L<R.length;L++)T.set(L,0,R[L]);return T}static empty(R,T){return new this(R,T)}static zeros(R,T){return this.empty(R,T).fill(0)}static ones(R,T){return this.empty(R,T).fill(1)}static rand(R,T,L){L===void 0&&(L=Math.random);var E=this.empty(R,T);for(var G=0;G<R;G++)for(var W=0;W<T;W++)E.set(G,W,L());return E}static randInt(R,T,L,E){L===void 0&&(L=1e3),E===void 0&&(E=Math.random);var G=this.empty(R,T);for(var W=0;W<R;W++)for(var Z=0;Z<T;Z++){var Q=Math.floor(E()*L);G.set(W,Z,Q)}return G}static eye(R,T,L){T===void 0&&(T=R),L===void 0&&(L=1);var E=Math.min(R,T),G=this.zeros(R,T);for(var W=0;W<E;W++)G.set(W,W,L);return G}static diag(R,T,L){var E=R.length;T===void 0&&(T=E),L===void 0&&(L=T);var G=Math.min(E,T,L),W=this.zeros(T,L);for(var Z=0;Z<G;Z++)W.set(Z,Z,R[Z]);return W}static min(R,T){R=this.checkMatrix(R),T=this.checkMatrix(T);var L=R.rows,E=R.columns,G=new this(L,E);for(var W=0;W<L;W++)for(var Z=0;Z<E;Z++)G.set(W,Z,Math.min(R.get(W,Z),T.get(W,Z)));return G}static max(R,T){R=this.checkMatrix(R),T=this.checkMatrix(T);var L=R.rows,E=R.columns,G=new this(L,E);for(var W=0;W<L;W++)for(var Z=0;Z<E;Z++)G.set(W,Z,Math.max(R.get(W,Z),T.get(W,Z)));return G}static checkMatrix(R){return I.isMatrix(R)?R:new this(R)}static isMatrix(R){return null!=R&&"Matrix"===R.klass}get size(){return this.rows*this.columns}apply(R){if("function"!=typeof R)throw new TypeError("callback must be a function");var T=this.rows,L=this.columns;for(var E=0;E<T;E++)for(var G=0;G<L;G++)R.call(this,E,G);return this}to1DArray(){var R=Array(this.size);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)R[T*this.columns+L]=this.get(T,L);return R}to2DArray(){var R=Array(this.rows);for(var T=0;T<this.rows;T++){R[T]=Array(this.columns);for(var L=0;L<this.columns;L++)R[T][L]=this.get(T,L)}return R}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var R=0;R<this.rows;R++)for(var T=0;T<=R;T++)if(this.get(R,T)!==this.get(T,R))return!1;return!0}return!1}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(R,T){R=R||1,T=T||1;var L=new this.constructor[Symbol.species](this.rows*R,this.columns*T);for(var E=0;E<R;E++)for(var G=0;G<T;G++)L.setSubMatrix(this,this.rows*E,this.columns*G);return L}fill(R){for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,R);return this}neg(){return this.mulS(-1)}getRow(R){util.checkRowIndex(this,R);var T=Array(this.columns);for(var L=0;L<this.columns;L++)T[L]=this.get(R,L);return T}getRowVector(R){return this.constructor.rowVector(this.getRow(R))}setRow(R,T){util.checkRowIndex(this,R),T=util.checkRowVector(this,T);for(var L=0;L<this.columns;L++)this.set(R,L,T[L]);return this}swapRows(R,T){util.checkRowIndex(this,R),util.checkRowIndex(this,T);for(var L=0;L<this.columns;L++){var E=this.get(R,L);this.set(R,L,this.get(T,L)),this.set(T,L,E)}return this}getColumn(R){util.checkColumnIndex(this,R);var T=Array(this.rows);for(var L=0;L<this.rows;L++)T[L]=this.get(L,R);return T}getColumnVector(R){return this.constructor.columnVector(this.getColumn(R))}setColumn(R,T){util.checkColumnIndex(this,R),T=util.checkColumnVector(this,T);for(var L=0;L<this.rows;L++)this.set(L,R,T[L]);return this}swapColumns(R,T){util.checkColumnIndex(this,R),util.checkColumnIndex(this,T);for(var L=0;L<this.rows;L++){var E=this.get(L,R);this.set(L,R,this.get(L,T)),this.set(L,T,E)}return this}addRowVector(R){R=util.checkRowVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)+R[L]);return this}subRowVector(R){R=util.checkRowVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)-R[L]);return this}mulRowVector(R){R=util.checkRowVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)*R[L]);return this}divRowVector(R){R=util.checkRowVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)/R[L]);return this}addColumnVector(R){R=util.checkColumnVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)+R[T]);return this}subColumnVector(R){R=util.checkColumnVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)-R[T]);return this}mulColumnVector(R){R=util.checkColumnVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)*R[T]);return this}divColumnVector(R){R=util.checkColumnVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)/R[T]);return this}mulRow(R,T){util.checkRowIndex(this,R);for(var L=0;L<this.columns;L++)this.set(R,L,this.get(R,L)*T);return this}mulColumn(R,T){util.checkColumnIndex(this,R);for(var L=0;L<this.rows;L++)this.set(L,R,this.get(L,R)*T);return this}max(){var R=this.get(0,0);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.get(T,L)>R&&(R=this.get(T,L));return R}maxIndex(){var R=this.get(0,0),T=[0,0];for(var L=0;L<this.rows;L++)for(var E=0;E<this.columns;E++)this.get(L,E)>R&&(R=this.get(L,E),T[0]=L,T[1]=E);return T}min(){var R=this.get(0,0);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.get(T,L)<R&&(R=this.get(T,L));return R}minIndex(){var R=this.get(0,0),T=[0,0];for(var L=0;L<this.rows;L++)for(var E=0;E<this.columns;E++)this.get(L,E)<R&&(R=this.get(L,E),T[0]=L,T[1]=E);return T}maxRow(R){util.checkRowIndex(this,R);var T=this.get(R,0);for(var L=1;L<this.columns;L++)this.get(R,L)>T&&(T=this.get(R,L));return T}maxRowIndex(R){util.checkRowIndex(this,R);var T=this.get(R,0),L=[R,0];for(var E=1;E<this.columns;E++)this.get(R,E)>T&&(T=this.get(R,E),L[1]=E);return L}minRow(R){util.checkRowIndex(this,R);var T=this.get(R,0);for(var L=1;L<this.columns;L++)this.get(R,L)<T&&(T=this.get(R,L));return T}minRowIndex(R){util.checkRowIndex(this,R);var T=this.get(R,0),L=[R,0];for(var E=1;E<this.columns;E++)this.get(R,E)<T&&(T=this.get(R,E),L[1]=E);return L}maxColumn(R){util.checkColumnIndex(this,R);var T=this.get(0,R);for(var L=1;L<this.rows;L++)this.get(L,R)>T&&(T=this.get(L,R));return T}maxColumnIndex(R){util.checkColumnIndex(this,R);var T=this.get(0,R),L=[0,R];for(var E=1;E<this.rows;E++)this.get(E,R)>T&&(T=this.get(E,R),L[0]=E);return L}minColumn(R){util.checkColumnIndex(this,R);var T=this.get(0,R);for(var L=1;L<this.rows;L++)this.get(L,R)<T&&(T=this.get(L,R));return T}minColumnIndex(R){util.checkColumnIndex(this,R);var T=this.get(0,R),L=[0,R];for(var E=1;E<this.rows;E++)this.get(E,R)<T&&(T=this.get(E,R),L[0]=E);return L}diag(){var R=Math.min(this.rows,this.columns),T=Array(R);for(var L=0;L<R;L++)T[L]=this.get(L,L);return T}sum(R){return"row"===R?util.sumByRow(this):"column"===R?util.sumByColumn(this):util.sumAll(this)}mean(){return this.sum()/this.size}prod(){var R=1;for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)R*=this.get(T,L);return R}cumulativeSum(){var R=0;for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)R+=this.get(T,L),this.set(T,L,R);return this}dot(R){I.isMatrix(R)&&(R=R.to1DArray());var T=this.to1DArray();if(T.length!==R.length)throw new RangeError("vectors do not have the same size");var L=0;for(var E=0;E<T.length;E++)L+=T[E]*R[E];return L}mmul(R){R=this.constructor.checkMatrix(R),this.columns!==R.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");var T=this.rows,L=this.columns,E=R.columns,G=new this.constructor[Symbol.species](T,E),W=Array(L);for(var Z=0;Z<E;Z++){for(var Q=0;Q<L;Q++)W[Q]=R.get(Q,Z);for(var $=0;$<T;$++){var J=0;for(Q=0;Q<L;Q++)J+=this.get($,Q)*W[Q];G.set($,Z,J)}}return G}strassen2x2(R){var T=new this.constructor[Symbol.species](2,2),L=this.get(0,0),E=R.get(0,0),G=this.get(0,1),W=R.get(0,1),Z=this.get(1,0),Q=R.get(1,0),$=this.get(1,1),J=R.get(1,1),ee=(L+$)*(E+J),te=(Z+$)*E,ae=L*(W-J),ie=$*(Q-E),ne=(L+G)*J;return T.set(0,0,ee+ie-ne+(G-$)*(Q+J)),T.set(0,1,ae+ne),T.set(1,0,te+ie),T.set(1,1,ee-te+ae+(Z-L)*(E+W)),T}strassen3x3(R){var T=new this.constructor[Symbol.species](3,3),L=this.get(0,0),E=this.get(0,1),G=this.get(0,2),W=this.get(1,0),Z=this.get(1,1),Q=this.get(1,2),$=this.get(2,0),J=this.get(2,1),ee=this.get(2,2),te=R.get(0,0),ae=R.get(0,1),ie=R.get(0,2),ne=R.get(1,0),le=R.get(1,1),oe=R.get(1,2),se=R.get(2,0),de=R.get(2,1),he=R.get(2,2),ue=(L-W)*(-ae+le),ce=(-L+W+Z)*(te-ae+le),ge=(W+Z)*(-te+ae),pe=L*te,fe=(-L+$+J)*(te-ie+oe),_e=(-L+$)*(ie-oe),be=($+J)*(-te+ie),ye=(-G+J+ee)*(le+se-de),xe=(G-ee)*(le-de),we=G*se,ke=(J+ee)*(-se+de),ve=(-G+Z+Q)*(oe+se-he),Me=(G-Q)*(oe-he),je=(Z+Q)*(-se+he);return T.set(0,0,pe+we+E*ne),T.set(0,1,(L+E+G-W-Z-J-ee)*le+ce+ge+pe+ye+we+ke),T.set(0,2,pe+fe+be+(L+E+G-Z-Q-$-J)*oe+we+ve+je),T.set(1,0,ue+Z*(-te+ae+ne-le-oe-se+he)+ce+pe+we+ve+Me),T.set(1,1,ue+ce+ge+pe+Q*de),T.set(1,2,we+ve+Me+je+W*ie),T.set(2,0,pe+fe+_e+J*(-te+ie+ne-le-oe-se+de)+ye+xe+we),T.set(2,1,ye+xe+we+ke+$*ae),T.set(2,2,pe+fe+_e+be+ee*he),T}mmulStrassen(R){function T(ee,te,ae){var ie=ee.rows,ne=ee.columns;if(ie===te&&ne===ae)return ee;var le=I.zeros(te,ae);return le=le.setSubMatrix(ee,0,0),le}function L(ee,te,ae,ie){if(512>=ae||512>=ie)return ee.mmul(te);1==ae%2&&1==ie%2?(ee=T(ee,ae+1,ie+1),te=T(te,ae+1,ie+1)):1==ae%2?(ee=T(ee,ae+1,ie),te=T(te,ae+1,ie)):1==ie%2&&(ee=T(ee,ae,ie+1),te=T(te,ae,ie+1));var ne=parseInt(ee.rows/2),le=parseInt(ee.columns/2),oe=ee.subMatrix(0,ne-1,0,le-1),se=te.subMatrix(0,ne-1,0,le-1),de=ee.subMatrix(0,ne-1,le,ee.columns-1),he=te.subMatrix(0,ne-1,le,te.columns-1),ue=ee.subMatrix(ne,ee.rows-1,0,le-1),ce=te.subMatrix(ne,te.rows-1,0,le-1),ge=ee.subMatrix(ne,ee.rows-1,le,ee.columns-1),pe=te.subMatrix(ne,te.rows-1,le,te.columns-1),fe=L(I.add(oe,ge),I.add(se,pe),ne,le),_e=L(I.add(ue,ge),se,ne,le),be=L(oe,I.sub(he,pe),ne,le),ye=L(ge,I.sub(ce,se),ne,le),xe=L(I.add(oe,de),pe,ne,le),we=L(I.sub(ue,oe),I.add(se,he),ne,le),ke=L(I.sub(de,ge),I.add(ce,pe),ne,le),ve=I.add(fe,ye);ve.sub(xe),ve.add(ke);var Me=I.add(be,xe),je=I.add(_e,ye),Pe=I.sub(fe,_e);Pe.add(be),Pe.add(we);var Ie=I.zeros(2*ve.rows,2*ve.columns);return Ie=Ie.setSubMatrix(ve,0,0),Ie=Ie.setSubMatrix(Me,ve.rows,0),Ie=Ie.setSubMatrix(je,0,ve.columns),Ie=Ie.setSubMatrix(Pe,ve.rows,ve.columns),Ie.subMatrix(0,ae-1,0,ie-1)}var E=this.clone(),G=E.rows,W=E.columns,Z=R.rows,Q=R.columns;W!==Z&&console.warn(`Multiplying ${G} x ${W} and ${Z} x ${Q} matrix: dimensions do not match.`);var $=Math.max(G,Z),J=Math.max(W,Q);return E=T(E,$,J),R=T(R,$,J),L(E,R,$,J)}scaleRows(R,T){if(R=void 0===R?0:R,T=void 0===T?1:T,R>=T)throw new RangeError("min should be strictly smaller than max");var L=this.constructor.empty(this.rows,this.columns);for(var E=0;E<this.rows;E++){var G=arrayUtils.scale(this.getRow(E),{min:R,max:T});L.setRow(E,G)}return L}scaleColumns(R,T){if(R=void 0===R?0:R,T=void 0===T?1:T,R>=T)throw new RangeError("min should be strictly smaller than max");var L=this.constructor.empty(this.rows,this.columns);for(var E=0;E<this.columns;E++){var G=arrayUtils.scale(this.getColumn(E),{min:R,max:T});L.setColumn(E,G)}return L}kroneckerProduct(R){R=this.constructor.checkMatrix(R);var T=this.rows,L=this.columns,E=R.rows,G=R.columns,W=new this.constructor[Symbol.species](T*E,L*G);for(var Z=0;Z<T;Z++)for(var Q=0;Q<L;Q++)for(var $=0;$<E;$++)for(var J=0;J<G;J++)W[E*Z+$][G*Q+J]=this.get(Z,Q)*R.get($,J);return W}transpose(){var R=new this.constructor[Symbol.species](this.columns,this.rows);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)R.set(L,T,this.get(T,L));return R}sortRows(R){R===void 0&&(R=compareNumbers);for(var T=0;T<this.rows;T++)this.setRow(T,this.getRow(T).sort(R));return this}sortColumns(R){R===void 0&&(R=compareNumbers);for(var T=0;T<this.columns;T++)this.setColumn(T,this.getColumn(T).sort(R));return this}subMatrix(R,T,L,E){util.checkRange(this,R,T,L,E);var G=new this.constructor[Symbol.species](T-R+1,E-L+1);for(var W=R;W<=T;W++)for(var Z=L;Z<=E;Z++)G[W-R][Z-L]=this.get(W,Z);return G}subMatrixRow(R,T,L){if(void 0===T&&(T=0),void 0===L&&(L=this.columns-1),T>L||0>T||T>=this.columns||0>L||L>=this.columns)throw new RangeError("Argument out of range");var E=new this.constructor[Symbol.species](R.length,L-T+1);for(var G=0;G<R.length;G++)for(var W=T;W<=L;W++){if(0>R[G]||R[G]>=this.rows)throw new RangeError("Row index out of range: "+R[G]);E.set(G,W-T,this.get(R[G],W))}return E}subMatrixColumn(R,T,L){if(void 0===T&&(T=0),void 0===L&&(L=this.rows-1),T>L||0>T||T>=this.rows||0>L||L>=this.rows)throw new RangeError("Argument out of range");var E=new this.constructor[Symbol.species](L-T+1,R.length);for(var G=0;G<R.length;G++)for(var W=T;W<=L;W++){if(0>R[G]||R[G]>=this.columns)throw new RangeError("Column index out of range: "+R[G]);E.set(W-T,G,this.get(W,R[G]))}return E}setSubMatrix(R,T,L){R=this.constructor.checkMatrix(R);var E=T+R.rows-1,G=L+R.columns-1;util.checkRange(this,T,E,L,G);for(var W=0;W<R.rows;W++)for(var Z=0;Z<R.columns;Z++)this[T+W][L+Z]=R.get(W,Z);return this}selection(R,T){var L=util.checkIndices(this,R,T),E=new this.constructor[Symbol.species](R.length,T.length);for(var G=0;G<L.row.length;G++){var W=L.row[G];for(var Z=0;Z<L.column.length;Z++){var Q=L.column[Z];E[G][Z]=this.get(W,Q)}}return E}trace(){var R=Math.min(this.rows,this.columns),T=0;for(var L=0;L<R;L++)T+=this.get(L,L);return T}transposeView(){return new MatrixTransposeView(this)}rowView(R){return util.checkRowIndex(this,R),new MatrixRowView(this,R)}columnView(R){return util.checkColumnIndex(this,R),new MatrixColumnView(this,R)}flipRowView(){return new MatrixFlipRowView(this)}flipColumnView(){return new MatrixFlipColumnView(this)}subMatrixView(R,T,L,E){return new MatrixSubView(this,R,T,L,E)}selectionView(R,T){return new MatrixSelectionView(this,R,T)}det(){if(this.isSquare()){var R,T,L,E;if(2===this.columns)return R=this.get(0,0),T=this.get(0,1),L=this.get(1,0),E=this.get(1,1),R*E-T*L;if(3===this.columns){var G,W,Z;return G=this.selectionView([1,2],[1,2]),W=this.selectionView([1,2],[0,2]),Z=this.selectionView([1,2],[0,1]),R=this.get(0,0),T=this.get(0,1),L=this.get(0,2),R*G.det()-T*W.det()+L*Z.det()}return new LuDecomposition(this).determinant}throw Error("Determinant can only be calculated for a square matrix.")}}I.prototype.klass="Matrix",I.random=I.rand,I.diagonal=I.diag,I.prototype.diagonal=I.prototype.diag,I.identity=I.eye,I.prototype.negate=I.prototype.neg,I.prototype.tensorProduct=I.prototype.kroneckerProduct,I.prototype.determinant=I.prototype.det;var inplaceOperator=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,inplaceOperatorScalar=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% value);
        }
    }
    return this;
})
`,inplaceOperatorMatrix=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));
        }
    }
    return this;
})
`,staticOperator=`
(function %name%(matrix, value) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%(value);
})
`,inplaceMethod=`
(function %name%() {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j)));
        }
    }
    return this;
})
`,staticMethod=`
(function %name%(matrix) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%();
})
`,inplaceMethodWithArgs=`
(function %name%(%args%) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), %args%));
        }
    }
    return this;
})
`,staticMethodWithArgs=`
(function %name%(matrix, %args%) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%(%args%);
})
`,inplaceMethodWithOneArgScalar=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), value));
        }
    }
    return this;
})
`,inplaceMethodWithOneArgMatrix=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));
        }
    }
    return this;
})
`,inplaceMethodWithOneArg=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,operators=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]],i;for(var operator of operators){var inplaceOp=eval(fillTemplateFunction(inplaceOperator,{name:operator[1],op:operator[0]})),inplaceOpS=eval(fillTemplateFunction(inplaceOperatorScalar,{name:operator[1]+"S",op:operator[0]})),inplaceOpM=eval(fillTemplateFunction(inplaceOperatorMatrix,{name:operator[1]+"M",op:operator[0]})),staticOp=eval(fillTemplateFunction(staticOperator,{name:operator[1]}));for(i=1;i<operator.length;i++)I.prototype[operator[i]]=inplaceOp,I.prototype[operator[i]+"S"]=inplaceOpS,I.prototype[operator[i]+"M"]=inplaceOpM,I[operator[i]]=staticOp}var methods=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(I){methods.push(["Math."+I,I])});for(var method of methods){var inplaceMeth=eval(fillTemplateFunction(inplaceMethod,{name:method[1],method:method[0]})),staticMeth=eval(fillTemplateFunction(staticMethod,{name:method[1]}));for(i=1;i<method.length;i++)I.prototype[method[i]]=inplaceMeth,I[method[i]]=staticMeth}var methodsWithArgs=[["Math.pow",1,"pow"]];for(var methodWithArg of methodsWithArgs){var args="arg0";for(i=1;i<methodWithArg[1];i++)args+=`, arg${i}`;if(1!==methodWithArg[1]){var inplaceMethWithArgs=eval(fillTemplateFunction(inplaceMethodWithArgs,{name:methodWithArg[2],method:methodWithArg[0],args:args})),staticMethWithArgs=eval(fillTemplateFunction(staticMethodWithArgs,{name:methodWithArg[2],args:args}));for(i=2;i<methodWithArg.length;i++)I.prototype[methodWithArg[i]]=inplaceMethWithArgs,I[methodWithArg[i]]=staticMethWithArgs}else{var tmplVar={name:methodWithArg[2],args:args,method:methodWithArg[0]},inplaceMethod2=eval(fillTemplateFunction(inplaceMethodWithOneArg,tmplVar)),inplaceMethodS=eval(fillTemplateFunction(inplaceMethodWithOneArgScalar,tmplVar)),inplaceMethodM=eval(fillTemplateFunction(inplaceMethodWithOneArgMatrix,tmplVar)),staticMethod2=eval(fillTemplateFunction(staticMethodWithArgs,tmplVar));for(i=2;i<methodWithArg.length;i++)I.prototype[methodWithArg[i]]=inplaceMethod2,I.prototype[methodWithArg[i]+"M"]=inplaceMethodM,I.prototype[methodWithArg[i]+"S"]=inplaceMethodS,I[methodWithArg[i]]=staticMethod2}}return I};var LuDecomposition=require("./dc/lu"),arrayUtils=require("ml-array-utils"),util=require("./util"),MatrixTransposeView=require("./views/transpose"),MatrixRowView=require("./views/row"),MatrixSubView=require("./views/sub"),MatrixSelectionView=require("./views/selection"),MatrixColumnView=require("./views/column"),MatrixFlipRowView=require("./views/flipRow"),MatrixFlipColumnView=require("./views/flipColumn")},{"./dc/lu":86,"./util":94,"./views/column":96,"./views/flipColumn":97,"./views/flipRow":98,"./views/row":99,"./views/selection":100,"./views/sub":101,"./views/transpose":102,"ml-array-utils":64}],84:[function(I,R){"use strict";function T(E){if(!(this instanceof T))return new T(E);if(E=L.checkMatrix(E),!E.isSymmetric())throw new Error("Matrix is not symmetric");var G=E,W=G.rows,Z=new L(W,W),Q=!0,$,J,ee;for(J=0;J<W;J++){var te=Z[J],ae=0;for(ee=0;ee<J;ee++){var ie=Z[ee],ne=0;for($=0;$<ee;$++)ne+=ie[$]*te[$];te[ee]=ne=(G[J][ee]-ne)/Z[ee][ee],ae=ae+ne*ne}for(ae=G[J][J]-ae,Q&=0<ae,Z[J][J]=Math.sqrt(Math.max(ae,0)),ee=J+1;ee<W;ee++)Z[J][ee]=0}if(!Q)throw new Error("Matrix is not positive definite");this.L=Z}var L=I("../matrix").Matrix;T.prototype={get lowerTriangularMatrix(){return this.L},solve:function(G){G=L.checkMatrix(G);var W=this.L,Z=W.rows;if(G.rows!==Z)throw new Error("Matrix dimensions do not match");var Q=G.columns,$=G.clone(),J,ee,te;for(te=0;te<Z;te++)for(ee=0;ee<Q;ee++){for(J=0;J<te;J++)$[te][ee]-=$[J][ee]*W[te][J];$[te][ee]/=W[te][te]}for(te=Z-1;0<=te;te--)for(ee=0;ee<Q;ee++){for(J=te+1;J<Z;J++)$[te][ee]-=$[J][ee]*W[J][te];$[te][ee]/=W[te][te]}return $}},R.exports=T},{"../matrix":92}],85:[function(I,R){"use strict";function T(ae,ie){if(ie=Object.assign({},te,ie),!(this instanceof T))return new T(ae,ie);if(ae=Q.checkMatrix(ae),!ae.isSquare())throw new Error("Matrix is not a square matrix");var ne=ae.columns,le=ee(ne,ne,0),oe=Array(ne),se=Array(ne),de=ae,ce=!1,he,ue;if(ce=!!ie.assumeSymmetric||ae.isSymmetric(),ce){for(he=0;he<ne;he++)for(ue=0;ue<ne;ue++)le[he][ue]=de.get(he,ue);L(ne,se,oe,le),E(ne,se,oe,le)}else{var ge=ee(ne,ne,0),pe=Array(ne);for(ue=0;ue<ne;ue++)for(he=0;he<ne;he++)ge[he][ue]=de.get(he,ue);G(ne,ge,pe,le),W(ne,se,oe,le,ge)}this.n=ne,this.e=se,this.d=oe,this.V=le}function L(ae,ie,ne,le){var oe,se,de,he,ue,ce,ge,pe;for(ue=0;ue<ae;ue++)ne[ue]=le[ae-1][ue];for(he=ae-1;0<he;he--){for(pe=0,de=0,ce=0;ce<he;ce++)pe=pe+Math.abs(ne[ce]);if(0===pe)for(ie[he]=ne[he-1],ue=0;ue<he;ue++)ne[ue]=le[he-1][ue],le[he][ue]=0,le[ue][he]=0;else{for(ce=0;ce<he;ce++)ne[ce]/=pe,de+=ne[ce]*ne[ce];for(oe=ne[he-1],se=Math.sqrt(de),0<oe&&(se=-se),ie[he]=pe*se,de=de-oe*se,ne[he-1]=oe-se,ue=0;ue<he;ue++)ie[ue]=0;for(ue=0;ue<he;ue++){for(oe=ne[ue],le[ue][he]=oe,se=ie[ue]+le[ue][ue]*oe,ce=ue+1;ce<=he-1;ce++)se+=le[ce][ue]*ne[ce],ie[ce]+=le[ce][ue]*oe;ie[ue]=se}for(oe=0,ue=0;ue<he;ue++)ie[ue]/=de,oe+=ie[ue]*ne[ue];for(ge=oe/(de+de),ue=0;ue<he;ue++)ie[ue]-=ge*ne[ue];for(ue=0;ue<he;ue++){for(oe=ne[ue],se=ie[ue],ce=ue;ce<=he-1;ce++)le[ce][ue]-=oe*ie[ce]+se*ne[ce];ne[ue]=le[he-1][ue],le[he][ue]=0}}ne[he]=de}for(he=0;he<ae-1;he++){if(le[ae-1][he]=le[he][he],le[he][he]=1,de=ne[he+1],0!==de){for(ce=0;ce<=he;ce++)ne[ce]=le[ce][he+1]/de;for(ue=0;ue<=he;ue++){for(se=0,ce=0;ce<=he;ce++)se+=le[ce][he+1]*le[ce][ue];for(ce=0;ce<=he;ce++)le[ce][ue]-=se*ne[ce]}}for(ce=0;ce<=he;ce++)le[ce][he+1]=0}for(ue=0;ue<ae;ue++)ne[ue]=le[ae-1][ue],le[ae-1][ue]=0;le[ae-1][ae-1]=1,ie[0]=0}function E(ae,ie,ne,le){var oe,se,de,he,ue,ce,ge,pe,fe,_e,be,ye,xe,we,ke,ve,Me;for(de=1;de<ae;de++)ie[de-1]=ie[de];ie[ae-1]=0;var je=0,Pe=0,Ie=Math.pow(2,-52);for(ce=0;ce<ae;ce++){for(Pe=Math.max(Pe,Math.abs(ne[ce])+Math.abs(ie[ce])),ge=ce;ge<ae&&!(Math.abs(ie[ge])<=Ie*Pe);)ge++;if(ge>ce){Me=0;do{for(Me=Me+1,oe=ne[ce],pe=(ne[ce+1]-oe)/(2*ie[ce]),fe=J(pe,1),0>pe&&(fe=-fe),ne[ce]=ie[ce]/(pe+fe),ne[ce+1]=ie[ce]*(pe+fe),_e=ne[ce+1],se=oe-ne[ce],de=ce+2;de<ae;de++)ne[de]-=se;for(je=je+se,pe=ne[ge],be=1,ye=be,xe=be,we=ie[ce+1],ke=0,ve=0,de=ge-1;de>=ce;de--)for(xe=ye,ye=be,ve=ke,oe=be*ie[de],se=be*pe,fe=J(pe,ie[de]),ie[de+1]=ke*fe,ke=ie[de]/fe,be=pe/fe,pe=be*ne[de]-ke*oe,ne[de+1]=se+ke*(be*oe+ke*ne[de]),ue=0;ue<ae;ue++)se=le[ue][de+1],le[ue][de+1]=ke*le[ue][de]+be*se,le[ue][de]=be*le[ue][de]-ke*se;pe=-ke*ve*xe*we*ie[ce]/_e,ie[ce]=ke*pe,ne[ce]=be*pe}while(Math.abs(ie[ce])>Ie*Pe)}ne[ce]=ne[ce]+je,ie[ce]=0}for(de=0;de<ae-1;de++){for(ue=de,pe=ne[de],he=de+1;he<ae;he++)ne[he]<pe&&(ue=he,pe=ne[he]);if(ue!==de)for(ne[ue]=ne[de],ne[de]=pe,he=0;he<ae;he++)pe=le[he][de],le[he][de]=le[he][ue],le[he][ue]=pe}}function G(ae,ie,ne,le){var oe=0,se=ae-1,de,he,ue,ce,ge,pe,fe;for(pe=oe+1;pe<=se-1;pe++){for(fe=0,ce=pe;ce<=se;ce++)fe=fe+Math.abs(ie[ce][pe-1]);if(0!==fe){for(ue=0,ce=se;ce>=pe;ce--)ne[ce]=ie[ce][pe-1]/fe,ue+=ne[ce]*ne[ce];for(he=Math.sqrt(ue),0<ne[pe]&&(he=-he),ue=ue-ne[pe]*he,ne[pe]=ne[pe]-he,ge=pe;ge<ae;ge++){for(de=0,ce=se;ce>=pe;ce--)de+=ne[ce]*ie[ce][ge];for(de=de/ue,ce=pe;ce<=se;ce++)ie[ce][ge]-=de*ne[ce]}for(ce=0;ce<=se;ce++){for(de=0,ge=se;ge>=pe;ge--)de+=ne[ge]*ie[ce][ge];for(de=de/ue,ge=pe;ge<=se;ge++)ie[ce][ge]-=de*ne[ge]}ne[pe]=fe*ne[pe],ie[pe][pe-1]=fe*he}}for(ce=0;ce<ae;ce++)for(ge=0;ge<ae;ge++)le[ce][ge]=ce===ge?1:0;for(pe=se-1;pe>=oe+1;pe--)if(0!==ie[pe][pe-1]){for(ce=pe+1;ce<=se;ce++)ne[ce]=ie[ce][pe-1];for(ge=pe;ge<=se;ge++){for(he=0,ce=pe;ce<=se;ce++)he+=ne[ce]*le[ce][ge];for(he=he/ne[pe]/ie[pe][pe-1],ce=pe;ce<=se;ce++)le[ce][ge]+=he*ne[ce]}}}function W(ae,ie,ne,le,oe){var se=ae-1,de=0,he=ae-1,ue=Math.pow(2,-52),ce=0,ge=0,pe=0,fe=0,_e=0,be=0,ye=0,xe=0,we,ke,ve,Me,je,Pe,Ie,De,Se,Ce,Ae,Be,Re,Te,ze;for(we=0;we<ae;we++)for((we<de||we>he)&&(ne[we]=oe[we][we],ie[we]=0),ke=Math.max(we-1,0);ke<ae;ke++)ge=ge+Math.abs(oe[we][ke]);for(;se>=de;){for(Me=se;Me>de&&(be=Math.abs(oe[Me-1][Me-1])+Math.abs(oe[Me][Me]),0==be&&(be=ge),!(Math.abs(oe[Me][Me-1])<ue*be));)Me--;if(Me===se)oe[se][se]=oe[se][se]+ce,ne[se]=oe[se][se],ie[se]=0,se--,xe=0;else if(Me===se-1){if(Ie=oe[se][se-1]*oe[se-1][se],pe=(oe[se-1][se-1]-oe[se][se])/2,fe=pe*pe+Ie,ye=Math.sqrt(Math.abs(fe)),oe[se][se]=oe[se][se]+ce,oe[se-1][se-1]=oe[se-1][se-1]+ce,De=oe[se][se],0<=fe){for(ye=0<=pe?pe+ye:pe-ye,ne[se-1]=De+ye,ne[se]=ne[se-1],0!=ye&&(ne[se]=De-Ie/ye),ie[se-1]=0,ie[se]=0,De=oe[se][se-1],be=Math.abs(De)+Math.abs(ye),pe=De/be,fe=ye/be,_e=Math.sqrt(pe*pe+fe*fe),pe=pe/_e,fe=fe/_e,ke=se-1;ke<ae;ke++)ye=oe[se-1][ke],oe[se-1][ke]=fe*ye+pe*oe[se][ke],oe[se][ke]=fe*oe[se][ke]-pe*ye;for(we=0;we<=se;we++)ye=oe[we][se-1],oe[we][se-1]=fe*ye+pe*oe[we][se],oe[we][se]=fe*oe[we][se]-pe*ye;for(we=de;we<=he;we++)ye=le[we][se-1],le[we][se-1]=fe*ye+pe*le[we][se],le[we][se]=fe*le[we][se]-pe*ye}else ne[se-1]=De+pe,ne[se]=De+pe,ie[se-1]=ye,ie[se]=-ye;se=se-2,xe=0}else{if(De=oe[se][se],Se=0,Ie=0,Me<se&&(Se=oe[se-1][se-1],Ie=oe[se][se-1]*oe[se-1][se]),10==xe){for(ce+=De,we=de;we<=se;we++)oe[we][we]-=De;be=Math.abs(oe[se][se-1])+Math.abs(oe[se-1][se-2]),De=Se=0.75*be,Ie=-0.4375*be*be}if(30==xe&&(be=(Se-De)/2,be=be*be+Ie,0<be)){for(be=Math.sqrt(be),Se<De&&(be=-be),be=De-Ie/((Se-De)/2+be),we=de;we<=se;we++)oe[we][we]-=be;ce+=be,De=Se=Ie=0.964}for(xe=xe+1,je=se-2;je>=Me&&(ye=oe[je][je],_e=De-ye,be=Se-ye,pe=(_e*be-Ie)/oe[je+1][je]+oe[je][je+1],fe=oe[je+1][je+1]-ye-_e-be,_e=oe[je+2][je+1],be=Math.abs(pe)+Math.abs(fe)+Math.abs(_e),pe=pe/be,fe=fe/be,_e=_e/be,je!=Me)&&!(Math.abs(oe[je][je-1])*(Math.abs(fe)+Math.abs(_e))<ue*(Math.abs(pe)*(Math.abs(oe[je-1][je-1])+Math.abs(ye)+Math.abs(oe[je+1][je+1]))));)je--;for(we=je+2;we<=se;we++)oe[we][we-2]=0,we>je+2&&(oe[we][we-3]=0);for(ve=je;ve<=se-1&&(Te=ve!==se-1,ve!=je&&(pe=oe[ve][ve-1],fe=oe[ve+1][ve-1],_e=Te?oe[ve+2][ve-1]:0,De=Math.abs(pe)+Math.abs(fe)+Math.abs(_e),0!==De&&(pe=pe/De,fe=fe/De,_e=_e/De)),0!==De);ve++)if(be=Math.sqrt(pe*pe+fe*fe+_e*_e),0>pe&&(be=-be),0!==be){for(ve==je?Me!==je&&(oe[ve][ve-1]=-oe[ve][ve-1]):oe[ve][ve-1]=-be*De,pe=pe+be,De=pe/be,Se=fe/be,ye=_e/be,fe=fe/pe,_e=_e/pe,ke=ve;ke<ae;ke++)pe=oe[ve][ke]+fe*oe[ve+1][ke],Te&&(pe=pe+_e*oe[ve+2][ke],oe[ve+2][ke]=oe[ve+2][ke]-pe*ye),oe[ve][ke]=oe[ve][ke]-pe*De,oe[ve+1][ke]=oe[ve+1][ke]-pe*Se;for(we=0;we<=Math.min(se,ve+3);we++)pe=De*oe[we][ve]+Se*oe[we][ve+1],Te&&(pe=pe+ye*oe[we][ve+2],oe[we][ve+2]=oe[we][ve+2]-pe*_e),oe[we][ve]=oe[we][ve]-pe,oe[we][ve+1]=oe[we][ve+1]-pe*fe;for(we=de;we<=he;we++)pe=De*le[we][ve]+Se*le[we][ve+1],Te&&(pe=pe+ye*le[we][ve+2],le[we][ve+2]=le[we][ve+2]-pe*_e),le[we][ve]=le[we][ve]-pe,le[we][ve+1]=le[we][ve+1]-pe*fe}}}if(0!==ge){for(se=ae-1;0<=se;se--)if(pe=ne[se],fe=ie[se],0===fe)for(Me=se,oe[se][se]=1,we=se-1;0<=we;we--){for(Ie=oe[we][we]-pe,_e=0,ke=Me;ke<=se;ke++)_e=_e+oe[we][ke]*oe[ke][se];if(0>ie[we])ye=Ie,be=_e;else if(Me=we,0===ie[we]?oe[we][se]=0===Ie?-_e/(ue*ge):-_e/Ie:(De=oe[we][we+1],Se=oe[we+1][we],fe=(ne[we]-pe)*(ne[we]-pe)+ie[we]*ie[we],Pe=(De*be-ye*_e)/fe,oe[we][se]=Pe,oe[we+1][se]=Math.abs(De)>Math.abs(ye)?(-_e-Ie*Pe)/De:(-be-Se*Pe)/ye),Pe=Math.abs(oe[we][se]),1<ue*Pe*Pe)for(ke=we;ke<=se;ke++)oe[ke][se]=oe[ke][se]/Pe}else if(0>fe)for(Me=se-1,Math.abs(oe[se][se-1])>Math.abs(oe[se-1][se])?(oe[se-1][se-1]=fe/oe[se][se-1],oe[se-1][se]=-(oe[se][se]-pe)/oe[se][se-1]):(ze=Z(0,-oe[se-1][se],oe[se-1][se-1]-pe,fe),oe[se-1][se-1]=ze[0],oe[se-1][se]=ze[1]),oe[se][se-1]=0,oe[se][se]=1,we=se-2;0<=we;we--){for(Ce=0,Ae=0,ke=Me;ke<=se;ke++)Ce=Ce+oe[we][ke]*oe[ke][se-1],Ae=Ae+oe[we][ke]*oe[ke][se];if(Ie=oe[we][we]-pe,0>ie[we])ye=Ie,_e=Ce,be=Ae;else if(Me=we,0===ie[we]?(ze=Z(-Ce,-Ae,Ie,fe),oe[we][se-1]=ze[0],oe[we][se]=ze[1]):(De=oe[we][we+1],Se=oe[we+1][we],Be=(ne[we]-pe)*(ne[we]-pe)+ie[we]*ie[we]-fe*fe,Re=2*(ne[we]-pe)*fe,0===Be&&0===Re&&(Be=ue*ge*(Math.abs(Ie)+Math.abs(fe)+Math.abs(De)+Math.abs(Se)+Math.abs(ye))),ze=Z(De*_e-ye*Ce+fe*Ae,De*be-ye*Ae-fe*Ce,Be,Re),oe[we][se-1]=ze[0],oe[we][se]=ze[1],Math.abs(De)>Math.abs(ye)+Math.abs(fe)?(oe[we+1][se-1]=(-Ce-Ie*oe[we][se-1]+fe*oe[we][se])/De,oe[we+1][se]=(-Ae-Ie*oe[we][se]-fe*oe[we][se-1])/De):(ze=Z(-_e-Se*oe[we][se-1],-be-Se*oe[we][se],ye,fe),oe[we+1][se-1]=ze[0],oe[we+1][se]=ze[1])),Pe=Math.max(Math.abs(oe[we][se-1]),Math.abs(oe[we][se])),1<ue*Pe*Pe)for(ke=we;ke<=se;ke++)oe[ke][se-1]=oe[ke][se-1]/Pe,oe[ke][se]=oe[ke][se]/Pe}for(we=0;we<ae;we++)if(we<de||we>he)for(ke=we;ke<ae;ke++)le[we][ke]=oe[we][ke];for(ke=ae-1;ke>=de;ke--)for(we=de;we<=he;we++){for(ye=0,ve=de;ve<=Math.min(ke,he);ve++)ye=ye+le[we][ve]*oe[ve][ke];le[we][ke]=ye}}}function Z(ae,ie,ne,le){var oe,se;return Math.abs(ne)>Math.abs(le)?(oe=le/ne,se=ne+oe*le,[(ae+oe*ie)/se,(ie-oe*ae)/se]):(oe=ne/le,se=le+oe*ne,[(oe*ae+ie)/se,(oe*ie-ae)/se])}var Q=I("../matrix").Matrix,$=I("./util"),J=$.hypotenuse,ee=$.getFilled2DArray,te={assumeSymmetric:!1};T.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return Q.isMatrix(this.V)||(this.V=new Q(this.V)),this.V},get diagonalMatrix(){var ae=this.n,ie=this.e,ne=this.d,le=new Q(ae,ae),oe,se;for(oe=0;oe<ae;oe++){for(se=0;se<ae;se++)le[oe][se]=0;le[oe][oe]=ne[oe],0<ie[oe]?le[oe][oe+1]=ie[oe]:0>ie[oe]&&(le[oe][oe-1]=ie[oe])}return le}},R.exports=T},{"../matrix":92,"./util":89}],86:[function(I,R){"use strict";function T(E){if(!(this instanceof T))return new T(E);E=L.Matrix.checkMatrix(E);var G=E.clone(),W=G.rows,Z=G.columns,Q=Array(W),$=1,J,ee,te,ae,ie,ne,le,oe,se,de;for(J=0;J<W;J++)Q[J]=J;for(se=Array(W),ee=0;ee<Z;ee++){for(J=0;J<W;J++)se[J]=G[J][ee];for(J=0;J<W;J++){for(oe=G[J],de=Math.min(J,ee),ie=0,te=0;te<de;te++)ie+=oe[te]*se[te];oe[ee]=se[J]-=ie}for(ae=ee,J=ee+1;J<W;J++)Math.abs(se[J])>Math.abs(se[ae])&&(ae=J);if(ae!==ee){for(te=0;te<Z;te++)ne=G[ae][te],G[ae][te]=G[ee][te],G[ee][te]=ne;le=Q[ae],Q[ae]=Q[ee],Q[ee]=le,$=-$}if(ee<W&&0!==G[ee][ee])for(J=ee+1;J<W;J++)G[J][ee]/=G[ee][ee]}this.LU=G,this.pivotVector=Q,this.pivotSign=$}var L=I("../matrix");T.prototype={isSingular:function(){var G=this.LU,W=G.columns;for(var Z=0;Z<W;Z++)if(0===G[Z][Z])return!0;return!1},get determinant(){var E=this.LU;if(!E.isSquare())throw new Error("Matrix must be square");var G=this.pivotSign,W=E.columns;for(var Z=0;Z<W;Z++)G*=E[Z][Z];return G},get lowerTriangularMatrix(){var E=this.LU,G=E.rows,W=E.columns,Z=new L.Matrix(G,W);for(var Q=0;Q<G;Q++)for(var $=0;$<W;$++)Z[Q][$]=Q>$?E[Q][$]:Q===$?1:0;return Z},get upperTriangularMatrix(){var E=this.LU,G=E.rows,W=E.columns,Z=new L.Matrix(G,W);for(var Q=0;Q<G;Q++)for(var $=0;$<W;$++)Z[Q][$]=Q<=$?E[Q][$]:0;return Z},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(G){G=L.Matrix.checkMatrix(G);var W=this.LU,Z=W.rows;if(Z!==G.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var Q=G.columns,$=G.subMatrixRow(this.pivotVector,0,Q-1),J=W.columns,ee,te,ae;for(ae=0;ae<J;ae++)for(ee=ae+1;ee<J;ee++)for(te=0;te<Q;te++)$[ee][te]-=$[ae][te]*W[ee][ae];for(ae=J-1;0<=ae;ae--){for(te=0;te<Q;te++)$[ae][te]/=W[ae][ae];for(ee=0;ee<ae;ee++)for(te=0;te<Q;te++)$[ee][te]-=$[ae][te]*W[ee][ae]}return $}},R.exports=T},{"../matrix":92}],87:[function(I,R){"use strict";function T(G){if(!(this instanceof T))return new T(G);G=L.checkMatrix(G);var W=G.clone(),Z=G.rows,Q=G.columns,$=Array(Q),J,ee,te,ae;for(te=0;te<Q;te++){var ie=0;for(J=te;J<Z;J++)ie=E(ie,W[J][te]);if(0!==ie){for(0>W[te][te]&&(ie=-ie),J=te;J<Z;J++)W[J][te]/=ie;for(W[te][te]+=1,ee=te+1;ee<Q;ee++){for(ae=0,J=te;J<Z;J++)ae+=W[J][te]*W[J][ee];for(ae=-ae/W[te][te],J=te;J<Z;J++)W[J][ee]+=ae*W[J][te]}}$[te]=-ie}this.QR=W,this.Rdiag=$}var L=I("../matrix").Matrix,E=I("./util").hypotenuse;T.prototype={solve:function(W){W=L.checkMatrix(W);var Z=this.QR,Q=Z.rows;if(W.rows!==Q)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var $=W.columns,J=W.clone(),ee=Z.columns,te,ae,ie,ne;for(ie=0;ie<ee;ie++)for(ae=0;ae<$;ae++){for(ne=0,te=ie;te<Q;te++)ne+=Z[te][ie]*J[te][ae];for(ne=-ne/Z[ie][ie],te=ie;te<Q;te++)J[te][ae]+=ne*Z[te][ie]}for(ie=ee-1;0<=ie;ie--){for(ae=0;ae<$;ae++)J[ie][ae]/=this.Rdiag[ie];for(te=0;te<ie;te++)for(ae=0;ae<$;ae++)J[te][ae]-=J[ie][ae]*Z[te][ie]}return J.subMatrix(0,ee-1,0,$-1)},isFullRank:function(){var W=this.QR.columns;for(var Z=0;Z<W;Z++)if(0===this.Rdiag[Z])return!1;return!0},get upperTriangularMatrix(){var G=this.QR,W=G.columns,Z=new L(W,W),Q,$;for(Q=0;Q<W;Q++)for($=0;$<W;$++)Z[Q][$]=Q<$?G[Q][$]:Q===$?this.Rdiag[Q]:0;return Z},get orthogonalMatrix(){var G=this.QR,W=G.rows,Z=G.columns,Q=new L(W,Z),$,J,ee,te;for(ee=Z-1;0<=ee;ee--){for($=0;$<W;$++)Q[$][ee]=0;for(Q[ee][ee]=1,J=ee;J<Z;J++)if(0!==G[ee][ee]){for(te=0,$=ee;$<W;$++)te+=G[$][ee]*Q[$][J];for(te=-te/G[ee][ee],$=ee;$<W;$++)Q[$][J]+=te*G[$][ee]}}return Q}},R.exports=T},{"../matrix":92,"./util":89}],88:[function(I,R){"use strict";function T(Z,Q){if(!(this instanceof T))return new T(Z,Q);Z=L.checkMatrix(Z),Q=Q||{};var $=Z.rows,J=Z.columns,ee=Math.min($,J),te=!0,ae=!0;!1===Q.computeLeftSingularVectors&&(te=!1),!1===Q.computeRightSingularVectors&&(ae=!1);var ie=!0===Q.autoTranspose,ne=!1,le;if(!($<J))le=Z.clone();else if(!ie)le=Z.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{le=Z.transpose(),$=le.rows,J=le.columns,ne=!0;var oe=te;te=ae,ae=oe}var se=Array(Math.min($+1,J)),de=W($,ee,0),he=W(J,J,0),ue=Array(J),ce=Array($),ge=Math.min($-1,J),pe=Math.max(0,Math.min(J-2,$)),fe,_e,be,ye,xe,we,ke,ve,Me,je,Pe,Ie,De,Se,Ce,Ae,Be,Re,Te,ze,Le;for(be=0,je=Math.max(ge,pe);be<je;be++){if(be<ge){for(se[be]=0,fe=be;fe<$;fe++)se[be]=G(se[be],le[fe][be]);if(0!==se[be]){for(0>le[be][be]&&(se[be]=-se[be]),fe=be;fe<$;fe++)le[fe][be]/=se[be];le[be][be]+=1}se[be]=-se[be]}for(_e=be+1;_e<J;_e++){if(be<ge&&0!==se[be]){for(xe=0,fe=be;fe<$;fe++)xe+=le[fe][be]*le[fe][_e];for(xe=-xe/le[be][be],fe=be;fe<$;fe++)le[fe][_e]+=xe*le[fe][be]}ue[_e]=le[be][_e]}if(te&&be<ge)for(fe=be;fe<$;fe++)de[fe][be]=le[fe][be];if(be<pe){for(ue[be]=0,fe=be+1;fe<J;fe++)ue[be]=G(ue[be],ue[fe]);if(0!==ue[be]){for(0>ue[be+1]&&(ue[be]=0-ue[be]),fe=be+1;fe<J;fe++)ue[fe]/=ue[be];ue[be+1]+=1}if(ue[be]=-ue[be],be+1<$&&0!==ue[be]){for(fe=be+1;fe<$;fe++)ce[fe]=0;for(_e=be+1;_e<J;_e++)for(fe=be+1;fe<$;fe++)ce[fe]+=ue[_e]*le[fe][_e];for(_e=be+1;_e<J;_e++)for(xe=-ue[_e]/ue[be+1],fe=be+1;fe<$;fe++)le[fe][_e]+=xe*ce[fe]}if(ae)for(fe=be+1;fe<J;fe++)he[fe][be]=ue[fe]}}if(ye=Math.min(J,$+1),ge<J&&(se[ge]=le[ge][ge]),$<ye&&(se[ye-1]=0),pe+1<ye&&(ue[pe]=le[pe][ye-1]),ue[ye-1]=0,te){for(_e=ge;_e<ee;_e++){for(fe=0;fe<$;fe++)de[fe][_e]=0;de[_e][_e]=1}for(be=ge-1;0<=be;be--)if(0!==se[be]){for(_e=be+1;_e<ee;_e++){for(xe=0,fe=be;fe<$;fe++)xe+=de[fe][be]*de[fe][_e];for(xe=-xe/de[be][be],fe=be;fe<$;fe++)de[fe][_e]+=xe*de[fe][be]}for(fe=be;fe<$;fe++)de[fe][be]=-de[fe][be];for(de[be][be]=1+de[be][be],fe=0;fe<be-1;fe++)de[fe][be]=0}else{for(fe=0;fe<$;fe++)de[fe][be]=0;de[be][be]=1}}if(ae)for(be=J-1;0<=be;be--){if(be<pe&&0!==ue[be])for(_e=be+1;_e<J;_e++){for(xe=0,fe=be+1;fe<J;fe++)xe+=he[fe][be]*he[fe][_e];for(xe=-xe/he[be+1][be],fe=be+1;fe<J;fe++)he[fe][_e]+=xe*he[fe][be]}for(fe=0;fe<J;fe++)he[fe][be]=0;he[be][be]=1}for(var Ee=ye-1,Ve=0,Fe=Math.pow(2,-52);0<ye;){for(be=ye-2;-1<=be&&-1!==be;be--)if(Math.abs(ue[be])<=Fe*(Math.abs(se[be])+Math.abs(se[be+1]))){ue[be]=0;break}if(be===ye-2)Pe=4;else{for(we=ye-1;we>=be&&we!==be;we--)if(xe=(we===ye?0:Math.abs(ue[we]))+(we===be+1?0:Math.abs(ue[we-1])),Math.abs(se[we])<=Fe*xe){se[we]=0;break}we===be?Pe=3:we===ye-1?Pe=1:(Pe=2,be=we)}switch(be++,Pe){case 1:{for(ke=ue[ye-2],ue[ye-2]=0,_e=ye-2;_e>=be;_e--)if(xe=G(se[_e],ke),ve=se[_e]/xe,Me=ke/xe,se[_e]=xe,_e!==be&&(ke=-Me*ue[_e-1],ue[_e-1]=ve*ue[_e-1]),ae)for(fe=0;fe<J;fe++)xe=ve*he[fe][_e]+Me*he[fe][ye-1],he[fe][ye-1]=-Me*he[fe][_e]+ve*he[fe][ye-1],he[fe][_e]=xe;break}case 2:{for(ke=ue[be-1],ue[be-1]=0,_e=be;_e<ye;_e++)if(xe=G(se[_e],ke),ve=se[_e]/xe,Me=ke/xe,se[_e]=xe,ke=-Me*ue[_e],ue[_e]=ve*ue[_e],te)for(fe=0;fe<$;fe++)xe=ve*de[fe][_e]+Me*de[fe][be-1],de[fe][be-1]=-Me*de[fe][_e]+ve*de[fe][be-1],de[fe][_e]=xe;break}case 3:{for(Ie=Math.max(Math.max(Math.max(Math.max(Math.abs(se[ye-1]),Math.abs(se[ye-2])),Math.abs(ue[ye-2])),Math.abs(se[be])),Math.abs(ue[be])),De=se[ye-1]/Ie,Se=se[ye-2]/Ie,Ce=ue[ye-2]/Ie,Ae=se[be]/Ie,Be=ue[be]/Ie,Re=((Se+De)*(Se-De)+Ce*Ce)/2,Te=De*Ce*(De*Ce),ze=0,(0!==Re||0!==Te)&&(ze=Math.sqrt(Re*Re+Te),0>Re&&(ze=-ze),ze=Te/(Re+ze)),ke=(Ae+De)*(Ae-De)+ze,Le=Ae*Be,_e=be;_e<ye-1;_e++){if(xe=G(ke,Le),ve=ke/xe,Me=Le/xe,_e!==be&&(ue[_e-1]=xe),ke=ve*se[_e]+Me*ue[_e],ue[_e]=ve*ue[_e]-Me*se[_e],Le=Me*se[_e+1],se[_e+1]=ve*se[_e+1],ae)for(fe=0;fe<J;fe++)xe=ve*he[fe][_e]+Me*he[fe][_e+1],he[fe][_e+1]=-Me*he[fe][_e]+ve*he[fe][_e+1],he[fe][_e]=xe;if(xe=G(ke,Le),ve=ke/xe,Me=Le/xe,se[_e]=xe,ke=ve*ue[_e]+Me*se[_e+1],se[_e+1]=-Me*ue[_e]+ve*se[_e+1],Le=Me*ue[_e+1],ue[_e+1]=ve*ue[_e+1],te&&_e<$-1)for(fe=0;fe<$;fe++)xe=ve*de[fe][_e]+Me*de[fe][_e+1],de[fe][_e+1]=-Me*de[fe][_e]+ve*de[fe][_e+1],de[fe][_e]=xe}ue[ye-2]=ke,Ve=Ve+1;break}case 4:{if(0>=se[be]&&(se[be]=0>se[be]?-se[be]:0,ae))for(fe=0;fe<=Ee;fe++)he[fe][be]=-he[fe][be];for(;be<Ee&&!(se[be]>=se[be+1]);){if(xe=se[be],se[be]=se[be+1],se[be+1]=xe,ae&&be<J-1)for(fe=0;fe<J;fe++)xe=he[fe][be+1],he[fe][be+1]=he[fe][be],he[fe][be]=xe;if(te&&be<$-1)for(fe=0;fe<$;fe++)xe=de[fe][be+1],de[fe][be+1]=de[fe][be],de[fe][be]=xe;be++}Ve=0,ye--;break}}}if(ne){var Ye=he;he=de,de=Ye}this.m=$,this.n=J,this.s=se,this.U=de,this.V=he}var L=I("../matrix").Matrix,E=I("./util"),G=E.hypotenuse,W=E.getFilled2DArray;T.prototype={get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){var Z=Math.pow(2,-52),Q=Math.max(this.m,this.n)*this.s[0]*Z,$=0,J=this.s;for(var ee=0,te=J.length;ee<te;ee++)J[ee]>Q&&$++;return $},get diagonal(){return this.s},get threshold(){return Math.pow(2,-52)/2*Math.max(this.m,this.n)*this.s[0]},get leftSingularVectors(){return L.isMatrix(this.U)||(this.U=new L(this.U)),this.U},get rightSingularVectors(){return L.isMatrix(this.V)||(this.V=new L(this.V)),this.V},get diagonalMatrix(){return L.diag(this.s)},solve:function(Q){var $=this.threshold,J=this.s.length,ee=L.zeros(J,J),te;for(te=0;te<J;te++)ee[te][te]=Math.abs(this.s[te])<=$?0:1/this.s[te];var ae=this.U,ie=this.rightSingularVectors,ne=ie.mmul(ee),le=ie.rows,oe=ae.length,se=L.zeros(le,oe),de,he,ue;for(te=0;te<le;te++)for(de=0;de<oe;de++){for(ue=0,he=0;he<J;he++)ue+=ne[te][he]*ae[de][he];se[te][de]=ue}return se.mmul(Q)},solveForDiagonal:function(Q){return this.solve(L.diag(Q))},inverse:function(){var Q=this.V,$=this.threshold,J=Q.length,ee=Q[0].length,te=new L(J,this.s.length),ae,ie;for(ae=0;ae<J;ae++)for(ie=0;ie<ee;ie++)te[ae][ie]=Math.abs(this.s[ie])>$?Q[ae][ie]/this.s[ie]:0;var ne=this.U,le=ne.length,oe=ne[0].length,se=new L(J,le),de,he;for(ae=0;ae<J;ae++)for(ie=0;ie<le;ie++){for(he=0,de=0;de<oe;de++)he+=te[ae][de]*ne[ie][de];se[ae][ie]=he}return se}},R.exports=T},{"../matrix":92,"./util":89}],89:[function(I,R,T){"use strict";T.hypotenuse=function(E,G){var W;return Math.abs(E)>Math.abs(G)?(W=G/E,Math.abs(E)*Math.sqrt(1+W*W)):0===G?0:(W=E/G,Math.abs(G)*Math.sqrt(1+W*W))},T.getEmpty2DArray=function(L,E){var G=Array(L);for(var W=0;W<L;W++)G[W]=Array(E);return G},T.getFilled2DArray=function(L,E,G){var W=Array(L);for(var Z=0;Z<L;Z++){W[Z]=Array(E);for(var Q=0;Q<E;Q++)W[Z][Q]=G}return W}},{}],90:[function(I,R){"use strict";function T(J){return J=E.checkMatrix(J),L(J,E.eye(J.rows))}function L(J,ee){return J=E.checkMatrix(J),ee=E.checkMatrix(ee),J.isSquare()?new Z(J).solve(ee):new Q(J).solve(ee)}var E=I("./matrix").Matrix,G=I("./dc/svd"),W=I("./dc/evd"),Z=I("./dc/lu"),Q=I("./dc/qr"),$=I("./dc/cholesky");E.inverse=E.inv=T,E.prototype.inverse=E.prototype.inv=function(){return T(this)},E.solve=L,E.prototype.solve=function(J){return L(this,J)},R.exports={SingularValueDecomposition:G,SVD:G,EigenvalueDecomposition:W,EVD:W,LuDecomposition:Z,LU:Z,QrDecomposition:Q,QR:Q,CholeskyDecomposition:$,CHO:$,inverse:T,solve:L}},{"./dc/cholesky":84,"./dc/evd":85,"./dc/lu":86,"./dc/qr":87,"./dc/svd":88,"./matrix":92}],91:[function(I,R){"use strict";R.exports=I("./matrix").Matrix,R.exports.Decompositions=R.exports.DC=I("./decompositions")},{"./decompositions":90,"./matrix":92}],92:[function(I,R,T){"use strict";I("./symbol-species");var L=I("./abstractMatrix"),E=I("./util");class G extends L(Array){constructor(W,Z){var Q;if(1===arguments.length&&"number"==typeof W)return Array(W);if(G.isMatrix(W))return W.clone();if(Number.isInteger(W)&&0<W){if(super(W),Number.isInteger(Z)&&0<Z)for(Q=0;Q<W;Q++)this[Q]=Array(Z);else throw new TypeError("nColumns must be a positive integer");}else if(Array.isArray(W)){var $=W;if(W=$.length,Z=$[0].length,"number"!=typeof Z||0===Z)throw new TypeError("Data must be a 2D array with at least one element");for(super(W),Q=0;Q<W;Q++){if($[Q].length!==Z)throw new RangeError("Inconsistent array dimensions");this[Q]=[].concat($[Q])}}else throw new TypeError("First argument must be a positive number or an array");return this.rows=W,this.columns=Z,this}set(W,Z,Q){return this[W][Z]=Q,this}get(W,Z){return this[W][Z]}clone(){var W=new this.constructor[Symbol.species](this.rows,this.columns);for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)W.set(Z,Q,this.get(Z,Q));return W}removeRow(W){if(E.checkRowIndex(this,W),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(W,1),this.rows-=1,this}addRow(W,Z){return void 0===Z&&(Z=W,W=this.rows),E.checkRowIndex(this,W,!0),Z=E.checkRowVector(this,Z,!0),this.splice(W,0,Z),this.rows+=1,this}removeColumn(W){if(E.checkColumnIndex(this,W),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var Z=0;Z<this.rows;Z++)this[Z].splice(W,1);return this.columns-=1,this}addColumn(W,Z){"undefined"==typeof Z&&(Z=W,W=this.columns),E.checkColumnIndex(this,W,!0),Z=E.checkColumnVector(this,Z);for(var Q=0;Q<this.rows;Q++)this[Q].splice(W,0,Z[Q]);return this.columns+=1,this}}T.Matrix=G,G.abstractMatrix=L},{"./abstractMatrix":83,"./symbol-species":93,"./util":94}],93:[function(){"use strict";Symbol.species||(Symbol.species=Symbol.for("@@species"))},{}],94:[function(I,R,T){"use strict";var L=I("./matrix");T.checkRowIndex=function(G,W,Z){var Q=Z?G.rows:G.rows-1;if(0>W||W>Q)throw new RangeError("Row index out of range")},T.checkColumnIndex=function(G,W,Z){var Q=Z?G.columns:G.columns-1;if(0>W||W>Q)throw new RangeError("Column index out of range")},T.checkRowVector=function(G,W){if(W.to1DArray&&(W=W.to1DArray()),W.length!==G.columns)throw new RangeError("vector size must be the same as the number of columns");return W},T.checkColumnVector=function(G,W){if(W.to1DArray&&(W=W.to1DArray()),W.length!==G.rows)throw new RangeError("vector size must be the same as the number of rows");return W},T.checkIndices=function(G,W,Z){var Q=W.some(J=>{return 0>J||J>=G.rows}),$=Z.some(J=>{return 0>J||J>=G.columns});if(Q||$)throw new RangeError("Indices are out of range");if("object"!=typeof W||"object"!=typeof Z)throw new TypeError("Unexpected type for row/column indices");return Array.isArray(W)||(W=Array.from(W)),Array.isArray(Z)||(W=Array.from(Z)),{row:W,column:Z}},T.checkRange=function(G,W,Z,Q,$){if(5!==arguments.length)throw new TypeError("Invalid argument type");var J=Array.from(arguments).slice(1).some(function(ee){return"number"!=typeof ee});if(J)throw new TypeError("Invalid argument type");if(W>Z||Q>$||0>W||W>=G.rows||0>Z||Z>=G.rows||0>Q||Q>=G.columns||0>$||$>=G.columns)throw new RangeError("Submatrix indices are out of range")},T.getRange=function(G,W){var Z=Array(W-G+1);for(var Q=0;Q<Z.length;Q++)Z[Q]=G+Q;return Z},T.sumByRow=function(G){var W=L.Matrix.zeros(G.rows,1);for(var Z=0;Z<G.rows;++Z)for(var Q=0;Q<G.columns;++Q)W.set(Z,0,W.get(Z,0)+G.get(Z,Q));return W},T.sumByColumn=function(G){var W=L.Matrix.zeros(1,G.columns);for(var Z=0;Z<G.rows;++Z)for(var Q=0;Q<G.columns;++Q)W.set(0,Q,W.get(0,Q)+G.get(Z,Q));return W},T.sumAll=function(G){var W=0;for(var Z=0;Z<G.rows;Z++)for(var Q=0;Q<G.columns;Q++)W+=G.get(Z,Q);return W}},{"./matrix":92}],95:[function(I,R){"use strict";var T=I("../abstractMatrix"),L=I("../matrix");class E extends T(){constructor(G,W,Z){super(),this.matrix=G,this.rows=W,this.columns=Z}static get[Symbol.species](){return L.Matrix}}R.exports=E},{"../abstractMatrix":83,"../matrix":92}],96:[function(I,R){"use strict";var T=I("./base");R.exports=class extends T{constructor(E,G){super(E,E.rows,1),this.column=G}set(E,G,W){return this.matrix.set(E,this.column,W),this}get(E){return this.matrix.get(E,this.column)}}},{"./base":95}],97:[function(I,R){"use strict";var T=I("./base");R.exports=class extends T{constructor(E){super(E,E.rows,E.columns)}set(E,G,W){return this.matrix.set(E,this.columns-G-1,W),this}get(E,G){return this.matrix.get(E,this.columns-G-1)}}},{"./base":95}],98:[function(I,R){"use strict";var T=I("./base");R.exports=class extends T{constructor(E){super(E,E.rows,E.columns)}set(E,G,W){return this.matrix.set(this.rows-E-1,G,W),this}get(E,G){return this.matrix.get(this.rows-E-1,G)}}},{"./base":95}],99:[function(I,R){"use strict";var T=I("./base");R.exports=class extends T{constructor(E,G){super(E,1,E.columns),this.row=G}set(E,G,W){return this.matrix.set(this.row,G,W),this}get(E,G){return this.matrix.get(this.row,G)}}},{"./base":95}],100:[function(I,R){"use strict";var T=I("./base"),L=I("../util");R.exports=class extends T{constructor(G,W,Z){var Q=L.checkIndices(G,W,Z);super(G,Q.row.length,Q.column.length),this.rowIndices=Q.row,this.columnIndices=Q.column}set(G,W,Z){return this.matrix.set(this.rowIndices[G],this.columnIndices[W],Z),this}get(G,W){return this.matrix.get(this.rowIndices[G],this.columnIndices[W])}}},{"../util":94,"./base":95}],101:[function(I,R){"use strict";var T=I("./base"),L=I("../util");R.exports=class extends T{constructor(G,W,Z,Q,$){L.checkRange(G,W,Z,Q,$),super(G,Z-W+1,$-Q+1),this.startRow=W,this.startColumn=Q}set(G,W,Z){return this.matrix.set(this.startRow+G,this.startColumn+W,Z),this}get(G,W){return this.matrix.get(this.startRow+G,this.startColumn+W)}}},{"../util":94,"./base":95}],102:[function(I,R){"use strict";var T=I("./base");R.exports=class extends T{constructor(E){super(E,E.columns,E.rows)}set(E,G,W){return this.matrix.set(G,E,W),this}get(E,G){return this.matrix.get(G,E)}}},{"./base":95}],103:[function(I,R,T){"use strict";T.SimpleLinearRegression=T.SLR=I("./regression/simple-linear-regression"),T.NonLinearRegression=T.NLR={PolynomialRegression:I("./regression/polynomial-regression"),PotentialRegression:I("./regression/potential-regression"),ExpRegression:I("./regression/exp-regression"),PowerRegression:I("./regression/power-regression")},T.KernelRidgeRegression=T.KRR=I("./regression/kernel-ridge-regression"),T.PolinomialFitting2D=I("./regression/poly-fit-regression2d"),T.TheilSenRegression=I("./regression/theil-sen-regression")},{"./regression/exp-regression":105,"./regression/kernel-ridge-regression":106,"./regression/poly-fit-regression2d":107,"./regression/polynomial-regression":108,"./regression/potential-regression":109,"./regression/power-regression":110,"./regression/simple-linear-regression":111,"./regression/theil-sen-regression":112}],104:[function(I,R){"use strict";R.exports=class{predict(L){var E;if(Array.isArray(L)){E=Array(L.length);for(var G=0;G<L.length;G++)E[G]=this._predict(L[G])}else if(Number.isFinite(L))E=this._predict(L);else throw new TypeError("x must be a number or array");return E}_predict(){throw new Error("_compute not implemented")}train(){}toString(){return""}toLaTeX(){return""}modelQuality(L,E){var G=L.length,W=Array(G);for(var Z=0;Z<G;Z++)W[Z]=this._predict(L[Z]);var Q=0,$=0,J=0,ee=0,te=0,ae=0,ie=0;for(var ne=0;ne<G;ne++)Q+=W[ne],$+=E[ne],te+=W[ne]*W[ne],ae+=E[ne]*E[ne],ie+=W[ne]*E[ne],0!==E[ne]&&(J+=(E[ne]-W[ne])*(E[ne]-W[ne])/E[ne]),ee=(E[ne]-W[ne])*(E[ne]-W[ne]);var le=(G*ie-Q*$)/Math.sqrt((G*te-Q*Q)*(G*ae-$*$));return{r:le,r2:le*le,chi2:J,rmsd:ee*ee/G}}}},{}],105:[function(I,R){"use strict";var T=I("./util").maybeToPrecision,L=I("./simple-linear-regression"),E=I("./base-regression");class G extends E{constructor(W,Z,Q){if(super(),!0===W)this.A=Z.A,this.C=Z.C,Z.quality&&(this.quality=Z.quality);else{var $=W.length;if($!==Z.length)throw new RangeError("input and output array have a different length");var J=Array($);for(var ee=0;ee<$;ee++)J[ee]=Math.log(Z[ee]);var te=new L(W,J,{computeCoefficient:!1});this.A=te.slope,this.C=Math.exp(te.intercept),(Q||{}).computeQuality&&(this.quality=this.modelQuality(W,Z))}}_predict(W){return this.C*Math.exp(W*this.A)}toJSON(){var W={name:"expRegression",A:this.A,C:this.C};return this.quality&&(W.quality=this.quality),W}toString(W){return"f(x) = "+T(this.C,W)+" * exp("+T(this.A,W)+" * x)"}toLaTeX(W){return 0<=this.A?"f(x) = "+T(this.C,W)+"e^{"+T(this.A,W)+"x}":"f(x) = \\frac{"+T(this.C,W)+"}{e^{"+T(-this.A,W)+"x}}"}static load(W){if("expRegression"!==W.name)throw new TypeError("not a exp regression model");return new G(!0,W)}}R.exports=G},{"./base-regression":104,"./simple-linear-regression":111,"./util":113}],106:[function(I,R){"use strict";var T=I("ml-matrix"),L=I("ml-kernel"),E=I("./base-regression"),G={lambda:0.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1};class W extends E{constructor(Z,Q,$){if(super(),!0===Z)this.alpha=Q.alpha,this.inputs=Q.inputs,this.kernelType=Q.kernelType,this.kernelOptions=Q.kernelOptions,this.kernel=new L(Q.kernelType,Q.kernelOptions),Q.quality&&(this.quality=Q.quality);else{$=Object.assign({},G,$);var J=new L($.kernelType,$.kernelOptions),ee=J.compute(Z),te=Z.length;ee.add(T.eye(te,te).mul($.lambda)),this.alpha=ee.solve(Q),this.inputs=Z,this.kernelType=$.kernelType,this.kernelOptions=$.kernelOptions,this.kernel=J,$.computeQuality&&(this.quality=this.modelQuality(Z,Q))}}_predict(Z){return this.kernel.compute([Z],this.inputs).mmul(this.alpha)[0]}toJSON(){var Z={name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions};return this.quality&&(Z.quality=this.quality),Z}static load(Z){if("kernelRidgeRegression"!==Z.name)throw new TypeError("not a KRR model");return new W(!0,Z)}}R.exports=W},{"./base-regression":104,"ml-kernel":74,"ml-matrix":91}],107:[function(I,R){"use strict";function T($,J){var ee=$.clone();for(var te=0;te<$.rows;++te)ee[te][0]=Math.pow(ee[te][0],J);return ee}function L($,J){this[$][J]=Math.abs(this[$][J])}var E=I("ml-matrix"),G=E.DC.SingularValueDecomposition,W=I("./base-regression"),Z={order:2};class Q extends W{constructor($,J,ee){super(),!0===$?(this.coefficients=E.columnVector(J.coefficients),this.order=J.order,J.r&&(this.r=J.r,this.r2=J.r2),J.chi2&&(this.chi2=J.chi2)):(ee=Object.assign({},Z,ee),this.order=ee.order,this.coefficients=[],this.X=$,this.y=J,this.train(this.X,this.y,ee),ee.computeQuality&&(this.quality=this.modelQuality($,J)))}train($,J){if(E.isMatrix($)||($=new E($)),E.isMatrix(J)||(J=E.columnVector(J)),J.rows!==$.rows&&(J=J.transpose()),2!==$.columns)throw new RangeError("You give X with "+$.columns+" columns and it must be 2");if($.rows!==J.rows)throw new RangeError("X and y must have the same rows");var ee=$.rows,te=(this.order+2)*(this.order+1)/2;this.coefficients=Array(te);var ae=$.getColumnVector(0),ie=$.getColumnVector(1),ne=1/ae.clone().apply(L).max(),le=1/ie.clone().apply(L).max(),oe=1/J.clone().apply(L).max();ae.mulColumn(0,ne),ie.mulColumn(0,le),J.mulColumn(0,oe);var se=new E(ee,te),de=0;for(var he=0;he<=this.order;++he){var ue=this.order-he;for(var ce=0;ce<=ue;++ce){var ge=T(ae,he).mulColumnVector(T(ie,ce));se.setColumn(de,ge),de++}}var pe=new G(se.transpose(),{computeLeftSingularVectors:!0,computeRightSingularVectors:!0,autoTranspose:!1}),fe=E.rowVector(pe.diagonal);fe=fe.apply(function(xe,we){this[xe][we]=1e-15<=this[xe][we]?1/this[xe][we]:0});var _e=E.zeros(ee,te);for(he=0;he<te;++he)_e[he][he]=fe[0][he];fe=_e;var be=pe.rightSingularVectors,ye=pe.leftSingularVectors;for(this.coefficients=ye.mmul(fe.transpose()).mmul(be.transpose()).mmul(J),de=0,he=0;he<=te;++he)for(ue=this.order-he,ce=0;ce<=ue;++ce)this.coefficients[de][0]=this.coefficients[de][0]*Math.pow(ne,he)*Math.pow(le,ce)/oe,de++}_predict($){var J=$[0],ee=$[1],te=0,ae=0;for(var ie=0;ie<=this.order;ie++)for(var ne=0;ne<=this.order-ie;ne++)te+=Math.pow(J,ie)*Math.pow(ee,ne)*this.coefficients[ae][0],ae++;return te}toJSON(){var $={name:"polyfit2D",order:this.order,coefficients:this.coefficients};return this.quality&&($.quality=this.quality),$}static load($){if("polyfit2D"!==$.name)throw new TypeError("not a polyfit2D model");return new Q(!0,$)}}R.exports=Q},{"./base-regression":104,"ml-matrix":91}],108:[function(I,R){"use strict";var T=I("./util").maybeToPrecision,L=I("./base-regression"),E=I("ml-matrix");class G extends L{constructor(W,Z,Q,$){if(super(),!0===W)this.coefficients=Z.coefficients,this.powers=Z.powers,this.M=Z.M,Z.quality&&(this.quality=Z.quality);else{var J=W.length;if(J!==Z.length)throw new RangeError("input and output array have a different length");var ee=void 0;if(Array.isArray(Q))ee=Q,Q=ee.length;else for(Q++,ee=Array(Q),ie=0;ie<Q;ie++)ee[ie]=ie;var te=new E(J,Q),ae=new E([Z]),ie,ne;for(ie=0;ie<Q;ie++)for(ne=0;ne<J;ne++)te[ne][ie]=0===ee[ie]?1:Math.pow(W[ne],ee[ie]);var le=te.transposeView(),oe=le.mmul(te),se=le.mmul(ae.transposeView());this.coefficients=oe.solve(se).to1DArray(),this.powers=ee,this.M=Q-1,($||{}).computeQuality&&(this.quality=this.modelQuality(W,Z))}}_predict(W){var Z=0;for(var Q=0;Q<this.powers.length;Q++)Z+=this.coefficients[Q]*Math.pow(W,this.powers[Q]);return Z}toJSON(){var W={name:"polynomialRegression",coefficients:this.coefficients,powers:this.powers,M:this.M};return this.quality&&(W.quality=this.quality),W}toString(W){return this._toFormula(W,!1)}toLaTeX(W){return this._toFormula(W,!0)}_toFormula(W,Z){var Q="^",$="",J=" * ";Z&&(Q="^{",$="}",J="");var ee="",te;for(var ae=0;ae<this.coefficients.length;ae++)te="",0!==this.coefficients[ae]&&(te=0===this.powers[ae]?T(this.coefficients[ae],W):1===this.powers[ae]?T(this.coefficients[ae],W)+J+"x":T(this.coefficients[ae],W)+J+"x"+Q+this.powers[ae]+$,0<this.coefficients[ae]&&ae!==this.coefficients.length-1?te=" + "+te:ae!==this.coefficients.length-1&&(te=" "+te)),ee=te+ee;return" + "===ee.charAt(0)&&(ee=ee.slice(1)),"f(x) = "+ee}static load(W){if("polynomialRegression"!==W.name)throw new TypeError("not a polynomial regression model");return new G(!0,W)}}R.exports=G},{"./base-regression":104,"./util":113,"ml-matrix":91}],109:[function(I,R){"use strict";var T=I("./util").maybeToPrecision,L=I("./polynomial-regression"),E=I("./base-regression");class G extends E{constructor(W,Z,Q,$){if(super(),!0===W)this.A=Z.A,this.M=Z.M,Z.quality&&(this.quality=Z.quality);else{var J=W.length;if(J!==Z.length)throw new RangeError("input and output array have a different length");var ee=new L(W,Z,[Q],{computeCoefficient:!0});this.A=ee.coefficients[0],this.M=Q,($||{}).computeQuality&&(this.quality=this.modelQuality(W,Z))}}_predict(W){return this.A*Math.pow(W,this.M)}toJSON(){var W={name:"potentialRegression",A:this.A,M:this.M};return this.quality&&(W.quality=this.quality),W}toString(W){return"f(x) = "+T(this.A,W)+" * x^"+this.M}toLaTeX(W){return 0<=this.M?"f(x) = "+T(this.A,W)+"x^{"+this.M+"}":"f(x) = \\frac{"+T(this.A,W)+"}{x^{"+-this.M+"}}"}static load(W){if("potentialRegression"!==W.name)throw new TypeError("not a potential regression model");return new G(!0,W)}}R.exports=G},{"./base-regression":104,"./polynomial-regression":108,"./util":113}],110:[function(I,R){"use strict";var T=I("./util").maybeToPrecision,L=I("./simple-linear-regression"),E=I("./base-regression");class G extends E{constructor(W,Z,Q){if(super(),!0===W)this.A=Z.A,this.B=Z.B,this.quality=Z.quality||{},Z.quality.r&&(this.quality.r=Z.quality.r,this.quality.r2=Z.quality.r2),Z.quality.chi2&&(this.quality.chi2=Z.quality.chi2);else{var $=W.length;if($!==Z.length)throw new RangeError("input and output array have a different length");var J=Array($),ee=Array($);for(var te=0;te<$;te++)J[te]=Math.log(W[te]),ee[te]=Math.log(Z[te]);var ae=new L(J,ee,{computeCoefficient:!1});this.A=Math.exp(ae.intercept),this.B=ae.slope,(Q||{}).computeQuality&&(this.quality=this.modelQuality(W,Z))}}_predict(W){return this.A*Math.pow(W,this.B)}toJSON(){var W={name:"powerRegression",A:this.A,B:this.B};return this.quality&&(W.quality=this.quality),W}toString(W){return"f(x) = "+T(this.A,W)+" * x^"+T(this.B,W)}toLaTeX(W){return 0<=this.B?"f(x) = "+T(this.A,W)+"x^{"+T(this.B,W)+"}":"f(x) = \\frac{"+T(this.A,W)+"}{x^{"+T(-this.B,W)+"}}"}static load(W){if("powerRegression"!==W.name)throw new TypeError("not a power regression model");return new G(!0,W)}}R.exports=G},{"./base-regression":104,"./simple-linear-regression":111,"./util":113}],111:[function(I,R){"use strict";var T=I("./util").maybeToPrecision,L=I("./base-regression");class E extends L{constructor(G,W,Z){if(Z=Z||{},super(),!0===G)this.slope=W.slope,this.intercept=W.intercept,this.quality=W.quality||{},W.quality.r&&(this.quality.r=W.quality.r,this.quality.r2=W.quality.r2),W.quality.chi2&&(this.quality.chi2=W.quality.chi2);else{var Q=G.length;if(Q!==W.length)throw new RangeError("input and output array have a different length");var $=0,J=0,ee=0,te=0;for(var ae=0;ae<Q;ae++)$+=G[ae],J+=W[ae],ee+=G[ae]*G[ae],te+=G[ae]*W[ae];var ie=Q*te-$*J;this.slope=ie/(Q*ee-$*$),this.intercept=1/Q*J-this.slope*(1/Q)*$,this.coefficients=[this.intercept,this.slope],Z.computeQuality&&(this.quality=this.modelQuality(G,W))}}toJSON(){var G={name:"simpleLinearRegression",slope:this.slope,intercept:this.intercept};return this.quality&&(G.quality=this.quality),G}_predict(G){return this.slope*G+this.intercept}computeX(G){return(G-this.intercept)/this.slope}toString(G){var W="f(x) = ";if(this.slope){var Z=T(this.slope,G);if(W+=(1e-5>Math.abs(Z-1)?"":Z+" * ")+"x",this.intercept){var Q=Math.abs(this.intercept),$=Q===this.intercept?"+":"-";W+=" "+$+" "+T(Q,G)}}else W+=T(this.intercept,G);return W}toLaTeX(G){return this.toString(G)}static load(G){if("simpleLinearRegression"!==G.name)throw new TypeError("not a SLR model");return new E(!0,G)}}R.exports=E},{"./base-regression":104,"./util":113}],112:[function(I,R){"use strict";var T=I("./base-regression"),L=I("./util").maybeToPrecision,E=I("ml-stat/array").median;class G extends T{constructor(W,Z,Q){if(Q=Q||{},super(),!0===W)this.slope=Z.slope,this.intercept=Z.intercept,this.quality=Object.assign({},Z.quality,this.quality);else{var $=W.length;if($!==Z.length)throw new RangeError("Input and output array have a different length");var J=Array($*$),ee=0;for(var te=0;te<$;++te)for(var ae=te+1;ae<$;++ae)W[te]!==W[ae]&&(J[ee++]=(Z[ae]-Z[te])/(W[ae]-W[te]));J.length=ee;var ie=E(J),ne=Array($);for(var le=0;le<$;++le)ne[le]=Z[le]-ie*W[le];this.slope=ie,this.intercept=E(ne),this.coefficients=[this.intercept,this.slope],Q.computeQuality&&(this.quality=this.modelQuality(W,Z))}}toJSON(){var W={name:"TheilSenRegression",slope:this.slope,intercept:this.intercept};return this.quality&&(W.quality=this.quality),W}_predict(W){return this.slope*W+this.intercept}computeX(W){return(W-this.intercept)/this.slope}toString(W){var Z="f(x) = ";if(this.slope){var Q=L(this.slope,W);if(Z+=(1e-5>Math.abs(Q-1)?"":Q+" * ")+"x",this.intercept){var $=Math.abs(this.intercept),J=$===this.intercept?"+":"-";Z+=" "+J+" "+L($,W)}}else Z+=L(this.intercept,W);return Z}toLaTeX(W){return this.toString(W)}static load(W){if("TheilSenRegression"!==W.name)throw new TypeError("not a Theil-Sen model");return new G(!0,W)}}R.exports=G},{"./base-regression":104,"./util":113,"ml-stat/array":114}],113:[function(I,R,T){"use strict";T.maybeToPrecision=function(E,G){return 0>E?(E=-1*E,G)?"- "+E.toPrecision(G):"- "+E.toString():G?E.toPrecision(G):E.toString()}},{}],114:[function(I,R,T){"use strict";function L(E,G){return E-G}T.sum=function(G){var E=0;for(var W=0;W<G.length;W++)E+=G[W];return E},T.max=function(G){var E=G[0],W=G.length;for(var Z=1;Z<W;Z++)G[Z]>E&&(E=G[Z]);return E},T.min=function(G){var E=G[0],W=G.length;for(var Z=1;Z<W;Z++)G[Z]<E&&(E=G[Z]);return E},T.minMax=function(G){var W=G[0],Z=G[0],Q=G.length;for(var $=1;$<Q;$++)G[$]<W&&(W=G[$]),G[$]>Z&&(Z=G[$]);return{min:W,max:Z}},T.arithmeticMean=function(G){var W=0,Z=G.length;for(var Q=0;Q<Z;Q++)W+=G[Q];return W/Z},T.mean=T.arithmeticMean,T.geometricMean=function(G){var W=1,Z=G.length;for(var Q=0;Q<Z;Q++)W*=G[Q];return Math.pow(W,1/Z)},T.logMean=function(G){var W=0,Z=G.length;for(var Q=0;Q<Z;Q++)W+=Math.log(G[Q]);return W/Z},T.grandMean=function(G,W){var Z=0,Q=0,$=G.length;for(var J=0;J<$;J++)Z+=W[J]*G[J],Q+=W[J];return Z/Q},T.truncatedMean=function(G,W,Z){Z===void 0&&(Z=!1),Z||(G=[].concat(G).sort(L));var Q=G.length,$=Math.floor(Q*W),J=0;for(var ee=$;ee<Q-$;ee++)J+=G[ee];return J/(Q-2*$)},T.harmonicMean=function(G){var W=0,Z=G.length;for(var Q=0;Q<Z;Q++){if(0===G[Q])throw new RangeError("value at index "+Q+"is zero");W+=1/G[Q]}return Z/W},T.contraHarmonicMean=function(G){var W=0,Z=0,Q=G.length;for(var $=0;$<Q;$++)W+=G[$]*G[$],Z+=G[$];if(0>Z)throw new RangeError("sum of values is negative");return W/Z},T.median=function(G,W){W===void 0&&(W=!1),W||(G=[].concat(G).sort(L));var Z=G.length,Q=Math.floor(Z/2);return 0==Z%2?0.5*(G[Q-1]+G[Q]):G[Q]},T.variance=function(G,W){W===void 0&&(W=!0);var Z=T.mean(G),Q=0,$=G.length;for(var J=0;J<$;J++){var ee=G[J]-Z;Q+=ee*ee}return W?Q/($-1):Q/$},T.standardDeviation=function(G,W){return Math.sqrt(T.variance(G,W))},T.standardError=function(G){return T.standardDeviation(G)/Math.sqrt(G.length)},T.robustMeanAndStdev=function(G){var W=0,Z=0,Q=G.length,$=0;for($=0;$<Q;$++)W+=G[$];W/=Q;var J=Array(Q);for($=0;$<Q;$++)J[$]=Math.abs(G[$]-W);return J.sort(L),Z=1==Q%2?J[(Q-1)/2]/0.6745:0.5*(J[Q/2]+J[Q/2-1])/0.6745,{mean:W,stdev:Z}},T.quartiles=function(G,W){"undefined"==typeof W&&(W=!1),W||(G=[].concat(G).sort(L));var Z=G.length/4,Q=G[Math.ceil(Z)-1],$=T.median(G,!0),J=G[Math.ceil(3*Z)-1];return{q1:Q,q2:$,q3:J}},T.pooledStandardDeviation=function(G,W){return Math.sqrt(T.pooledVariance(G,W))},T.pooledVariance=function(G,W){"undefined"==typeof W&&(W=!0);var Z=0,Q=0,$=G.length;for(var J=0;J<$;J++){var ee=G[J],te=T.variance(ee);Z+=(ee.length-1)*te,Q+=W?ee.length-1:ee.length}return Z/Q},T.mode=function(G){var W=G.length,Z=Array(W),Q;for(Q=0;Q<W;Q++)Z[Q]=0;var $=Array(W),J=0;for(Q=0;Q<W;Q++){var ee=$.indexOf(G[Q]);0<=ee?Z[ee]++:($[J]=G[Q],Z[J]=1,J++)}var te=0,ae=0;for(Q=0;Q<J;Q++)Z[Q]>te&&(te=Z[Q],ae=Q);return $[ae]},T.covariance=function(G,W,Z){"undefined"==typeof Z&&(Z=!0);var Q=T.mean(G),$=T.mean(W);if(G.length!==W.length)throw"Vectors do not have the same dimensions";var J=0,ee=G.length;for(var te=0;te<ee;te++){var ae=G[te]-Q,ie=W[te]-$;J+=ae*ie}return Z?J/(ee-1):J/ee},T.skewness=function(G,W){"undefined"==typeof W&&(W=!0);var Z=T.mean(G),Q=0,$=0,J=G.length;for(var ee=0;ee<J;ee++){var te=G[ee]-Z;Q+=te*te,$+=te*te*te}var ae=Q/J,ie=$/J,ne=ie/Math.pow(ae,3/2);if(W){var le=Math.sqrt(J*(J-1));return le/(J-2)*ne}return ne},T.kurtosis=function(G,W){"undefined"==typeof W&&(W=!0);var Z=T.mean(G),Q=G.length,$=0,J=0;for(var ee=0;ee<Q;ee++){var te=G[ee]-Z;$+=te*te,J+=te*te*te*te}var ae=$/Q,ie=J/Q;if(W){var ne=$/(Q-1),le=J/(ne*ne);return Q*(Q+1)/((Q-1)*(Q-2)*(Q-3))*le-3*((Q-1)*(Q-1)/((Q-2)*(Q-3)))}return ie/(ae*ae)-3},T.entropy=function(G,W){"undefined"==typeof W&&(W=0);var Z=0,Q=G.length;for(var $=0;$<Q;$++)Z+=G[$]*Math.log(G[$]+W);return-Z},T.weightedMean=function(G,W){var Z=0,Q=G.length;for(var $=0;$<Q;$++)Z+=G[$]*W[$];return Z},T.weightedStandardDeviation=function(G,W){return Math.sqrt(T.weightedVariance(G,W))},T.weightedVariance=function(G,W){var Z=T.weightedMean(G,W),Q=0,$=G.length,J=0,ee=0;for(var te=0;te<$;te++){var ae=G[te]-Z,ie=W[te];Q+=ie*(ae*ae),ee+=ie,J+=ie*ie}return Q*(ee/(ee*ee-J))},T.center=function(G,W){"undefined"==typeof W&&(W=!1);var Z=G;W||(Z=[].concat(G));var Q=T.mean(Z),$=Z.length;for(var J=0;J<$;J++)Z[J]-=Q},T.standardize=function(G,W,Z){"undefined"==typeof W&&(W=T.standardDeviation(G)),"undefined"==typeof Z&&(Z=!1);var Q=G.length,$=Z?G:Array(Q);for(var J=0;J<Q;J++)$[J]=G[J]/W;return $},T.cumulativeSum=function(G){var W=G.length,Z=Array(W);Z[0]=G[0];for(var Q=1;Q<W;Q++)Z[Q]=Z[Q-1]+G[Q];return Z}},{}],115:[function(I,R,T){"use strict";T.array=I("./array"),T.matrix=I("./matrix")},{"./array":114,"./matrix":116}],116:[function(I,R,T){"use strict";function L(G,W){return G-W}var E=I("./array");T.max=function(W){var G=-(1/0);for(var Z=0;Z<W.length;Z++)for(var Q=0;Q<W[Z].length;Q++)W[Z][Q]>G&&(G=W[Z][Q]);return G},T.min=function(W){var G=1/0;for(var Z=0;Z<W.length;Z++)for(var Q=0;Q<W[Z].length;Q++)W[Z][Q]<G&&(G=W[Z][Q]);return G},T.minMax=function(W){var Z=1/0,Q=-(1/0);for(var $=0;$<W.length;$++)for(var J=0;J<W[$].length;J++)W[$][J]<Z&&(Z=W[$][J]),W[$][J]>Q&&(Q=W[$][J]);return{min:Z,max:Q}},T.entropy=function(W,Z){"undefined"==typeof Z&&(Z=0);var Q=0,$=W.length,J=W[0].length;for(var ee=0;ee<$;ee++)for(var te=0;te<J;te++)Q+=W[ee][te]*Math.log(W[ee][te]+Z);return-Q},T.mean=function(W,Z){"undefined"==typeof Z&&(Z=0);var Q=W.length,$=W[0].length,J,ee,te,ae;if(-1===Z){for(J=[0],ee=Q*$,te=0;te<Q;te++)for(ae=0;ae<$;ae++)J[0]+=W[te][ae];J[0]/=ee}else if(0===Z)for(J=Array($),ee=Q,ae=0;ae<$;ae++){for(J[ae]=0,te=0;te<Q;te++)J[ae]+=W[te][ae];J[ae]/=ee}else if(1===Z)for(J=Array(Q),ee=$,ae=0;ae<Q;ae++){for(J[ae]=0,te=0;te<$;te++)J[ae]+=W[ae][te];J[ae]/=ee}else throw new Error("Invalid dimension");return J},T.sum=function(W,Z){"undefined"==typeof Z&&(Z=0);var Q=W.length,$=W[0].length,J,ee,te;if(-1===Z)for(J=[0],ee=0;ee<Q;ee++)for(te=0;te<$;te++)J[0]+=W[ee][te];else if(0===Z)for(J=Array($),te=0;te<$;te++)for(J[te]=0,ee=0;ee<Q;ee++)J[te]+=W[ee][te];else if(1===Z)for(J=Array(Q),te=0;te<Q;te++)for(J[te]=0,ee=0;ee<$;ee++)J[te]+=W[te][ee];else throw new Error("Invalid dimension");return J},T.product=function(W,Z){"undefined"==typeof Z&&(Z=0);var Q=W.length,$=W[0].length,J,ee,te;if(-1===Z)for(J=[1],ee=0;ee<Q;ee++)for(te=0;te<$;te++)J[0]*=W[ee][te];else if(0===Z)for(J=Array($),te=0;te<$;te++)for(J[te]=1,ee=0;ee<Q;ee++)J[te]*=W[ee][te];else if(1===Z)for(J=Array(Q),te=0;te<Q;te++)for(J[te]=1,ee=0;ee<$;ee++)J[te]*=W[te][ee];else throw new Error("Invalid dimension");return J},T.standardDeviation=function(W,Z,Q){var $=T.variance(W,Z,Q),J=$.length;for(var ee=0;ee<J;ee++)$[ee]=Math.sqrt($[ee]);return $},T.variance=function(W,Z,Q){"undefined"==typeof Q&&(Q=!0),Z=Z||T.mean(W);var $=W.length;if(0===$)return[];var J=W[0].length,ee=Array(J);for(var te=0;te<J;te++){var ae=0,ie=0,ne=0;for(var le=0;le<$;le++)ne=W[le][te]-Z[te],ae+=ne,ie+=ne*ne;ee[te]=Q?(ie-ae*ae/$)/($-1):(ie-ae*ae/$)/$}return ee},T.median=function(W){var Z=W.length,Q=W[0].length,$=Array(Q);for(var J=0;J<Q;J++){var ee=Array(Z);for(var te=0;te<Z;te++)ee[te]=W[te][J];ee.sort(L);var ae=ee.length;$[J]=0==ae%2?0.5*(ee[ae/2]+ee[ae/2-1]):ee[Math.floor(ae/2)]}return $},T.mode=function(W){var Z=W.length,Q=W[0].length,$=Array(Q),J,ee;for(J=0;J<Q;J++){var te=Array(Z);for(var ae=0;ae<Z;ae++)te[ae]=0;var ie=Array(Z),ne=0;for(ee=0;ee<Z;ee++){var le=ie.indexOf(W[ee][J]);0<=le?te[le]++:(ie[ne]=W[ee][J],te[ne]=1,ne++)}var oe=0,se=0;for(ee=0;ee<ne;ee++)te[ee]>oe&&(oe=te[ee],se=ee);$[J]=ie[se]}return $},T.skewness=function(W,Z){"undefined"==typeof Z&&(Z=!0);var Q=T.mean(W),$=W.length,J=Q.length,ee=Array(J);for(var te=0;te<J;te++){var ae=0,ie=0;for(var ne=0;ne<$;ne++){var le=W[ne][te]-Q[te];ae+=le*le,ie+=le*le*le}var oe=ae/$,se=ie/$,de=se/Math.pow(oe,3/2);if(Z){var he=Math.sqrt($*($-1));ee[te]=he/($-2)*de}else ee[te]=de}return ee},T.kurtosis=function(W,Z){"undefined"==typeof Z&&(Z=!0);var Q=T.mean(W),$=W.length,J=W[0].length,ee=Array(J);for(var te=0;te<J;te++){var ae=0,ie=0;for(var ne=0;ne<$;ne++){var le=W[ne][te]-Q[te];ae+=le*le,ie+=le*le*le*le}var oe=ae/$,se=ie/$;if(Z){var de=ae/($-1),he=ie/(de*de);ee[te]=$*($+1)/(($-1)*($-2)*($-3))*he-3*(($-1)*($-1)/(($-2)*($-3)))}else ee[te]=se/(oe*oe)-3}return ee},T.standardError=function(W){var Z=W.length,Q=T.standardDeviation(W),$=Q.length,J=Array($),ee=Math.sqrt(Z);for(var te=0;te<$;te++)J[te]=Q[te]/ee;return J},T.covariance=function(W,Z){return T.scatter(W,void 0,Z)},T.scatter=function(W,Z,Q){"undefined"==typeof Q&&(Q=0),"undefined"==typeof Z&&(0===Q?Z=W.length-1:1==Q&&(Z=W[0].length-1));var $=T.mean(W,Q),J=W.length;if(0===J)return[[]];var ee=W[0].length,te,ae,ie,ne,le;if(0===Q){for(te=Array(ee),ae=0;ae<ee;ae++)te[ae]=Array(ee);for(ae=0;ae<ee;ae++)for(ie=ae;ie<ee;ie++){for(ne=0,le=0;le<J;le++)ne+=(W[le][ie]-$[ie])*(W[le][ae]-$[ae]);ne/=Z,te[ae][ie]=ne,te[ie][ae]=ne}}else if(1===Q){for(te=Array(J),ae=0;ae<J;ae++)te[ae]=Array(J);for(ae=0;ae<J;ae++)for(ie=ae;ie<J;ie++){for(ne=0,le=0;le<ee;le++)ne+=(W[ie][le]-$[ie])*(W[ae][le]-$[ae]);ne/=Z,te[ae][ie]=ne,te[ie][ae]=ne}}else throw new Error("Invalid dimension");return te},T.correlation=function(W){var Z=T.mean(W),Q=T.standardDeviation(W,!0,Z),$=T.zScores(W,Z,Q),J=W.length,ee=W[0].length,te,ae,ie=Array(ee);for(te=0;te<ee;te++)ie[te]=Array(ee);for(te=0;te<ee;te++)for(ae=te;ae<ee;ae++){var ne=0;for(var le=0,oe=$.length;le<oe;le++)ne+=$[le][ae]*$[le][te];ne/=J-1,ie[te][ae]=ne,ie[ae][te]=ne}return ie},T.zScores=function(W,Z,Q){return Z=Z||T.mean(W),"undefined"==typeof Q&&(Q=T.standardDeviation(W,!0,Z)),T.standardize(T.center(W,Z,!1),Q,!0)},T.center=function(W,Z,Q){Z=Z||T.mean(W);var $=W,J=W.length,ee,te,ae;if(!Q)for($=Array(J),ee=0;ee<J;ee++)$[ee]=Array(W[ee].length);for(ee=0;ee<J;ee++){var ie=$[ee];for(te=0,ae=ie.length;te<ae;te++)ie[te]=W[ee][te]-Z[te]}return $},T.standardize=function(W,Z,Q){"undefined"==typeof Z&&(Z=T.standardDeviation(W));var $=W,J=W.length,ee,te,ae;if(!Q)for($=Array(J),ee=0;ee<J;ee++)$[ee]=Array(W[ee].length);for(ee=0;ee<J;ee++){var ie=$[ee],ne=W[ee];for(te=0,ae=ie.length;te<ae;te++)0===Z[te]||isNaN(Z[te])||(ie[te]=ne[te]/Z[te])}return $},T.weightedVariance=function(W,Z){var Q=T.mean(W),$=W.length;if(0===$)return[];var J=W[0].length,ee=Array(J);for(var te=0;te<J;te++){var ae=0,ie=0,ne=0;for(var le=0;le<$;le++){var oe=W[le][te]-Q[te],se=Z[le];ae+=se*(oe*oe),ne+=se,ie+=se*se}ee[te]=ae*(ne/(ne*ne-ie))}return ee},T.weightedMean=function(W,Z,Q){"undefined"==typeof Q&&(Q=0);var $=W.length;if(0===$)return[];var J=W[0].length,ee,te,ae,ie,ne,le;if(0===Q){for(ee=Array(J),te=0;te<J;te++)ee[te]=0;for(te=0;te<$;te++)for(le=W[te],ne=Z[te],ie=0;ie<J;ie++)ee[ie]+=le[ie]*ne}else if(1===Q){for(ee=Array($),te=0;te<$;te++)ee[te]=0;for(ie=0;ie<$;ie++)for(le=W[ie],ne=Z[ie],te=0;te<J;te++)ee[ie]+=le[te]*ne}else throw new Error("Invalid dimension");var oe=E.sum(Z);if(0!==oe)for(te=0,ae=ee.length;te<ae;te++)ee[te]/=oe;return ee},T.weightedCovariance=function(W,Z,Q,$){$=$||0,Q=Q||T.weightedMean(W,Z,$);var J=0,ee=0;for(var te=0,ae=Z.length;te<ae;te++)J+=Z[te],ee+=Z[te]*Z[te];var ie=J/(J*J-ee);return T.weightedScatter(W,Z,Q,ie,$)},T.weightedScatter=function(W,Z,Q,$,J){J=J||0,Q=Q||T.weightedMean(W,Z,J),"undefined"==typeof $&&($=1);var ee=W.length;if(0===ee)return[[]];var te=W[0].length,ae,ie,ne,le,oe;if(0===J){for(ae=Array(te),ie=0;ie<te;ie++)ae[ie]=Array(te);for(ie=0;ie<te;ie++)for(ne=ie;ne<te;ne++){for(oe=0,le=0;le<ee;le++)oe+=Z[le]*(W[le][ne]-Q[ne])*(W[le][ie]-Q[ie]);ae[ie][ne]=oe*$,ae[ne][ie]=oe*$}}else if(1===J){for(ae=Array(ee),ie=0;ie<ee;ie++)ae[ie]=Array(ee);for(ie=0;ie<ee;ie++)for(ne=ie;ne<ee;ne++){for(oe=0,le=0;le<te;le++)oe+=Z[le]*(W[ne][le]-Q[ne])*(W[ie][le]-Q[ie]);ae[ie][ne]=oe*$,ae[ne][ie]=oe*$}}else throw new Error("Invalid dimension");return ae}},{"./array":114}],117:[function(I,R){"use strict";R.exports="function"==typeof Promise?Promise:I("lie")},{lie:61}],118:[function(I,R){"use strict";R.exports=function(L,E){L=L||0;var G=Array(L);for(var W=0;W<L;W++)G[W]=E;return G}},{}],119:[function(I,R,T){"use strict";function L(G){if("number"!=typeof G||E(G))throw new TypeError("Expected a number")}var E=I("number-is-nan");T.asc=function(G,W){return L(G),L(W),G-W},T.desc=function(G,W){return L(G),L(W),W-G}},{"number-is-nan":120}],120:[function(I,R){"use strict";R.exports=Number.isNaN||function(T){return T!==T}},{}],121:[function(I,R){"use strict";var T=Object.prototype.hasOwnProperty,L=Object.prototype.toString,E=Array.prototype.slice,G=I("./isArguments"),W=Object.prototype.propertyIsEnumerable,Z=!W.call({toString:null},"toString"),Q=W.call(function(){},"prototype"),$=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],J=function(le){var oe=le.constructor;return oe&&oe.prototype===le},ee={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},te=function(){if("undefined"==typeof window)return!1;for(var ne in window)try{if(!ee["$"+ne]&&T.call(window,ne)&&null!==window[ne]&&"object"==typeof window[ne])try{J(window[ne])}catch(le){return!0}}catch(le){return!0}return!1}(),ae=function(le){if("undefined"==typeof window||!te)return J(le);try{return J(le)}catch(oe){return!1}},ie=function(le){var oe=null!==le&&"object"==typeof le,se="[object Function]"===L.call(le),de=G(le),he=oe&&"[object String]"===L.call(le),ue=[];if(!oe&&!se&&!de)throw new TypeError("Object.keys called on a non-object");if(he&&0<le.length&&!T.call(le,0))for(var ce=0;ce<le.length;++ce)ue.push(ce+"");if(de&&0<le.length)for(var ge=0;ge<le.length;++ge)ue.push(ge+"");else for(var pe in le)!(Q&&se&&"prototype"===pe)&&T.call(le,pe)&&ue.push(pe+"");if(Z){var fe=ae(le);for(var _e=0;_e<$.length;++_e)!(fe&&"constructor"===$[_e])&&T.call(le,$[_e])&&ue.push($[_e])}return ue};ie.shim=function(){if(Object.keys){var le=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!le){var oe=Object.keys;Object.keys=function(de){return G(de)?oe(E.call(de)):oe(de)}}}else Object.keys=ie;return Object.keys||ie},R.exports=ie},{"./isArguments":122}],122:[function(I,R){"use strict";var T=Object.prototype.toString;R.exports=function(E){var G=T.call(E),W="[object Arguments]"===G;return W||(W="[object Array]"!==G&&null!==E&&"object"==typeof E&&"number"==typeof E.length&&0<=E.length&&"[object Function]"===T.call(E.callee)),W}},{}],123:[function(I,R){"use strict";var T=I("./lib/utils/common").assign,L=I("./lib/deflate"),E=I("./lib/inflate"),G=I("./lib/zlib/constants"),W={};T(W,L,E,G),R.exports=W},{"./lib/deflate":124,"./lib/inflate":125,"./lib/utils/common":126,"./lib/zlib/constants":129}],124:[function(I,R,T){"use strict";function L(ne){if(!(this instanceof L))return new L(ne);this.options=W.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},ne||{});var le=this.options;le.raw&&0<le.windowBits?le.windowBits=-le.windowBits:le.gzip&&0<le.windowBits&&16>le.windowBits&&(le.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $,this.strm.avail_out=0;var oe=G.deflateInit2(this.strm,le.level,le.method,le.windowBits,le.memLevel,le.strategy);if(oe!==te)throw new Error(Q[oe]);if(le.header&&G.deflateSetHeader(this.strm,le.header),le.dictionary){var se;if(se="string"==typeof le.dictionary?Z.string2buf(le.dictionary):"[object ArrayBuffer]"===J.call(le.dictionary)?new Uint8Array(le.dictionary):le.dictionary,oe=G.deflateSetDictionary(this.strm,se),oe!==te)throw new Error(Q[oe]);this._dict_set=!0}}function E(ne,le){var oe=new L(le);if(oe.push(ne,!0),oe.err)throw oe.msg||Q[oe.err];return oe.result}var G=I("./zlib/deflate"),W=I("./utils/common"),Z=I("./utils/strings"),Q=I("./zlib/messages"),$=I("./zlib/zstream"),J=Object.prototype.toString,ee=4,te=0,ae=1,ie=2;L.prototype.push=function(ne,le){var oe=this.strm,se=this.options.chunkSize,de,he;if(this.ended)return!1;he=le===~~le?le:!0===le?ee:0,oe.input="string"==typeof ne?Z.string2buf(ne):"[object ArrayBuffer]"===J.call(ne)?new Uint8Array(ne):ne,oe.next_in=0,oe.avail_in=oe.input.length;do{if(0===oe.avail_out&&(oe.output=new W.Buf8(se),oe.next_out=0,oe.avail_out=se),de=G.deflate(oe,he),de!==ae&&de!==te)return this.onEnd(de),this.ended=!0,!1;(0===oe.avail_out||0===oe.avail_in&&(he===ee||he===ie))&&("string"===this.options.to?this.onData(Z.buf2binstring(W.shrinkBuf(oe.output,oe.next_out))):this.onData(W.shrinkBuf(oe.output,oe.next_out)))}while((0<oe.avail_in||0===oe.avail_out)&&de!==ae);return he===ee?(de=G.deflateEnd(this.strm),this.onEnd(de),this.ended=!0,de===te):he!==ie||(this.onEnd(te),oe.avail_out=0,!0)},L.prototype.onData=function(ne){this.chunks.push(ne)},L.prototype.onEnd=function(ne){ne===te&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=W.flattenChunks(this.chunks)),this.chunks=[],this.err=ne,this.msg=this.strm.msg},T.Deflate=L,T.deflate=E,T.deflateRaw=function(le,oe){return oe=oe||{},oe.raw=!0,E(le,oe)},T.gzip=function(le,oe){return oe=oe||{},oe.gzip=!0,E(le,oe)}},{"./utils/common":126,"./utils/strings":127,"./zlib/deflate":131,"./zlib/messages":136,"./zlib/zstream":138}],125:[function(I,R,T){"use strict";function L(ae){if(!(this instanceof L))return new L(ae);this.options=W.assign({chunkSize:16384,windowBits:0,to:""},ae||{});var ie=this.options;ie.raw&&0<=ie.windowBits&&16>ie.windowBits&&(ie.windowBits=-ie.windowBits,0===ie.windowBits&&(ie.windowBits=-15)),0<=ie.windowBits&&16>ie.windowBits&&!(ae&&ae.windowBits)&&(ie.windowBits+=32),15<ie.windowBits&&48>ie.windowBits&&0==(15&ie.windowBits)&&(ie.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new J,this.strm.avail_out=0;var ne=G.inflateInit2(this.strm,ie.windowBits);if(ne!==Q.Z_OK)throw new Error($[ne]);this.header=new ee,G.inflateGetHeader(this.strm,this.header)}function E(ae,ie){var ne=new L(ie);if(ne.push(ae,!0),ne.err)throw ne.msg||$[ne.err];return ne.result}var G=I("./zlib/inflate"),W=I("./utils/common"),Z=I("./utils/strings"),Q=I("./zlib/constants"),$=I("./zlib/messages"),J=I("./zlib/zstream"),ee=I("./zlib/gzheader"),te=Object.prototype.toString;L.prototype.push=function(ae,ie){var ne=this.strm,le=this.options.chunkSize,oe=this.options.dictionary,pe=!1,se,de,he,ue,ce,ge;if(this.ended)return!1;de=ie===~~ie?ie:!0===ie?Q.Z_FINISH:Q.Z_NO_FLUSH,ne.input="string"==typeof ae?Z.binstring2buf(ae):"[object ArrayBuffer]"===te.call(ae)?new Uint8Array(ae):ae,ne.next_in=0,ne.avail_in=ne.input.length;do{if(0===ne.avail_out&&(ne.output=new W.Buf8(le),ne.next_out=0,ne.avail_out=le),se=G.inflate(ne,Q.Z_NO_FLUSH),se===Q.Z_NEED_DICT&&oe&&(ge="string"==typeof oe?Z.string2buf(oe):"[object ArrayBuffer]"===te.call(oe)?new Uint8Array(oe):oe,se=G.inflateSetDictionary(this.strm,ge)),se===Q.Z_BUF_ERROR&&!0==pe&&(se=Q.Z_OK,pe=!1),se!==Q.Z_STREAM_END&&se!==Q.Z_OK)return this.onEnd(se),this.ended=!0,!1;ne.next_out&&(0===ne.avail_out||se===Q.Z_STREAM_END||0===ne.avail_in&&(de===Q.Z_FINISH||de===Q.Z_SYNC_FLUSH))&&("string"===this.options.to?(he=Z.utf8border(ne.output,ne.next_out),ue=ne.next_out-he,ce=Z.buf2string(ne.output,he),ne.next_out=ue,ne.avail_out=le-ue,ue&&W.arraySet(ne.output,ne.output,he,ue,0),this.onData(ce)):this.onData(W.shrinkBuf(ne.output,ne.next_out))),0===ne.avail_in&&0===ne.avail_out&&(pe=!0)}while((0<ne.avail_in||0===ne.avail_out)&&se!==Q.Z_STREAM_END);return se===Q.Z_STREAM_END&&(de=Q.Z_FINISH),de===Q.Z_FINISH?(se=G.inflateEnd(this.strm),this.onEnd(se),this.ended=!0,se===Q.Z_OK):de!==Q.Z_SYNC_FLUSH||(this.onEnd(Q.Z_OK),ne.avail_out=0,!0)},L.prototype.onData=function(ae){this.chunks.push(ae)},L.prototype.onEnd=function(ae){ae===Q.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=W.flattenChunks(this.chunks)),this.chunks=[],this.err=ae,this.msg=this.strm.msg},T.Inflate=L,T.inflate=E,T.inflateRaw=function(ie,ne){return ne=ne||{},ne.raw=!0,E(ie,ne)},T.ungzip=E},{"./utils/common":126,"./utils/strings":127,"./zlib/constants":129,"./zlib/gzheader":132,"./zlib/inflate":134,"./zlib/messages":136,"./zlib/zstream":138}],126:[function(I,R,T){"use strict";var L="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;T.assign=function(W){for(var Z=Array.prototype.slice.call(arguments,1);Z.length;){var Q=Z.shift();if(Q){if("object"!=typeof Q)throw new TypeError(Q+"must be non-object");for(var $ in Q)Q.hasOwnProperty($)&&(W[$]=Q[$])}}return W},T.shrinkBuf=function(W,Z){return W.length===Z?W:W.subarray?W.subarray(0,Z):(W.length=Z,W)};var E={arraySet:function(Z,Q,$,J,ee){if(Q.subarray&&Z.subarray)return void Z.set(Q.subarray($,$+J),ee);for(var te=0;te<J;te++)Z[ee+te]=Q[$+te]},flattenChunks:function(Z){var Q,$,J,ee,te,ae;for(J=0,Q=0,$=Z.length;Q<$;Q++)J+=Z[Q].length;for(ae=new Uint8Array(J),ee=0,(Q=0,$=Z.length);Q<$;Q++)te=Z[Q],ae.set(te,ee),ee+=te.length;return ae}},G={arraySet:function(Z,Q,$,J,ee){for(var te=0;te<J;te++)Z[ee+te]=Q[$+te]},flattenChunks:function(Z){return[].concat.apply([],Z)}};T.setTyped=function(W){W?(T.Buf8=Uint8Array,T.Buf16=Uint16Array,T.Buf32=Int32Array,T.assign(T,E)):(T.Buf8=Array,T.Buf16=Array,T.Buf32=Array,T.assign(T,G))},T.setTyped(L)},{}],127:[function(I,R,T){"use strict";function L($,J){if(65537>J&&($.subarray&&W||!$.subarray&&G))return String.fromCharCode.apply(null,E.shrinkBuf($,J));var ee="";for(var te=0;te<J;te++)ee+=String.fromCharCode($[te]);return ee}var E=I("./common"),G=!0,W=!0;try{String.fromCharCode.apply(null,[0])}catch($){G=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch($){W=!1}var Z=new E.Buf8(256);for(var Q=0;256>Q;Q++)Z[Q]=252<=Q?6:248<=Q?5:240<=Q?4:224<=Q?3:192<=Q?2:1;Z[254]=Z[254]=1,T.string2buf=function($){var ne=$.length,le=0,J,ee,te,ae,ie;for(ae=0;ae<ne;ae++)ee=$.charCodeAt(ae),55296==(64512&ee)&&ae+1<ne&&(te=$.charCodeAt(ae+1),56320==(64512&te)&&(ee=65536+(ee-55296<<10)+(te-56320),ae++)),le+=128>ee?1:2048>ee?2:65536>ee?3:4;for(J=new E.Buf8(le),ie=0,ae=0;ie<le;ae++)ee=$.charCodeAt(ae),55296==(64512&ee)&&ae+1<ne&&(te=$.charCodeAt(ae+1),56320==(64512&te)&&(ee=65536+(ee-55296<<10)+(te-56320),ae++)),128>ee?J[ie++]=ee:2048>ee?(J[ie++]=192|ee>>>6,J[ie++]=128|63&ee):65536>ee?(J[ie++]=224|ee>>>12,J[ie++]=128|63&ee>>>6,J[ie++]=128|63&ee):(J[ie++]=240|ee>>>18,J[ie++]=128|63&ee>>>12,J[ie++]=128|63&ee>>>6,J[ie++]=128|63&ee);return J},T.buf2binstring=function($){return L($,$.length)},T.binstring2buf=function($){var J=new E.Buf8($.length);for(var ee=0,te=J.length;ee<te;ee++)J[ee]=$.charCodeAt(ee);return J},T.buf2string=function($,J){var ee,te,ae,ie,ne=J||$.length,le=Array(2*ne);for(te=0,ee=0;ee<ne;){if(ae=$[ee++],128>ae){le[te++]=ae;continue}if(ie=Z[ae],4<ie){le[te++]=65533,ee+=ie-1;continue}for(ae&=2===ie?31:3===ie?15:7;1<ie&&ee<ne;)ae=ae<<6|63&$[ee++],ie--;if(1<ie){le[te++]=65533;continue}65536>ae?le[te++]=ae:(ae-=65536,le[te++]=55296|1023&ae>>10,le[te++]=56320|1023&ae)}return L(le,te)},T.utf8border=function($,J){var ee;for(J=J||$.length,J>$.length&&(J=$.length),ee=J-1;0<=ee&&128==(192&$[ee]);)ee--;return 0>ee?J:0===ee?J:ee+Z[$[ee]]>J?ee:J}},{"./common":126}],128:[function(I,R){"use strict";R.exports=function(L,E,G,W){for(var Z=0|65535&L,Q=0|65535&L>>>16,$=0;0!==G;){$=2e3<G?2e3:G,G-=$;do Z=0|Z+E[W++],Q=0|Q+Z;while(--$);Z%=65521,Q%=65521}return 0|(Z|Q<<16)}},{}],129:[function(I,R){"use strict";R.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],130:[function(I,R){"use strict";var T=function(){var G=[],E;for(var W=0;256>W;W++){E=W;for(var Z=0;8>Z;Z++)E=1&E?3988292384^E>>>1:E>>>1;G[W]=E}return G}();R.exports=function(E,G,W,Z){E^=-1;for(var Q=Z;Q<Z+W;Q++)E=E>>>8^T[255&(E^G[Q])];return-1^E}},{}],131:[function(I,R,T){"use strict";function L(qe,Xe){return qe.msg=be[Xe],Xe}function E(qe){return(qe<<1)-(4<qe?9:0)}function G(qe){for(var Xe=qe.length;0<=--Xe;)qe[Xe]=0}function W(qe){var Xe=qe.state,Ge=Xe.pending;Ge>qe.avail_out&&(Ge=qe.avail_out);0===Ge||(ge.arraySet(qe.output,Xe.pending_buf,Xe.pending_out,Ge,qe.next_out),qe.next_out+=Ge,Xe.pending_out+=Ge,qe.total_out+=Ge,qe.avail_out-=Ge,Xe.pending-=Ge,0===Xe.pending&&(Xe.pending_out=0))}function Z(qe,Xe){pe._tr_flush_block(qe,0<=qe.block_start?qe.block_start:-1,qe.strstart-qe.block_start,Xe),qe.block_start=qe.strstart,W(qe.strm)}function Q(qe,Xe){qe.pending_buf[qe.pending++]=Xe}function $(qe,Xe){qe.pending_buf[qe.pending++]=255&Xe>>>8,qe.pending_buf[qe.pending++]=255&Xe}function J(qe,Xe,Ge,He){var We=qe.avail_in;return(We>He&&(We=He),0===We)?0:(qe.avail_in-=We,ge.arraySet(Xe,qe.input,qe.next_in,We,Ge),1===qe.state.wrap?qe.adler=fe(qe.adler,Xe,We,Ge):2===qe.state.wrap&&(qe.adler=_e(qe.adler,Xe,We,Ge)),qe.next_in+=We,qe.total_in+=We,We)}function ee(qe,Xe){var Ge=qe.max_chain_length,He=qe.strstart,We,Ze,Ke=qe.prev_length,Qe=qe.nice_match,$e=qe.strstart>qe.w_size-Ae?qe.strstart-(qe.w_size-Ae):0,Je=qe.window,et=qe.w_mask,at=qe.prev,nt=qe.strstart+Ce,lt=Je[He+Ke-1],ot=Je[He+Ke];qe.prev_length>=qe.good_match&&(Ge>>=2),Qe>qe.lookahead&&(Qe=qe.lookahead);do{if(We=Xe,Je[We+Ke]!==ot||Je[We+Ke-1]!==lt||Je[We]!==Je[He]||Je[++We]!==Je[He+1])continue;He+=2,We++;do;while(Je[++He]===Je[++We]&&Je[++He]===Je[++We]&&Je[++He]===Je[++We]&&Je[++He]===Je[++We]&&Je[++He]===Je[++We]&&Je[++He]===Je[++We]&&Je[++He]===Je[++We]&&Je[++He]===Je[++We]&&He<nt);if(Ze=Ce-(nt-He),He=nt-Ce,Ze>Ke){if(qe.match_start=Xe,Ke=Ze,Ze>=Qe)break;lt=Je[He+Ke-1],ot=Je[He+Ke]}}while((Xe=at[Xe&et])>$e&&0!=--Ge);return Ke<=qe.lookahead?Ke:qe.lookahead}function te(qe){var Xe=qe.w_size,Ge,He,We,Ze,Ke;do{if(Ze=qe.window_size-qe.lookahead-qe.strstart,qe.strstart>=Xe+(Xe-Ae)){ge.arraySet(qe.window,qe.window,Xe,Xe,0),qe.match_start-=Xe,qe.strstart-=Xe,qe.block_start-=Xe,He=qe.hash_size,Ge=He;do We=qe.head[--Ge],qe.head[Ge]=We>=Xe?We-Xe:0;while(--He);He=Xe,Ge=He;do We=qe.prev[--Ge],qe.prev[Ge]=We>=Xe?We-Xe:0;while(--He);Ze+=Xe}if(0===qe.strm.avail_in)break;if(He=J(qe.strm,qe.window,qe.strstart+qe.lookahead,Ze),qe.lookahead+=He,qe.lookahead+qe.insert>=Se)for(Ke=qe.strstart-qe.insert,qe.ins_h=qe.window[Ke],qe.ins_h=(qe.ins_h<<qe.hash_shift^qe.window[Ke+1])&qe.hash_mask;qe.insert&&(qe.ins_h=(qe.ins_h<<qe.hash_shift^qe.window[Ke+Se-1])&qe.hash_mask,qe.prev[Ke&qe.w_mask]=qe.head[qe.ins_h],qe.head[qe.ins_h]=Ke,Ke++,qe.insert--,!(qe.lookahead+qe.insert<Se)););}while(qe.lookahead<Ae&&0!==qe.strm.avail_in)}function ae(qe,Xe){for(var Ge,He;;){if(qe.lookahead<Ae){if(te(qe),qe.lookahead<Ae&&Xe===ye)return Fe;if(0===qe.lookahead)break}if(Ge=0,qe.lookahead>=Se&&(qe.ins_h=(qe.ins_h<<qe.hash_shift^qe.window[qe.strstart+Se-1])&qe.hash_mask,Ge=qe.prev[qe.strstart&qe.w_mask]=qe.head[qe.ins_h],qe.head[qe.ins_h]=qe.strstart),0!==Ge&&qe.strstart-Ge<=qe.w_size-Ae&&(qe.match_length=ee(qe,Ge)),!(qe.match_length>=Se))He=pe._tr_tally(qe,0,qe.window[qe.strstart]),qe.lookahead--,qe.strstart++;else if(He=pe._tr_tally(qe,qe.strstart-qe.match_start,qe.match_length-Se),qe.lookahead-=qe.match_length,qe.match_length<=qe.max_lazy_match&&qe.lookahead>=Se){qe.match_length--;do qe.strstart++,qe.ins_h=(qe.ins_h<<qe.hash_shift^qe.window[qe.strstart+Se-1])&qe.hash_mask,Ge=qe.prev[qe.strstart&qe.w_mask]=qe.head[qe.ins_h],qe.head[qe.ins_h]=qe.strstart;while(0!=--qe.match_length);qe.strstart++}else qe.strstart+=qe.match_length,qe.match_length=0,qe.ins_h=qe.window[qe.strstart],qe.ins_h=(qe.ins_h<<qe.hash_shift^qe.window[qe.strstart+1])&qe.hash_mask;if(He&&(Z(qe,!1),0===qe.strm.avail_out))return Fe}return qe.insert=qe.strstart<Se-1?qe.strstart:Se-1,Xe===xe?(Z(qe,!0),0===qe.strm.avail_out?Oe:Ue):qe.last_lit&&(Z(qe,!1),0===qe.strm.avail_out)?Fe:Ye}function ie(qe,Xe){for(var Ge,He,We;;){if(qe.lookahead<Ae){if(te(qe),qe.lookahead<Ae&&Xe===ye)return Fe;if(0===qe.lookahead)break}if(Ge=0,qe.lookahead>=Se&&(qe.ins_h=(qe.ins_h<<qe.hash_shift^qe.window[qe.strstart+Se-1])&qe.hash_mask,Ge=qe.prev[qe.strstart&qe.w_mask]=qe.head[qe.ins_h],qe.head[qe.ins_h]=qe.strstart),qe.prev_length=qe.match_length,qe.prev_match=qe.match_start,qe.match_length=Se-1,0!==Ge&&qe.prev_length<qe.max_lazy_match&&qe.strstart-Ge<=qe.w_size-Ae&&(qe.match_length=ee(qe,Ge),5>=qe.match_length&&(1===qe.strategy||qe.match_length===Se&&4096<qe.strstart-qe.match_start)&&(qe.match_length=Se-1)),qe.prev_length>=Se&&qe.match_length<=qe.prev_length){We=qe.strstart+qe.lookahead-Se,He=pe._tr_tally(qe,qe.strstart-1-qe.prev_match,qe.prev_length-Se),qe.lookahead-=qe.prev_length-1,qe.prev_length-=2;do++qe.strstart<=We&&(qe.ins_h=(qe.ins_h<<qe.hash_shift^qe.window[qe.strstart+Se-1])&qe.hash_mask,Ge=qe.prev[qe.strstart&qe.w_mask]=qe.head[qe.ins_h],qe.head[qe.ins_h]=qe.strstart);while(0!=--qe.prev_length);if(qe.match_available=0,qe.match_length=Se-1,qe.strstart++,He&&(Z(qe,!1),0===qe.strm.avail_out))return Fe}else if(!qe.match_available)qe.match_available=1,qe.strstart++,qe.lookahead--;else if(He=pe._tr_tally(qe,0,qe.window[qe.strstart-1]),He&&Z(qe,!1),qe.strstart++,qe.lookahead--,0===qe.strm.avail_out)return Fe}return qe.match_available&&(He=pe._tr_tally(qe,0,qe.window[qe.strstart-1]),qe.match_available=0),qe.insert=qe.strstart<Se-1?qe.strstart:Se-1,Xe===xe?(Z(qe,!0),0===qe.strm.avail_out?Oe:Ue):qe.last_lit&&(Z(qe,!1),0===qe.strm.avail_out)?Fe:Ye}function ne(qe,Xe){for(var Ke=qe.window,Ge,He,We,Ze;;){if(qe.lookahead<=Ce){if(te(qe),qe.lookahead<=Ce&&Xe===ye)return Fe;if(0===qe.lookahead)break}if(qe.match_length=0,qe.lookahead>=Se&&0<qe.strstart&&(We=qe.strstart-1,He=Ke[We],He===Ke[++We]&&He===Ke[++We]&&He===Ke[++We])){Ze=qe.strstart+Ce;do;while(He===Ke[++We]&&He===Ke[++We]&&He===Ke[++We]&&He===Ke[++We]&&He===Ke[++We]&&He===Ke[++We]&&He===Ke[++We]&&He===Ke[++We]&&We<Ze);qe.match_length=Ce-(Ze-We),qe.match_length>qe.lookahead&&(qe.match_length=qe.lookahead)}if(qe.match_length>=Se?(Ge=pe._tr_tally(qe,1,qe.match_length-Se),qe.lookahead-=qe.match_length,qe.strstart+=qe.match_length,qe.match_length=0):(Ge=pe._tr_tally(qe,0,qe.window[qe.strstart]),qe.lookahead--,qe.strstart++),Ge&&(Z(qe,!1),0===qe.strm.avail_out))return Fe}return qe.insert=0,Xe===xe?(Z(qe,!0),0===qe.strm.avail_out?Oe:Ue):qe.last_lit&&(Z(qe,!1),0===qe.strm.avail_out)?Fe:Ye}function le(qe,Xe){for(var Ge;;){if(0===qe.lookahead&&(te(qe),0===qe.lookahead)){if(Xe===ye)return Fe;break}if(qe.match_length=0,Ge=pe._tr_tally(qe,0,qe.window[qe.strstart]),qe.lookahead--,qe.strstart++,Ge&&(Z(qe,!1),0===qe.strm.avail_out))return Fe}return qe.insert=0,Xe===xe?(Z(qe,!0),0===qe.strm.avail_out?Oe:Ue):qe.last_lit&&(Z(qe,!1),0===qe.strm.avail_out)?Fe:Ye}function oe(qe,Xe,Ge,He,We){this.good_length=qe,this.max_lazy=Xe,this.nice_length=Ge,this.max_chain=He,this.func=We}function se(qe){qe.window_size=2*qe.w_size,G(qe.head),qe.max_lazy_match=Ne[qe.level].max_lazy,qe.good_match=Ne[qe.level].good_length,qe.nice_match=Ne[qe.level].nice_length,qe.max_chain_length=Ne[qe.level].max_chain,qe.strstart=0,qe.block_start=0,qe.lookahead=0,qe.insert=0,qe.match_length=qe.prev_length=Se-1,qe.match_available=0,qe.ins_h=0}function de(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ie,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new ge.Buf16(2*(2*De+1)),this.dyn_dtree=new ge.Buf16(122),this.bl_tree=new ge.Buf16(78),G(this.dyn_ltree),G(this.dyn_dtree),G(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new ge.Buf16(16),this.heap=new ge.Buf16(2*De+1),G(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new ge.Buf16(2*De+1),G(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function he(qe){var Xe;return qe&&qe.state?(qe.total_in=qe.total_out=0,qe.data_type=2,Xe=qe.state,Xe.pending=0,Xe.pending_out=0,0>Xe.wrap&&(Xe.wrap=-Xe.wrap),Xe.status=Xe.wrap?Be:Ee,qe.adler=2===Xe.wrap?0:1,Xe.last_flush=ye,pe._tr_init(Xe),ke):L(qe,Me)}function ue(qe){var Xe=he(qe);return Xe===ke&&se(qe.state),Xe}function ce(qe,Xe,Ge,He,We,Ze){if(!qe)return Me;var Ke=1;if(-1===Xe&&(Xe=6),0>He?(Ke=0,He=-He):15<He&&(Ke=2,He-=16),1>We||9<We||Ge!==Ie||8>He||15<He||0>Xe||9<Xe||0>Ze||4<Ze)return L(qe,Me);8===He&&(He=9);var Qe=new de;return qe.state=Qe,Qe.strm=qe,Qe.wrap=Ke,Qe.gzhead=null,Qe.w_bits=He,Qe.w_size=1<<Qe.w_bits,Qe.w_mask=Qe.w_size-1,Qe.hash_bits=We+7,Qe.hash_size=1<<Qe.hash_bits,Qe.hash_mask=Qe.hash_size-1,Qe.hash_shift=~~((Qe.hash_bits+Se-1)/Se),Qe.window=new ge.Buf8(2*Qe.w_size),Qe.head=new ge.Buf16(Qe.hash_size),Qe.prev=new ge.Buf16(Qe.w_size),Qe.lit_bufsize=1<<We+6,Qe.pending_buf_size=4*Qe.lit_bufsize,Qe.pending_buf=new ge.Buf8(Qe.pending_buf_size),Qe.d_buf=1*Qe.lit_bufsize,Qe.l_buf=3*Qe.lit_bufsize,Qe.level=Xe,Qe.strategy=Ze,Qe.method=Ge,ue(qe)}var ge=I("../utils/common"),pe=I("./trees"),fe=I("./adler32"),_e=I("./crc32"),be=I("./messages"),ye=0,xe=4,we=5,ke=0,ve=1,Me=-2,je=-5,Pe=2,Ie=8,De=286,Se=3,Ce=258,Ae=Ce+Se+1,Be=42,Re=69,Te=73,ze=91,Le=103,Ee=113,Ve=666,Fe=1,Ye=2,Oe=3,Ue=4,Ne=[new oe(0,0,0,0,function(Xe,Ge){var He=65535;for(He>Xe.pending_buf_size-5&&(He=Xe.pending_buf_size-5);;){if(1>=Xe.lookahead){if(te(Xe),0===Xe.lookahead&&Ge===ye)return Fe;if(0===Xe.lookahead)break}Xe.strstart+=Xe.lookahead,Xe.lookahead=0;var We=Xe.block_start+He;if((0===Xe.strstart||Xe.strstart>=We)&&(Xe.lookahead=Xe.strstart-We,Xe.strstart=We,Z(Xe,!1),0===Xe.strm.avail_out))return Fe;if(Xe.strstart-Xe.block_start>=Xe.w_size-Ae&&(Z(Xe,!1),0===Xe.strm.avail_out))return Fe}return Xe.insert=0,Ge===xe?(Z(Xe,!0),0===Xe.strm.avail_out?Oe:Ue):Xe.strstart>Xe.block_start&&(Z(Xe,!1),0===Xe.strm.avail_out)?Fe:Fe}),new oe(4,4,8,4,ae),new oe(4,5,16,8,ae),new oe(4,6,32,32,ae),new oe(4,4,16,16,ie),new oe(8,16,32,32,ie),new oe(8,16,128,128,ie),new oe(8,32,128,256,ie),new oe(32,128,258,1024,ie),new oe(32,258,258,4096,ie)];T.deflateInit=function(Xe,Ge){return ce(Xe,Ge,Ie,15,8,0)},T.deflateInit2=ce,T.deflateReset=ue,T.deflateResetKeep=he,T.deflateSetHeader=function(Xe,Ge){return Xe&&Xe.state?2===Xe.state.wrap?(Xe.state.gzhead=Ge,ke):Me:Me},T.deflate=function(Xe,Ge){var He,We,Ze,Ke;if(!Xe||!Xe.state||Ge>we||0>Ge)return Xe?L(Xe,Me):Me;if(We=Xe.state,!Xe.output||!Xe.input&&0!==Xe.avail_in||We.status===Ve&&Ge!==xe)return L(Xe,0===Xe.avail_out?je:Me);if(We.strm=Xe,He=We.last_flush,We.last_flush=Ge,We.status===Be)if(2===We.wrap)Xe.adler=0,Q(We,31),Q(We,139),Q(We,8),We.gzhead?(Q(We,(We.gzhead.text?1:0)+(We.gzhead.hcrc?2:0)+(We.gzhead.extra?4:0)+(We.gzhead.name?8:0)+(We.gzhead.comment?16:0)),Q(We,255&We.gzhead.time),Q(We,255&We.gzhead.time>>8),Q(We,255&We.gzhead.time>>16),Q(We,255&We.gzhead.time>>24),Q(We,9===We.level?2:We.strategy>=Pe||2>We.level?4:0),Q(We,255&We.gzhead.os),We.gzhead.extra&&We.gzhead.extra.length&&(Q(We,255&We.gzhead.extra.length),Q(We,255&We.gzhead.extra.length>>8)),We.gzhead.hcrc&&(Xe.adler=_e(Xe.adler,We.pending_buf,We.pending,0)),We.gzindex=0,We.status=Re):(Q(We,0),Q(We,0),Q(We,0),Q(We,0),Q(We,0),Q(We,9===We.level?2:We.strategy>=Pe||2>We.level?4:0),Q(We,3),We.status=Ee);else{var Qe=Ie+(We.w_bits-8<<4)<<8,$e=-1;$e=We.strategy>=Pe||2>We.level?0:6>We.level?1:6===We.level?2:3,Qe|=$e<<6,0!==We.strstart&&(Qe|=32),Qe+=31-Qe%31,We.status=Ee,$(We,Qe),0!==We.strstart&&($(We,Xe.adler>>>16),$(We,65535&Xe.adler)),Xe.adler=1}if(We.status===Re)if(We.gzhead.extra){for(Ze=We.pending;We.gzindex<(65535&We.gzhead.extra.length)&&!(We.pending===We.pending_buf_size&&(We.gzhead.hcrc&&We.pending>Ze&&(Xe.adler=_e(Xe.adler,We.pending_buf,We.pending-Ze,Ze)),W(Xe),Ze=We.pending,We.pending===We.pending_buf_size));)Q(We,255&We.gzhead.extra[We.gzindex]),We.gzindex++;We.gzhead.hcrc&&We.pending>Ze&&(Xe.adler=_e(Xe.adler,We.pending_buf,We.pending-Ze,Ze)),We.gzindex===We.gzhead.extra.length&&(We.gzindex=0,We.status=Te)}else We.status=Te;if(We.status===Te)if(We.gzhead.name){Ze=We.pending;do{if(We.pending===We.pending_buf_size&&(We.gzhead.hcrc&&We.pending>Ze&&(Xe.adler=_e(Xe.adler,We.pending_buf,We.pending-Ze,Ze)),W(Xe),Ze=We.pending,We.pending===We.pending_buf_size)){Ke=1;break}Ke=We.gzindex<We.gzhead.name.length?255&We.gzhead.name.charCodeAt(We.gzindex++):0,Q(We,Ke)}while(0!==Ke);We.gzhead.hcrc&&We.pending>Ze&&(Xe.adler=_e(Xe.adler,We.pending_buf,We.pending-Ze,Ze)),0===Ke&&(We.gzindex=0,We.status=ze)}else We.status=ze;if(We.status===ze)if(We.gzhead.comment){Ze=We.pending;do{if(We.pending===We.pending_buf_size&&(We.gzhead.hcrc&&We.pending>Ze&&(Xe.adler=_e(Xe.adler,We.pending_buf,We.pending-Ze,Ze)),W(Xe),Ze=We.pending,We.pending===We.pending_buf_size)){Ke=1;break}Ke=We.gzindex<We.gzhead.comment.length?255&We.gzhead.comment.charCodeAt(We.gzindex++):0,Q(We,Ke)}while(0!==Ke);We.gzhead.hcrc&&We.pending>Ze&&(Xe.adler=_e(Xe.adler,We.pending_buf,We.pending-Ze,Ze)),0===Ke&&(We.status=Le)}else We.status=Le;if(We.status===Le&&(We.gzhead.hcrc?(We.pending+2>We.pending_buf_size&&W(Xe),We.pending+2<=We.pending_buf_size&&(Q(We,255&Xe.adler),Q(We,255&Xe.adler>>8),Xe.adler=0,We.status=Ee)):We.status=Ee),0!==We.pending){if(W(Xe),0===Xe.avail_out)return We.last_flush=-1,ke;}else if(0===Xe.avail_in&&E(Ge)<=E(He)&&Ge!==xe)return L(Xe,je);if(We.status===Ve&&0!==Xe.avail_in)return L(Xe,je);if(0!==Xe.avail_in||0!==We.lookahead||Ge!==ye&&We.status!==Ve){var Je=We.strategy===Pe?le(We,Ge):3===We.strategy?ne(We,Ge):Ne[We.level].func(We,Ge);if((Je===Oe||Je===Ue)&&(We.status=Ve),Je===Fe||Je===Oe)return 0===Xe.avail_out&&(We.last_flush=-1),ke;if(Je===Ye&&(1===Ge?pe._tr_align(We):Ge!=we&&(pe._tr_stored_block(We,0,0,!1),3==Ge&&(G(We.head),0===We.lookahead&&(We.strstart=0,We.block_start=0,We.insert=0))),W(Xe),0===Xe.avail_out))return We.last_flush=-1,ke}return Ge===xe?0>=We.wrap?ve:(2===We.wrap?(Q(We,255&Xe.adler),Q(We,255&Xe.adler>>8),Q(We,255&Xe.adler>>16),Q(We,255&Xe.adler>>24),Q(We,255&Xe.total_in),Q(We,255&Xe.total_in>>8),Q(We,255&Xe.total_in>>16),Q(We,255&Xe.total_in>>24)):($(We,Xe.adler>>>16),$(We,65535&Xe.adler)),W(Xe),0<We.wrap&&(We.wrap=-We.wrap),0===We.pending?ve:ke):ke},T.deflateEnd=function(Xe){var Ge;return Xe&&Xe.state?(Ge=Xe.state.status,Ge!==Be&&Ge!==Re&&Ge!==Te&&Ge!==ze&&Ge!==Le&&Ge!==Ee&&Ge!==Ve)?L(Xe,Me):(Xe.state=null,Ge===Ee?L(Xe,-3):ke):Me},T.deflateSetDictionary=function(Xe,Ge){var He=Ge.length,We,Ze,Ke,Qe,$e,Je,et,at;if(!Xe||!Xe.state)return Me;if(We=Xe.state,Qe=We.wrap,2===Qe||1===Qe&&We.status!==Be||We.lookahead)return Me;for(1===Qe&&(Xe.adler=fe(Xe.adler,Ge,He,0)),We.wrap=0,He>=We.w_size&&(0===Qe&&(G(We.head),We.strstart=0,We.block_start=0,We.insert=0),at=new ge.Buf8(We.w_size),ge.arraySet(at,Ge,He-We.w_size,We.w_size,0),Ge=at,He=We.w_size),$e=Xe.avail_in,Je=Xe.next_in,et=Xe.input,Xe.avail_in=He,Xe.next_in=0,Xe.input=Ge,te(We);We.lookahead>=Se;){Ze=We.strstart,Ke=We.lookahead-(Se-1);do We.ins_h=(We.ins_h<<We.hash_shift^We.window[Ze+Se-1])&We.hash_mask,We.prev[Ze&We.w_mask]=We.head[We.ins_h],We.head[We.ins_h]=Ze,Ze++;while(--Ke);We.strstart=Ze,We.lookahead=Se-1,te(We)}return We.strstart+=We.lookahead,We.block_start=We.strstart,We.insert=We.lookahead,We.lookahead=0,We.match_length=We.prev_length=Se-1,We.match_available=0,Xe.next_in=Je,Xe.input=et,Xe.avail_in=$e,We.wrap=Qe,ke},T.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":126,"./adler32":128,"./crc32":130,"./messages":136,"./trees":137}],132:[function(I,R){"use strict";R.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],133:[function(I,R){"use strict";var T=30;R.exports=function(E,G){var W,Z,Q,$,J,ee,te,ae,ie,ne,le,oe,se,de,he,ue,ce,ge,pe,fe,_e,be,ye,xe,we;W=E.state,Z=E.next_in,xe=E.input,Q=Z+(E.avail_in-5),$=E.next_out,we=E.output,J=$-(G-E.avail_out),ee=$+(E.avail_out-257),te=W.dmax,ae=W.wsize,ie=W.whave,ne=W.wnext,le=W.window,oe=W.hold,se=W.bits,de=W.lencode,he=W.distcode,ue=(1<<W.lenbits)-1,ce=(1<<W.distbits)-1;top:do{15>se&&(oe+=xe[Z++]<<se,se+=8,oe+=xe[Z++]<<se,se+=8),ge=de[oe&ue];dolen:for(;;){if(pe=ge>>>24,oe>>>=pe,se-=pe,pe=255&ge>>>16,0===pe)we[$++]=65535&ge;else if(16&pe){fe=65535&ge,pe&=15,pe&&(se<pe&&(oe+=xe[Z++]<<se,se+=8),fe+=oe&(1<<pe)-1,oe>>>=pe,se-=pe),15>se&&(oe+=xe[Z++]<<se,se+=8,oe+=xe[Z++]<<se,se+=8),ge=he[oe&ce];dodist:for(;;){if(pe=ge>>>24,oe>>>=pe,se-=pe,pe=255&ge>>>16,16&pe){if(_e=65535&ge,pe&=15,se<pe&&(oe+=xe[Z++]<<se,se+=8,se<pe&&(oe+=xe[Z++]<<se,se+=8)),_e+=oe&(1<<pe)-1,_e>te){E.msg="invalid distance too far back",W.mode=T;break top}if(oe>>>=pe,se-=pe,pe=$-J,_e>pe){if(pe=_e-pe,pe>ie&&W.sane){E.msg="invalid distance too far back",W.mode=T;break top}if(be=0,ye=le,0===ne){if(be+=ae-pe,pe<fe){fe-=pe;do we[$++]=le[be++];while(--pe);be=$-_e,ye=we}}else if(ne<pe){if(be+=ae+ne-pe,pe-=ne,pe<fe){fe-=pe;do we[$++]=le[be++];while(--pe);if(be=0,ne<fe){pe=ne,fe-=pe;do we[$++]=le[be++];while(--pe);be=$-_e,ye=we}}}else if(be+=ne-pe,pe<fe){fe-=pe;do we[$++]=le[be++];while(--pe);be=$-_e,ye=we}for(;2<fe;)we[$++]=ye[be++],we[$++]=ye[be++],we[$++]=ye[be++],fe-=3;fe&&(we[$++]=ye[be++],1<fe&&(we[$++]=ye[be++]))}else{be=$-_e;do we[$++]=we[be++],we[$++]=we[be++],we[$++]=we[be++],fe-=3;while(2<fe);fe&&(we[$++]=we[be++],1<fe&&(we[$++]=we[be++]))}}else if(0==(64&pe)){ge=he[(65535&ge)+(oe&(1<<pe)-1)];continue dodist}else{E.msg="invalid distance code",W.mode=T;break top}break}}else if(0==(64&pe)){ge=de[(65535&ge)+(oe&(1<<pe)-1)];continue dolen}else if(32&pe){W.mode=12;break top}else{E.msg="invalid literal/length code",W.mode=T;break top}break}}while(Z<Q&&$<ee);fe=se>>3,Z-=fe,se-=fe<<3,oe&=(1<<se)-1,E.next_in=Z,E.next_out=$,E.avail_in=Z<Q?5+(Q-Z):5-(Z-Q),E.avail_out=$<ee?257+(ee-$):257-($-ee),W.hold=oe,W.bits=se}},{}],134:[function(I,R,T){"use strict";function L(Ke){return(255&Ke>>>24)+(65280&Ke>>>8)+((65280&Ke)<<8)+((255&Ke)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new ee.Buf16(320),this.work=new ee.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function G(Ke){var Qe;return Ke&&Ke.state?(Qe=Ke.state,Ke.total_in=Ke.total_out=Qe.total=0,Ke.msg="",Qe.wrap&&(Ke.adler=1&Qe.wrap),Qe.mode=fe,Qe.last=0,Qe.havedict=0,Qe.dmax=32768,Qe.head=null,Qe.hold=0,Qe.bits=0,Qe.lencode=Qe.lendyn=new ee.Buf32(852),Qe.distcode=Qe.distdyn=new ee.Buf32(592),Qe.sane=1,Qe.back=-1,he):ue}function W(Ke){var Qe;return Ke&&Ke.state?(Qe=Ke.state,Qe.wsize=0,Qe.whave=0,Qe.wnext=0,G(Ke)):ue}function Z(Ke,Qe){var $e,Je;return Ke&&Ke.state?(Je=Ke.state,0>Qe?($e=0,Qe=-Qe):($e=(Qe>>4)+1,48>Qe&&(Qe&=15)),Qe&&(8>Qe||15<Qe))?ue:(null!==Je.window&&Je.wbits!==Qe&&(Je.window=null),Je.wrap=$e,Je.wbits=Qe,W(Ke)):ue}function Q(Ke,Qe){var $e,Je;return Ke?(Je=new E,Ke.state=Je,Je.window=null,$e=Z(Ke,Qe),$e!==he&&(Ke.state=null),$e):ue}function $(Ke){if(He){var Qe;for(We=new ee.Buf32(512),Ze=new ee.Buf32(32),Qe=0;144>Qe;)Ke.lens[Qe++]=8;for(;256>Qe;)Ke.lens[Qe++]=9;for(;280>Qe;)Ke.lens[Qe++]=7;for(;288>Qe;)Ke.lens[Qe++]=8;for(ne(le,Ke.lens,0,288,We,0,Ke.work,{bits:9}),Qe=0;32>Qe;)Ke.lens[Qe++]=5;ne(oe,Ke.lens,0,32,Ze,0,Ke.work,{bits:5}),He=!1}Ke.lencode=We,Ke.lenbits=9,Ke.distcode=Ze,Ke.distbits=5}function J(Ke,Qe,$e,Je){var at=Ke.state,et;return null===at.window&&(at.wsize=1<<at.wbits,at.wnext=0,at.whave=0,at.window=new ee.Buf8(at.wsize)),Je>=at.wsize?(ee.arraySet(at.window,Qe,$e-at.wsize,at.wsize,0),at.wnext=0,at.whave=at.wsize):(et=at.wsize-at.wnext,et>Je&&(et=Je),ee.arraySet(at.window,Qe,$e-Je,et,at.wnext),Je-=et,Je?(ee.arraySet(at.window,Qe,$e-Je,Je,0),at.wnext=Je,at.whave=at.wsize):(at.wnext+=et,at.wnext===at.wsize&&(at.wnext=0),at.whave<at.wsize&&(at.whave+=et))),0}var ee=I("../utils/common"),te=I("./adler32"),ae=I("./crc32"),ie=I("./inffast"),ne=I("./inftrees"),le=1,oe=2,se=4,de=6,he=0,ue=-2,ce=-3,ge=-4,pe=8,fe=1,_e=2,be=3,ye=4,xe=5,we=6,ke=7,ve=8,Me=9,je=10,Pe=11,Ie=12,De=13,Se=14,Ce=15,Ae=16,Be=17,Re=18,Te=19,ze=20,Le=21,Ee=22,Ve=23,Fe=24,Ye=25,Oe=26,Ue=27,Ne=28,qe=29,Xe=30,Ge=31,He=!0,We,Ze;T.inflateReset=W,T.inflateReset2=Z,T.inflateResetKeep=G,T.inflateInit=function(Qe){return Q(Qe,15)},T.inflateInit2=Q,T.inflate=function(Qe,$e){var pt=0,jt=new ee.Buf8(4),Dt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Je,et,at,nt,lt,ot,rt,st,dt,ht,ut,mt,ct,gt,_t,bt,yt,xt,wt,kt,vt,Mt,Pt,It;if(!Qe||!Qe.state||!Qe.output||!Qe.input&&0!==Qe.avail_in)return ue;Je=Qe.state,Je.mode===Ie&&(Je.mode=De),lt=Qe.next_out,at=Qe.output,rt=Qe.avail_out,nt=Qe.next_in,et=Qe.input,ot=Qe.avail_in,st=Je.hold,dt=Je.bits,ht=ot,ut=rt,Mt=he;inf_leave:for(;;)switch(Je.mode){case fe:if(0===Je.wrap){Je.mode=De;break}for(;16>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}if(2&Je.wrap&&35615===st){Je.check=0,jt[0]=255&st,jt[1]=255&st>>>8,Je.check=ae(Je.check,jt,2,0),st=0,dt=0,Je.mode=_e;break}if(Je.flags=0,Je.head&&(Je.head.done=!1),!(1&Je.wrap)||(((255&st)<<8)+(st>>8))%31){Qe.msg="incorrect header check",Je.mode=Xe;break}if((15&st)!=pe){Qe.msg="unknown compression method",Je.mode=Xe;break}if(st>>>=4,dt-=4,vt=(15&st)+8,0===Je.wbits)Je.wbits=vt;else if(vt>Je.wbits){Qe.msg="invalid window size",Je.mode=Xe;break}Je.dmax=1<<vt,Qe.adler=Je.check=1,Je.mode=512&st?je:Ie,st=0,dt=0;break;case _e:for(;16>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}if(Je.flags=st,(255&Je.flags)!=pe){Qe.msg="unknown compression method",Je.mode=Xe;break}if(57344&Je.flags){Qe.msg="unknown header flags set",Je.mode=Xe;break}Je.head&&(Je.head.text=1&st>>8),512&Je.flags&&(jt[0]=255&st,jt[1]=255&st>>>8,Je.check=ae(Je.check,jt,2,0)),st=0,dt=0,Je.mode=be;case be:for(;32>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}Je.head&&(Je.head.time=st),512&Je.flags&&(jt[0]=255&st,jt[1]=255&st>>>8,jt[2]=255&st>>>16,jt[3]=255&st>>>24,Je.check=ae(Je.check,jt,4,0)),st=0,dt=0,Je.mode=ye;case ye:for(;16>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}Je.head&&(Je.head.xflags=255&st,Je.head.os=st>>8),512&Je.flags&&(jt[0]=255&st,jt[1]=255&st>>>8,Je.check=ae(Je.check,jt,2,0)),st=0,dt=0,Je.mode=xe;case xe:if(1024&Je.flags){for(;16>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}Je.length=st,Je.head&&(Je.head.extra_len=st),512&Je.flags&&(jt[0]=255&st,jt[1]=255&st>>>8,Je.check=ae(Je.check,jt,2,0)),st=0,dt=0}else Je.head&&(Je.head.extra=null);Je.mode=we;case we:if(1024&Je.flags&&(mt=Je.length,mt>ot&&(mt=ot),mt&&(Je.head&&(vt=Je.head.extra_len-Je.length,!Je.head.extra&&(Je.head.extra=Array(Je.head.extra_len)),ee.arraySet(Je.head.extra,et,nt,mt,vt)),512&Je.flags&&(Je.check=ae(Je.check,et,mt,nt)),ot-=mt,nt+=mt,Je.length-=mt),Je.length))break inf_leave;Je.length=0,Je.mode=ke;case ke:if(2048&Je.flags){if(0===ot)break inf_leave;mt=0;do vt=et[nt+mt++],Je.head&&vt&&65536>Je.length&&(Je.head.name+=String.fromCharCode(vt));while(vt&&mt<ot);if(512&Je.flags&&(Je.check=ae(Je.check,et,mt,nt)),ot-=mt,nt+=mt,vt)break inf_leave}else Je.head&&(Je.head.name=null);Je.length=0,Je.mode=ve;case ve:if(4096&Je.flags){if(0===ot)break inf_leave;mt=0;do vt=et[nt+mt++],Je.head&&vt&&65536>Je.length&&(Je.head.comment+=String.fromCharCode(vt));while(vt&&mt<ot);if(512&Je.flags&&(Je.check=ae(Je.check,et,mt,nt)),ot-=mt,nt+=mt,vt)break inf_leave}else Je.head&&(Je.head.comment=null);Je.mode=Me;case Me:if(512&Je.flags){for(;16>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}if(st!==(65535&Je.check)){Qe.msg="header crc mismatch",Je.mode=Xe;break}st=0,dt=0}Je.head&&(Je.head.hcrc=1&Je.flags>>9,Je.head.done=!0),Qe.adler=Je.check=0,Je.mode=Ie;break;case je:for(;32>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}Qe.adler=Je.check=L(st),st=0,dt=0,Je.mode=Pe;case Pe:if(0===Je.havedict)return Qe.next_out=lt,Qe.avail_out=rt,Qe.next_in=nt,Qe.avail_in=ot,Je.hold=st,Je.bits=dt,2;Qe.adler=Je.check=1,Je.mode=Ie;case Ie:if(5===$e||$e===de)break inf_leave;case De:if(Je.last){st>>>=7&dt,dt-=7&dt,Je.mode=Ue;break}for(;3>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}switch(Je.last=1&st,st>>>=1,dt-=1,3&st){case 0:Je.mode=Se;break;case 1:if($(Je),Je.mode=ze,$e===de){st>>>=2,dt-=2;break inf_leave}break;case 2:Je.mode=Be;break;case 3:Qe.msg="invalid block type",Je.mode=Xe;}st>>>=2,dt-=2;break;case Se:for(st>>>=7&dt,dt-=7&dt;32>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}if((65535&st)!=(65535^st>>>16)){Qe.msg="invalid stored block lengths",Je.mode=Xe;break}if(Je.length=65535&st,st=0,dt=0,Je.mode=Ce,$e===de)break inf_leave;case Ce:Je.mode=Ae;case Ae:if(mt=Je.length,mt){if(mt>ot&&(mt=ot),mt>rt&&(mt=rt),0===mt)break inf_leave;ee.arraySet(at,et,nt,mt,lt),ot-=mt,nt+=mt,rt-=mt,lt+=mt,Je.length-=mt;break}Je.mode=Ie;break;case Be:for(;14>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}if(Je.nlen=(31&st)+257,st>>>=5,dt-=5,Je.ndist=(31&st)+1,st>>>=5,dt-=5,Je.ncode=(15&st)+4,st>>>=4,dt-=4,286<Je.nlen||30<Je.ndist){Qe.msg="too many length or distance symbols",Je.mode=Xe;break}Je.have=0,Je.mode=Re;case Re:for(;Je.have<Je.ncode;){for(;3>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}Je.lens[Dt[Je.have++]]=7&st,st>>>=3,dt-=3}for(;19>Je.have;)Je.lens[Dt[Je.have++]]=0;if(Je.lencode=Je.lendyn,Je.lenbits=7,Pt={bits:Je.lenbits},Mt=ne(0,Je.lens,0,19,Je.lencode,0,Je.work,Pt),Je.lenbits=Pt.bits,Mt){Qe.msg="invalid code lengths set",Je.mode=Xe;break}Je.have=0,Je.mode=Te;case Te:for(;Je.have<Je.nlen+Je.ndist;){for(;;){if(pt=Je.lencode[st&(1<<Je.lenbits)-1],_t=pt>>>24,bt=255&pt>>>16,yt=65535&pt,_t<=dt)break;if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}if(16>yt)st>>>=_t,dt-=_t,Je.lens[Je.have++]=yt;else{if(16===yt){for(It=_t+2;dt<It;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}if(st>>>=_t,dt-=_t,0===Je.have){Qe.msg="invalid bit length repeat",Je.mode=Xe;break}vt=Je.lens[Je.have-1],mt=3+(3&st),st>>>=2,dt-=2}else if(17===yt){for(It=_t+3;dt<It;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}st>>>=_t,dt-=_t,vt=0,mt=3+(7&st),st>>>=3,dt-=3}else{for(It=_t+7;dt<It;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}st>>>=_t,dt-=_t,vt=0,mt=11+(127&st),st>>>=7,dt-=7}if(Je.have+mt>Je.nlen+Je.ndist){Qe.msg="invalid bit length repeat",Je.mode=Xe;break}for(;mt--;)Je.lens[Je.have++]=vt}}if(Je.mode===Xe)break;if(0===Je.lens[256]){Qe.msg="invalid code -- missing end-of-block",Je.mode=Xe;break}if(Je.lenbits=9,Pt={bits:Je.lenbits},Mt=ne(le,Je.lens,0,Je.nlen,Je.lencode,0,Je.work,Pt),Je.lenbits=Pt.bits,Mt){Qe.msg="invalid literal/lengths set",Je.mode=Xe;break}if(Je.distbits=6,Je.distcode=Je.distdyn,Pt={bits:Je.distbits},Mt=ne(oe,Je.lens,Je.nlen,Je.ndist,Je.distcode,0,Je.work,Pt),Je.distbits=Pt.bits,Mt){Qe.msg="invalid distances set",Je.mode=Xe;break}if(Je.mode=ze,$e===de)break inf_leave;case ze:Je.mode=Le;case Le:if(6<=ot&&258<=rt){Qe.next_out=lt,Qe.avail_out=rt,Qe.next_in=nt,Qe.avail_in=ot,Je.hold=st,Je.bits=dt,ie(Qe,ut),lt=Qe.next_out,at=Qe.output,rt=Qe.avail_out,nt=Qe.next_in,et=Qe.input,ot=Qe.avail_in,st=Je.hold,dt=Je.bits,Je.mode===Ie&&(Je.back=-1);break}for(Je.back=0;;){if(pt=Je.lencode[st&(1<<Je.lenbits)-1],_t=pt>>>24,bt=255&pt>>>16,yt=65535&pt,_t<=dt)break;if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}if(bt&&0==(240&bt)){for(xt=_t,wt=bt,kt=yt;;){if(pt=Je.lencode[kt+((st&(1<<xt+wt)-1)>>xt)],_t=pt>>>24,bt=255&pt>>>16,yt=65535&pt,xt+_t<=dt)break;if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}st>>>=xt,dt-=xt,Je.back+=xt}if(st>>>=_t,dt-=_t,Je.back+=_t,Je.length=yt,0===bt){Je.mode=Oe;break}if(32&bt){Je.back=-1,Je.mode=Ie;break}if(64&bt){Qe.msg="invalid literal/length code",Je.mode=Xe;break}Je.extra=15&bt,Je.mode=Ee;case Ee:if(Je.extra){for(It=Je.extra;dt<It;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}Je.length+=st&(1<<Je.extra)-1,st>>>=Je.extra,dt-=Je.extra,Je.back+=Je.extra}Je.was=Je.length,Je.mode=Ve;case Ve:for(;;){if(pt=Je.distcode[st&(1<<Je.distbits)-1],_t=pt>>>24,bt=255&pt>>>16,yt=65535&pt,_t<=dt)break;if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}if(0==(240&bt)){for(xt=_t,wt=bt,kt=yt;;){if(pt=Je.distcode[kt+((st&(1<<xt+wt)-1)>>xt)],_t=pt>>>24,bt=255&pt>>>16,yt=65535&pt,xt+_t<=dt)break;if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}st>>>=xt,dt-=xt,Je.back+=xt}if(st>>>=_t,dt-=_t,Je.back+=_t,64&bt){Qe.msg="invalid distance code",Je.mode=Xe;break}Je.offset=yt,Je.extra=15&bt,Je.mode=Fe;case Fe:if(Je.extra){for(It=Je.extra;dt<It;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}Je.offset+=st&(1<<Je.extra)-1,st>>>=Je.extra,dt-=Je.extra,Je.back+=Je.extra}if(Je.offset>Je.dmax){Qe.msg="invalid distance too far back",Je.mode=Xe;break}Je.mode=Ye;case Ye:if(0===rt)break inf_leave;if(mt=ut-rt,Je.offset>mt){if(mt=Je.offset-mt,mt>Je.whave&&Je.sane){Qe.msg="invalid distance too far back",Je.mode=Xe;break}mt>Je.wnext?(mt-=Je.wnext,ct=Je.wsize-mt):ct=Je.wnext-mt,mt>Je.length&&(mt=Je.length),gt=Je.window}else gt=at,ct=lt-Je.offset,mt=Je.length;mt>rt&&(mt=rt),rt-=mt,Je.length-=mt;do at[lt++]=gt[ct++];while(--mt);0===Je.length&&(Je.mode=Le);break;case Oe:if(0===rt)break inf_leave;at[lt++]=Je.length,rt--,Je.mode=Le;break;case Ue:if(Je.wrap){for(;32>dt;){if(0===ot)break inf_leave;ot--,st|=et[nt++]<<dt,dt+=8}if(ut-=rt,Qe.total_out+=ut,Je.total+=ut,ut&&(Qe.adler=Je.check=Je.flags?ae(Je.check,at,ut,lt-ut):te(Je.check,at,ut,lt-ut)),ut=rt,(Je.flags?st:L(st))!==Je.check){Qe.msg="incorrect data check",Je.mode=Xe;break}st=0,dt=0}Je.mode=Ne;case Ne:if(Je.wrap&&Je.flags){for(;32>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}if(st!==(4294967295&Je.total)){Qe.msg="incorrect length check",Je.mode=Xe;break}st=0,dt=0}Je.mode=qe;case qe:Mt=1;break inf_leave;case Xe:Mt=ce;break inf_leave;case Ge:return ge;case 32:default:return ue;}return(Qe.next_out=lt,Qe.avail_out=rt,Qe.next_in=nt,Qe.avail_in=ot,Je.hold=st,Je.bits=dt,(Je.wsize||ut!==Qe.avail_out&&Je.mode<Xe&&(Je.mode<Ue||$e!==se))&&J(Qe,Qe.output,Qe.next_out,ut-Qe.avail_out))?(Je.mode=Ge,ge):(ht-=Qe.avail_in,ut-=Qe.avail_out,Qe.total_in+=ht,Qe.total_out+=ut,Je.total+=ut,Je.wrap&&ut&&(Qe.adler=Je.check=Je.flags?ae(Je.check,at,ut,Qe.next_out-ut):te(Je.check,at,ut,Qe.next_out-ut)),Qe.data_type=Je.bits+(Je.last?64:0)+(Je.mode===Ie?128:0)+(Je.mode===ze||Je.mode===Ce?256:0),(0===ht&&0===ut||$e===se)&&Mt===he&&(Mt=-5),Mt)},T.inflateEnd=function(Qe){if(!Qe||!Qe.state)return ue;var $e=Qe.state;return $e.window&&($e.window=null),Qe.state=null,he},T.inflateGetHeader=function(Qe,$e){var Je;return Qe&&Qe.state?(Je=Qe.state,0==(2&Je.wrap))?ue:(Je.head=$e,$e.done=!1,he):ue},T.inflateSetDictionary=function(Qe,$e){var Je=$e.length,et,at,nt;return Qe&&Qe.state?(et=Qe.state,0!==et.wrap&&et.mode!==Pe)?ue:et.mode===Pe&&(at=1,at=te(at,$e,Je,0),at!==et.check)?ce:(nt=J(Qe,$e,Je,Je),nt)?(et.mode=Ge,ge):(et.havedict=1,he):ue},T.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":126,"./adler32":128,"./crc32":130,"./inffast":133,"./inftrees":135}],135:[function(I,R){"use strict";var T=I("../utils/common"),L=15,E=852,G=592,W=0,Z=1,Q=2,$=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],J=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],ee=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],te=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];R.exports=function(ie,ne,le,oe,se,de,he,ue){var ce=ue.bits,ge=0,pe=0,fe=0,_e=0,be=0,ye=0,xe=0,we=0,ke=0,ve=0,Se=null,Ce=0,Be=new T.Buf16(L+1),Re=new T.Buf16(L+1),Te=null,ze=0,Me,je,Pe,Ie,De,Ae,Le,Ee,Ve;for(ge=0;ge<=L;ge++)Be[ge]=0;for(pe=0;pe<oe;pe++)Be[ne[le+pe]]++;for(be=ce,_e=L;1<=_e&&0===Be[_e];_e--);if(be>_e&&(be=_e),0==_e)return se[de++]=20971520,se[de++]=20971520,ue.bits=1,0;for(fe=1;fe<_e&&0===Be[fe];fe++);for(be<fe&&(be=fe),we=1,ge=1;ge<=L;ge++)if(we<<=1,we-=Be[ge],0>we)return-1;if(0<we&&(ie===W||1!=_e))return-1;for(Re[1]=0,ge=1;ge<L;ge++)Re[ge+1]=Re[ge]+Be[ge];for(pe=0;pe<oe;pe++)0!==ne[le+pe]&&(he[Re[ne[le+pe]]++]=pe);if(ie===W?(Se=Te=he,Ae=19):ie===Z?(Se=$,Ce-=257,Te=J,ze-=257,Ae=256):(Se=ee,Te=te,Ae=-1),ve=0,pe=0,ge=fe,De=de,ye=be,xe=0,Pe=-1,ke=1<<be,Ie=ke-1,ie===Z&&ke>E||ie===Q&&ke>G)return 1;for(;;){Le=ge-xe,he[pe]<Ae?(Ee=0,Ve=he[pe]):he[pe]>Ae?(Ee=Te[ze+he[pe]],Ve=Se[Ce+he[pe]]):(Ee=96,Ve=0),Me=1<<ge-xe,je=1<<ye,fe=je;do je-=Me,se[De+(ve>>xe)+je]=0|(Le<<24|Ee<<16|Ve);while(0!==je);for(Me=1<<ge-1;ve&Me;)Me>>=1;if(0===Me?ve=0:(ve&=Me-1,ve+=Me),pe++,0==--Be[ge]){if(ge==_e)break;ge=ne[le+he[pe]]}if(ge>be&&(ve&Ie)!==Pe){for(0==xe&&(xe=be),De+=fe,ye=ge-xe,we=1<<ye;ye+xe<_e&&(we-=Be[ye+xe],!(0>=we));)ye++,we<<=1;if(ke+=1<<ye,ie===Z&&ke>E||ie===Q&&ke>G)return 1;Pe=ve&Ie,se[Pe]=0|(be<<24|ye<<16|De-de)}}return 0!=ve&&(se[De+ve]=0|(4194304|ge-xe<<24)),ue.bits=be,0}},{"../utils/common":126}],136:[function(I,R){"use strict";R.exports={"0":"","1":"stream end","2":"need dictionary","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],137:[function(I,R,T){"use strict";function L(Ze){for(var Ke=Ze.length;0<=--Ke;)Ze[Ke]=0}function E(Ze,Ke,Qe,$e,Je){this.static_tree=Ze,this.extra_bits=Ke,this.extra_base=Qe,this.elems=$e,this.max_length=Je,this.has_stree=Ze&&Ze.length}function G(Ze,Ke){this.dyn_tree=Ze,this.max_code=0,this.stat_desc=Ke}function W(Ze){return 256>Ze?Oe[Ze]:Oe[256+(Ze>>>7)]}function Z(Ze,Ke){Ze.pending_buf[Ze.pending++]=255&Ke,Ze.pending_buf[Ze.pending++]=255&Ke>>>8}function Q(Ze,Ke,Qe){Ze.bi_valid>Ce-Qe?(Ze.bi_buf|=65535&Ke<<Ze.bi_valid,Z(Ze,Ze.bi_buf),Ze.bi_buf=Ke>>Ce-Ze.bi_valid,Ze.bi_valid+=Qe-Ce):(Ze.bi_buf|=65535&Ke<<Ze.bi_valid,Ze.bi_valid+=Qe)}function $(Ze,Ke,Qe){Q(Ze,Qe[2*Ke],Qe[2*Ke+1])}function J(Ze,Ke){var Qe=0;do Qe|=1&Ze,Ze>>>=1,Qe<<=1;while(0<--Ke);return Qe>>>1}function ee(Ze){16===Ze.bi_valid?(Z(Ze,Ze.bi_buf),Ze.bi_buf=0,Ze.bi_valid=0):8<=Ze.bi_valid&&(Ze.pending_buf[Ze.pending++]=255&Ze.bi_buf,Ze.bi_buf>>=8,Ze.bi_valid-=8)}function te(Ze,Ke){var Qe=Ke.dyn_tree,$e=Ke.max_code,Je=Ke.stat_desc.static_tree,et=Ke.stat_desc.has_stree,at=Ke.stat_desc.extra_bits,nt=Ke.stat_desc.extra_base,lt=Ke.stat_desc.max_length,ot,rt,st,dt,ht,ut,mt=0;for(dt=0;dt<=Se;dt++)Ze.bl_count[dt]=0;for(Qe[2*Ze.heap[Ze.heap_max]+1]=0,ot=Ze.heap_max+1;ot<De;ot++)(rt=Ze.heap[ot],dt=Qe[2*Qe[2*rt+1]+1]+1,dt>lt&&(dt=lt,mt++),Qe[2*rt+1]=dt,!(rt>$e))&&(Ze.bl_count[dt]++,ht=0,rt>=nt&&(ht=at[rt-nt]),ut=Qe[2*rt],Ze.opt_len+=ut*(dt+ht),et&&(Ze.static_len+=ut*(Je[2*rt+1]+ht)));if(0!=mt){do{for(dt=lt-1;0===Ze.bl_count[dt];)dt--;Ze.bl_count[dt]--,Ze.bl_count[dt+1]+=2,Ze.bl_count[lt]--,mt-=2}while(0<mt);for(dt=lt;0!==dt;dt--)for(rt=Ze.bl_count[dt];0!==rt;)(st=Ze.heap[--ot],!(st>$e))&&(Qe[2*st+1]!==dt&&(Ze.opt_len+=(dt-Qe[2*st+1])*Qe[2*st],Qe[2*st+1]=dt),rt--)}}function ae(Ze,Ke,Qe){var $e=Array(Se+1),Je=0,et,at;for(et=1;et<=Se;et++)$e[et]=Je=Je+Qe[et-1]<<1;for(at=0;at<=Ke;at++){var nt=Ze[2*at+1];0!==nt&&(Ze[2*at]=J($e[nt]++,nt))}}function ie(){var Ze,Ke,Qe,$e,Je,et=Array(Se+1);for(Qe=0,$e=0;$e<ve-1;$e++)for(Ne[$e]=Qe,Ze=0;Ze<1<<ze[$e];Ze++)Ue[Qe++]=$e;for(Ue[Qe-1]=$e,Je=0,$e=0;16>$e;$e++)for(qe[$e]=Je,Ze=0;Ze<1<<Le[$e];Ze++)Oe[Je++]=$e;for(Je>>=7;$e<Pe;$e++)for(qe[$e]=Je<<7,Ze=0;Ze<1<<Le[$e]-7;Ze++)Oe[256+Je++]=$e;for(Ke=0;Ke<=Se;Ke++)et[Ke]=0;for(Ze=0;143>=Ze;)Fe[2*Ze+1]=8,Ze++,et[8]++;for(;255>=Ze;)Fe[2*Ze+1]=9,Ze++,et[9]++;for(;279>=Ze;)Fe[2*Ze+1]=7,Ze++,et[7]++;for(;287>=Ze;)Fe[2*Ze+1]=8,Ze++,et[8]++;for(ae(Fe,je+1,et),Ze=0;Ze<Pe;Ze++)Ye[2*Ze+1]=5,Ye[2*Ze]=J(Ze,5);Xe=new E(Fe,ze,Me+1,je,Se),Ge=new E(Ye,Le,0,Pe,Se),He=new E([],Ee,0,Ie,7)}function ne(Ze){var Ke;for(Ke=0;Ke<je;Ke++)Ze.dyn_ltree[2*Ke]=0;for(Ke=0;Ke<Pe;Ke++)Ze.dyn_dtree[2*Ke]=0;for(Ke=0;Ke<Ie;Ke++)Ze.bl_tree[2*Ke]=0;Ze.dyn_ltree[2*Ae]=1,Ze.opt_len=Ze.static_len=0,Ze.last_lit=Ze.matches=0}function le(Ze){8<Ze.bi_valid?Z(Ze,Ze.bi_buf):0<Ze.bi_valid&&(Ze.pending_buf[Ze.pending++]=Ze.bi_buf),Ze.bi_buf=0,Ze.bi_valid=0}function oe(Ze,Ke,Qe,$e){le(Ze),$e&&(Z(Ze,Qe),Z(Ze,~Qe)),ye.arraySet(Ze.pending_buf,Ze.window,Ke,Qe,Ze.pending),Ze.pending+=Qe}function se(Ze,Ke,Qe,$e){var Je=2*Ke,et=2*Qe;return Ze[Je]<Ze[et]||Ze[Je]===Ze[et]&&$e[Ke]<=$e[Qe]}function de(Ze,Ke,Qe){for(var $e=Ze.heap[Qe],Je=Qe<<1;Je<=Ze.heap_len&&(Je<Ze.heap_len&&se(Ke,Ze.heap[Je+1],Ze.heap[Je],Ze.depth)&&Je++,!se(Ke,$e,Ze.heap[Je],Ze.depth));)Ze.heap[Qe]=Ze.heap[Je],Qe=Je,Je<<=1;Ze.heap[Qe]=$e}function he(Ze,Ke,Qe){var $e,Je,et=0,at,nt;if(0!==Ze.last_lit)do $e=Ze.pending_buf[Ze.d_buf+2*et]<<8|Ze.pending_buf[Ze.d_buf+2*et+1],Je=Ze.pending_buf[Ze.l_buf+et],et++,0===$e?$(Ze,Je,Ke):(at=Ue[Je],$(Ze,at+Me+1,Ke),nt=ze[at],0!==nt&&(Je-=Ne[at],Q(Ze,Je,nt)),$e--,at=W($e),$(Ze,at,Qe),nt=Le[at],0!==nt&&($e-=qe[at],Q(Ze,$e,nt)));while(et<Ze.last_lit);$(Ze,Ae,Ke)}function ue(Ze,Ke){var Qe=Ke.dyn_tree,$e=Ke.stat_desc.static_tree,Je=Ke.stat_desc.has_stree,et=Ke.stat_desc.elems,at,nt,lt=-1,ot;for(Ze.heap_len=0,Ze.heap_max=De,at=0;at<et;at++)0===Qe[2*at]?Qe[2*at+1]=0:(Ze.heap[++Ze.heap_len]=lt=at,Ze.depth[at]=0);for(;2>Ze.heap_len;)ot=Ze.heap[++Ze.heap_len]=2>lt?++lt:0,Qe[2*ot]=1,Ze.depth[ot]=0,Ze.opt_len--,Je&&(Ze.static_len-=$e[2*ot+1]);for(Ke.max_code=lt,at=Ze.heap_len>>1;1<=at;at--)de(Ze,Qe,at);ot=et;do at=Ze.heap[1],Ze.heap[1]=Ze.heap[Ze.heap_len--],de(Ze,Qe,1),nt=Ze.heap[1],Ze.heap[--Ze.heap_max]=at,Ze.heap[--Ze.heap_max]=nt,Qe[2*ot]=Qe[2*at]+Qe[2*nt],Ze.depth[ot]=(Ze.depth[at]>=Ze.depth[nt]?Ze.depth[at]:Ze.depth[nt])+1,Qe[2*at+1]=Qe[2*nt+1]=ot,Ze.heap[1]=ot++,de(Ze,Qe,1);while(2<=Ze.heap_len);Ze.heap[--Ze.heap_max]=Ze.heap[1],te(Ze,Ke),ae(Qe,lt,Ze.bl_count)}function ce(Ze,Ke,Qe){var $e,Je=-1,et,at=Ke[1],nt=0,lt=7,ot=4;for(0===at&&(lt=138,ot=3),Ke[2*(Qe+1)+1]=65535,$e=0;$e<=Qe;$e++){if(et=at,at=Ke[2*($e+1)+1],++nt<lt&&et===at)continue;else nt<ot?Ze.bl_tree[2*et]+=nt:0===et?10>=nt?Ze.bl_tree[2*Re]++:Ze.bl_tree[2*Te]++:(et!==Je&&Ze.bl_tree[2*et]++,Ze.bl_tree[2*Be]++);nt=0,Je=et,0===at?(lt=138,ot=3):et===at?(lt=6,ot=3):(lt=7,ot=4)}}function ge(Ze,Ke,Qe){var $e,Je=-1,et,at=Ke[1],nt=0,lt=7,ot=4;for(0===at&&(lt=138,ot=3),$e=0;$e<=Qe;$e++){if(et=at,at=Ke[2*($e+1)+1],++nt<lt&&et===at)continue;else if(nt<ot)do $(Ze,et,Ze.bl_tree);while(0!=--nt);else 0===et?10>=nt?($(Ze,Re,Ze.bl_tree),Q(Ze,nt-3,3)):($(Ze,Te,Ze.bl_tree),Q(Ze,nt-11,7)):(et!==Je&&($(Ze,et,Ze.bl_tree),nt--),$(Ze,Be,Ze.bl_tree),Q(Ze,nt-3,2));nt=0,Je=et,0===at?(lt=138,ot=3):et===at?(lt=6,ot=3):(lt=7,ot=4)}}function pe(Ze){var Ke;for(ce(Ze,Ze.dyn_ltree,Ze.l_desc.max_code),ce(Ze,Ze.dyn_dtree,Ze.d_desc.max_code),ue(Ze,Ze.bl_desc),Ke=Ie-1;3<=Ke&&0===Ze.bl_tree[2*Ve[Ke]+1];Ke--);return Ze.opt_len+=3*(Ke+1)+5+5+4,Ke}function fe(Ze,Ke,Qe,$e){var Je;for(Q(Ze,Ke-257,5),Q(Ze,Qe-1,5),Q(Ze,$e-4,4),Je=0;Je<$e;Je++)Q(Ze,Ze.bl_tree[2*Ve[Je]+1],3);ge(Ze,Ze.dyn_ltree,Ke-1),ge(Ze,Ze.dyn_dtree,Qe-1)}function _e(Ze){var Ke=4093624447,Qe;for(Qe=0;31>=Qe;Qe++,Ke>>>=1)if(1&Ke&&0!==Ze.dyn_ltree[2*Qe])return xe;if(0!==Ze.dyn_ltree[18]||0!==Ze.dyn_ltree[20]||0!==Ze.dyn_ltree[26])return we;for(Qe=32;Qe<Me;Qe++)if(0!==Ze.dyn_ltree[2*Qe])return we;return xe}function be(Ze,Ke,Qe,$e){Q(Ze,0+($e?1:0),3),oe(Ze,Ke,Qe,!0)}var ye=I("../utils/common"),xe=0,we=1,ke=1,ve=29,Me=256,je=Me+1+ve,Pe=30,Ie=19,De=2*je+1,Se=15,Ce=16,Ae=256,Be=16,Re=17,Te=18,ze=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Le=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ee=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ve=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Fe=Array(2*(je+2));L(Fe);var Ye=Array(2*Pe);L(Ye);var Oe=Array(512);L(Oe);var Ue=Array(256);L(Ue);var Ne=Array(ve);L(Ne);var qe=Array(Pe);L(qe);var Xe,Ge,He,We=!1;T._tr_init=function(Ke){We||(ie(),We=!0),Ke.l_desc=new G(Ke.dyn_ltree,Xe),Ke.d_desc=new G(Ke.dyn_dtree,Ge),Ke.bl_desc=new G(Ke.bl_tree,He),Ke.bi_buf=0,Ke.bi_valid=0,ne(Ke)},T._tr_stored_block=be,T._tr_flush_block=function(Ke,Qe,$e,Je){var et,at,nt=0;0<Ke.level?(2===Ke.strm.data_type&&(Ke.strm.data_type=_e(Ke)),ue(Ke,Ke.l_desc),ue(Ke,Ke.d_desc),nt=pe(Ke),et=Ke.opt_len+3+7>>>3,at=Ke.static_len+3+7>>>3,at<=et&&(et=at)):et=at=$e+5,$e+4<=et&&-1!==Qe?be(Ke,Qe,$e,Je):4===Ke.strategy||at===et?(Q(Ke,(ke<<1)+(Je?1:0),3),he(Ke,Fe,Ye)):(Q(Ke,4+(Je?1:0),3),fe(Ke,Ke.l_desc.max_code+1,Ke.d_desc.max_code+1,nt+1),he(Ke,Ke.dyn_ltree,Ke.dyn_dtree)),ne(Ke),Je&&le(Ke)},T._tr_tally=function(Ke,Qe,$e){return Ke.pending_buf[Ke.d_buf+2*Ke.last_lit]=255&Qe>>>8,Ke.pending_buf[Ke.d_buf+2*Ke.last_lit+1]=255&Qe,Ke.pending_buf[Ke.l_buf+Ke.last_lit]=255&$e,Ke.last_lit++,0===Qe?Ke.dyn_ltree[2*$e]++:(Ke.matches++,Qe--,Ke.dyn_ltree[2*(Ue[$e]+Me+1)]++,Ke.dyn_dtree[2*W(Qe)]++),Ke.last_lit===Ke.lit_bufsize-1},T._tr_align=function(Ke){Q(Ke,ke<<1,3),$(Ke,Ae,Fe),ee(Ke)}},{"../utils/common":126}],138:[function(I,R){"use strict";R.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],139:[function(I,R){"use strict";var T=I("./tiffDecoder");R.exports=function(E,G){var W=new T(E,G);return W.decode(G)}},{"./tiffDecoder":146}],140:[function(I,R){"use strict";var T={standard:I("./tags/standard"),exif:I("./tags/exif"),gps:I("./tags/gps")};class L{constructor(E){if(!E)throw new Error("missing kind");this.data=null,this.fields=new Map,this.kind=E,this._map=null}get(E){if("number"==typeof E)return this.fields.get(E);if("string"==typeof E)return this.fields.get(T[this.kind].tagsByName[E]);throw new Error("expected a number or string")}get map(){if(!this._map){this._map={};var E=T[this.kind].tagsById;for(var G of this.fields.keys())E[G]&&(this._map[E[G]]=this.fields.get(G))}return this._map}}R.exports=L},{"./tags/exif":143,"./tags/gps":144,"./tags/standard":145}],141:[function(I,R,T){"use strict";function L(G,W){if(1===W)return G.readUint8();var Z=new Uint8Array(W);for(var Q=0;Q<W;Q++)Z[Q]=G.readUint8();return Z}var E=new Map([[1,[1,L]],[2,[1,function(W,Z){var Q=[],$="";for(var J=0;J<Z;J++){var ee=String.fromCharCode(W.readUint8());"\0"===ee?(Q.push($),$=""):$+=ee}return 1===Q.length?Q[0]:Q}]],[3,[2,function(W,Z){if(1===Z)return W.readUint16();var Q=new Uint16Array(Z);for(var $=0;$<Z;$++)Q[$]=W.readUint16();return Q}]],[4,[4,function(W,Z){if(1===Z)return W.readUint32();var Q=new Uint32Array(Z);for(var $=0;$<Z;$++)Q[$]=W.readUint32();return Q}]],[5,[8,function(W,Z){if(1===Z)return W.readUint32()/W.readUint32();var Q=Array(Z);for(var $=0;$<Z;$++)Q[$]=W.readUint32()/W.readUint32();return Q}]],[6,[1,function(W,Z){if(1===Z)return W.readInt8();var Q=new Int8Array(Z);for(var $=0;$<Z;$++)Q[$]=W.readInt8();return Q}]],[7,[1,L]],[8,[2,function(W,Z){if(1===Z)return W.readInt16();var Q=new Int16Array(Z);for(var $=0;$<Z;$++)Q[$]=W.readInt16();return Q}]],[9,[4,function(W,Z){if(1===Z)return W.readInt32();var Q=new Int32Array(Z);for(var $=0;$<Z;$++)Q[$]=W.readInt32();return Q}]],[10,[8,function(W,Z){if(1===Z)return W.readInt32()/W.readInt32();var Q=Array(Z);for(var $=0;$<Z;$++)Q[$]=W.readInt32()/W.readInt32();return Q}]],[11,[4,function(W,Z){if(1===Z)return W.readFloat32();var Q=new Float32Array(Z);for(var $=0;$<Z;$++)Q[$]=W.readFloat32();return Q}]],[12,[8,function(W,Z){if(1===Z)return W.readFloat64();var Q=new Float64Array(Z);for(var $=0;$<Z;$++)Q[$]=W.readFloat64();return Q}]]]);T.getByteLength=function(G,W){return E.get(G)[0]*W},T.readData=function(G,W,Z){return E.get(W)[1](G,Z)}},{}],142:[function(I,R,T){arguments[4][40][0].apply(T,arguments)},{"./decode":139,dup:40}],143:[function(I,R){"use strict";var T={"33434":"ExposureTime","33437":"FNumber","34850":"ExposureProgram","34852":"SpectralSensitivity","34855":"ISOSpeedRatings","34856":"OECF","34864":"SensitivityType","34865":"StandardOutputSensitivity","34866":"RecommendedExposureIndex","34867":"ISOSpeed","34868":"ISOSpeedLatitudeyyy","34869":"ISOSpeedLatitudezzz","36864":"ExifVersion","36867":"DateTimeOriginal","36868":"DateTimeDigitized","37121":"ComponentsConfiguration","37122":"CompressedBitsPerPixel","37377":"ShutterSpeedValue","37378":"ApertureValue","37379":"BrightnessValue","37380":"ExposureBiasValue","37381":"MaxApertureValue","37382":"SubjectDistance","37383":"MeteringMode","37384":"LightSource","37385":"Flash","37386":"FocalLength","37396":"SubjectArea","37500":"MakerNote","37510":"UserComment","37520":"SubsecTime","37521":"SubsecTimeOriginal","37522":"SubsecTimeDigitized","40960":"FlashpixVersion","40961":"ColorSpace","40962":"PixelXDimension","40963":"PixelYDimension","40964":"RelatedSoundFile","41483":"FlashEnergy","41484":"SpatialFrequencyResponse","41486":"FocalPlaneXResolution","41487":"FocalPlaneYResolution","41488":"FocalPlaneResolutionUnit","41492":"SubjectLocation","41493":"ExposureIndex","41495":"SensingMethod","41728":"FileSource","41729":"SceneType","41730":"CFAPattern","41985":"CustomRendered","41986":"ExposureMode","41987":"WhiteBalance","41988":"DigitalZoomRatio","41989":"FocalLengthIn35mmFilm","41990":"SceneCaptureType","41991":"GainControl","41992":"Contrast","41993":"Saturation","41994":"Sharpness","41995":"DeviceSettingDescription","41996":"SubjectDistanceRange","42016":"ImageUniqueID","42032":"CameraOwnerName","42033":"BodySerialNumber","42034":"LensSpecification","42035":"LensMake","42036":"LensModel","42037":"LensSerialNumber","42240":"Gamma"},L={};for(var E in T)L[T[E]]=E;R.exports={tagsById:T,tagsByName:L}},{}],144:[function(I,R){"use strict";var T={"0":"GPSVersionID","1":"GPSLatitudeRef","2":"GPSLatitude","3":"GPSLongitudeRef","4":"GPSLongitude","5":"GPSAltitudeRef","6":"GPSAltitude","7":"GPSTimeStamp","8":"GPSSatellites","9":"GPSStatus","10":"GPSMeasureMode","11":"GPSDOP","12":"GPSSpeedRef","13":"GPSSpeed","14":"GPSTrackRef","15":"GPSTrack","16":"GPSImgDirectionRef","17":"GPSImgDirection","18":"GPSMapDatum","19":"GPSDestLatitudeRef","20":"GPSDestLatitude","21":"GPSDestLongitudeRef","22":"GPSDestLongitude","23":"GPSDestBearingRef","24":"GPSDestBearing","25":"GPSDestDistanceRef","26":"GPSDestDistance","27":"GPSProcessingMethod","28":"GPSAreaInformation","29":"GPSDateStamp","30":"GPSDifferential","31":"GPSHPositioningError"},L={};for(var E in T)L[T[E]]=E;R.exports={tagsById:T,tagsByName:L}},{}],145:[function(I,R){"use strict";var T={"254":"NewSubfileType","255":"SubfileType","256":"ImageWidth","257":"ImageLength","258":"BitsPerSample","259":"Compression","262":"PhotometricInterpretation","263":"Threshholding","264":"CellWidth","265":"CellLength","266":"FillOrder","269":"DocumentName","270":"ImageDescription","271":"Make","272":"Model","273":"StripOffsets","274":"Orientation","277":"SamplesPerPixel","278":"RowsPerStrip","279":"StripByteCounts","280":"MinSampleValue","281":"MaxSampleValue","282":"XResolution","283":"YResolution","284":"PlanarConfiguration","285":"PageName","286":"XPosition","287":"YPosition","288":"FreeOffsets","289":"FreeByteCounts","290":"GrayResponseUnit","291":"GrayResponseCurve","292":"T4Options","293":"T6Options","296":"ResolutionUnit","297":"PageNumber","301":"TransferFunction","305":"Software","306":"DateTime","315":"Artist","316":"HostComputer","317":"Predictor","318":"WhitePoint","319":"PrimaryChromaticities","320":"ColorMap","321":"HalftoneHints","322":"TileWidth","323":"TileLength","324":"TileOffsets","325":"TileByteCounts","326":"BadFaxLines","327":"CleanFaxData","328":"ConsecutiveBadFaxLines","330":"SubIFDs","332":"InkSet","333":"InkNames","334":"NumberOfInks","336":"DotRange","337":"TargetPrinter","338":"ExtraSamples","339":"SampleFormat","340":"SMinSampleValue","341":"SMaxSampleValue","342":"TransferRange","343":"ClipPath","344":"XClipPathUnits","345":"YClipPathUnits","346":"Indexed","347":"JPEGTables","351":"OPIProxy","400":"GlobalParametersIFD","401":"ProfileType","402":"FaxProfile","403":"CodingMethods","404":"VersionYear","405":"ModeNumber","433":"Decode","434":"DefaultImageColor","512":"JPEGProc","513":"JPEGInterchangeFormat","514":"JPEGInterchangeFormatLength","515":"JPEGRestartInterval","517":"JPEGLosslessPredictors","518":"JPEGPointTransforms","519":"JPEGQTables","520":"JPEGDCTables","521":"JPEGACTables","529":"YCbCrCoefficients","530":"YCbCrSubSampling","531":"YCbCrPositioning","532":"ReferenceBlackWhite","559":"StripRowCounts","700":"XMP","32781":"ImageID","32932":"WangAnnotatio","33432":"Copyright","33445":"MDFileTag","33446":"MDScalePixel","33447":"MDColorTable","33448":"MDLabName","33449":"MDSampleInfo","33450":"MDPrepDate","33451":"MDPrepTime","33452":"MDFileUnits","33550":"ModelPixelScaleTag","33723":"IPTC","33918":"INGRPacketDataTag","33919":"INGRFlagRegisters","33920":"IrasBTransformationMatrix","33922":"ModelTiepointTag","34264":"ModelTransformationTag","34377":"Photoshop","34665":"ExifIFD","34675":"ICCProfile","34732":"ImageLayer","34735":"GeoKeyDirectoryTag","34736":"GeoDoubleParamsTag","34737":"GeoAsciiParamsTag","34853":"GPSIFD","34908":"HylaFAXFaxRecvParams","34909":"HylaFAXFaxSubAddress","34910":"HylaFAXFaxRecvTime","37724":"ImageSourceData","40965":"InteroperabilityIFD","42112":"GDAL_METADATA","42113":"GDAL_NODATA","50215":"OceScanjobDescription","50216":"OceApplicationSelector","50217":"OceIdentificationNumber","50218":"OceImageLogicCharacteristics","50706":"DNGVersion","50707":"DNGBackwardVersion","50708":"UniqueCameraModel","50709":"LocalizedCameraModel","50710":"CFAPlaneColor","50711":"CFALayout","50712":"LinearizationTable","50713":"BlackLevelRepeatDim","50714":"BlackLevel","50715":"BlackLevelDeltaH","50716":"BlackLevelDeltaV","50717":"WhiteLevel","50718":"DefaultScale","50719":"DefaultCropOrigin","50720":"DefaultCropSize","50721":"ColorMatrix1","50722":"ColorMatrix2","50723":"CameraCalibration1","50724":"CameraCalibration2","50725":"ReductionMatrix1","50726":"ReductionMatrix2","50727":"AnalogBalance","50728":"AsShotNeutral","50729":"AsShotWhiteXY","50730":"BaselineExposure","50731":"BaselineNoise","50732":"BaselineSharpness","50733":"BayerGreenSplit","50734":"LinearResponseLimit","50735":"CameraSerialNumber","50736":"LensInfo","50737":"ChromaBlurRadius","50738":"AntiAliasStrength","50740":"DNGPrivateData","50741":"MakerNoteSafety","50778":"CalibrationIlluminant1","50779":"CalibrationIlluminant2","50780":"BestQualityScale","50784":"AliasLayerMetadata"},L={};for(var E in T)L[T[E]]=E;R.exports={tagsById:T,tagsByName:L}},{}],146:[function(I,R){"use strict";function T(ae,ie,ne,le){if(8===ne)return new Uint8Array(ae*ie);return 16===ne?new Uint16Array(ae*ie):32===ne&&3===le?new Float32Array(ae*ie):W("bit depth / sample format",ne+" / "+le)}function L(ae,ie,ne,le){for(var oe=0;oe<le;oe++)ae[ne++]=ie.getUint8(oe);return ne}function E(ae,ie,ne,le,oe){for(var se=0;se<2*le;se+=2)ae[ne++]=ie.getUint16(se,oe);return ne}function G(ae,ie,ne,le,oe){for(var se=0;se<4*le;se+=4)ae[ne++]=ie.getFloat32(se,oe);return ne}function W(ae,ie){throw new Error("Unsupported "+ae+": "+ie)}function Z(ae){if(ae.length){var ie=ae;ae=ie[0];for(var ne=0;ne<ie.length;ne++)ie[ne]!==ae&&W("bit depth",ie)}return ae}var Q=I("iobuffer"),$=I("./ifd"),J=I("./tiffIfd"),ee=I("./ifdValue"),te={ignoreImageData:!1,onlyFirst:!1};R.exports=class extends Q{constructor(ie,ne){super(ie,ne),this._nextIFD=0}decode(ie){ie=Object.assign({},te,ie);var ne=[];for(this.decodeHeader();this._nextIFD;)if(ne.push(this.decodeIFD(ie)),ie.onlyFirst)return ne[0];return ne}decodeHeader(){var ie=this.readUint16();if(18761===ie)this.setLittleEndian();else if(19789===ie)this.setBigEndian();else throw new Error("invalid byte order: 0x"+ie.toString(16));if(ie=this.readUint16(),42!==ie)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(ie){this.seek(this._nextIFD);var ne;ne=ie.kind?new $(ie.kind):new J;var le=this.readUint16();for(var oe=0;oe<le;oe++)this.decodeIFDEntry(ne);return ie.ignoreImageData||this.decodeImageData(ne),this._nextIFD=this.readUint32(),ne}decodeIFDEntry(ie){var ne=this.offset,le=this.readUint16(),oe=this.readUint16(),se=this.readUint32();if(1>oe||12<oe)return void this.skip(4);var de=ee.getByteLength(oe,se);4<de&&this.seek(this.readUint32());var he=ee.readData(this,oe,se);if(ie.fields.set(le,he),34665===le||34853===le){var ue=this.offset,ce=void 0;34665===le?ce="exif":34853===le&&(ce="gps"),this._nextIFD=he,ie[ce]=this.decodeIFD({kind:ce,ignoreImageData:!0}),this.offset=ue}this.seek(ne),this.skip(12)}decodeImageData(ie){var ne=ie.orientation;switch(ne&&1!==ne&&W("orientation",ne),ie.type){case 1:case 2:this.readStripData(ie);break;default:W("image type",ie.type);}}readStripData(ie){var ne=ie.width,le=ie.height,oe=Z(ie.bitsPerSample),se=ie.sampleFormat,de=ne*le,he=T(de,1,oe,se),ue=ie.compression,ce=ie.rowsPerStrip,ge=ce*ne,pe=ie.stripOffsets,fe=ie.stripByteCounts,_e=0;for(var be=0;be<pe.length;be++){var ye=this.getStripData(ue,pe[be],fe[be]),xe=de>ge?ge:de;de-=xe,8===oe?_e=L(he,ye,_e,xe):16===oe?_e=E(he,ye,_e,xe,this.isLittleEndian()):32===oe&&3===se?_e=G(he,ye,_e,xe,this.isLittleEndian()):W("bitDepth",oe)}ie.data=he}getStripData(ie,ne,le){switch(ie){case 1:return new DataView(this.buffer,ne,le);case 2:case 32773:return W("Compression",ie);default:throw new Error("invalid compression: "+ie);}}}},{"./ifd":140,"./ifdValue":141,"./tiffIfd":147,iobuffer:52}],147:[function(I,R){"use strict";function T(W){return"number"==typeof W?[W]:W}var L=I("./ifd"),E=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class G extends L{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){var W=new Date,Z=E.exec(this.dateTime);return W.setFullYear(Z[1],Z[2]-1,Z[3]),W.setHours(Z[4],Z[5],Z[6]),W}get newSubfileType(){return this.get(254)}get imageWidth(){return this.get(256)}get imageLength(){return this.get(257)}get bitsPerSample(){return this.get(258)}get compression(){return this.get(259)||1}get type(){return this.get(262)}get fillOrder(){return this.get(266)||1}get documentName(){return this.get(269)}get imageDescription(){return this.get(270)}get stripOffsets(){return T(this.get(273))}get orientation(){return this.get(274)}get samplesPerPixel(){return this.get(277)}get rowsPerStrip(){return this.get(278)}get stripByteCounts(){return T(this.get(279))}get minSampleValue(){return this.get(280)||0}get maxSampleValue(){return this.get(281)||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get(282)}get yResolution(){return this.get(283)}get planarConfiguration(){return this.get(284)||1}get resolutionUnit(){return this.get(296)||2}get dateTime(){return this.get(306)}get predictor(){return this.get(317)||1}get sampleFormat(){return this.get(339)||1}get sMinSampleValue(){return this.get(340)||this.minSampleValue}get sMaxSampleValue(){return this.get(341)||this.maxSampleValue}}R.exports=G},{"./ifd":140}],148:[function(I,R,T){(function(L){"use strict";(function(E){function G(ce){for(var ge=[],pe=0,fe=ce.length,_e,be;pe<fe;)_e=ce.charCodeAt(pe++),55296<=_e&&56319>=_e&&pe<fe?(be=ce.charCodeAt(pe++),56320==(64512&be)?ge.push(((1023&_e)<<10)+(1023&be)+65536):(ge.push(_e),pe--)):ge.push(_e);return ge}function W(ce){for(var ge=ce.length,pe=-1,_e="",fe;++pe<ge;)fe=ce[pe],65535<fe&&(fe-=65536,_e+=ne(55296|1023&fe>>>10),fe=56320|1023&fe),_e+=ne(fe);return _e}function Z(ce){if(55296<=ce&&57343>=ce)throw Error("Lone surrogate U+"+ce.toString(16).toUpperCase()+" is not a scalar value")}function Q(ce,ge){return ne(128|63&ce>>ge)}function $(ce){if(0==(4294967168&ce))return ne(ce);var ge="";return 0==(4294965248&ce)?ge=ne(192|31&ce>>6):0==(4294901760&ce)?(Z(ce),ge=ne(224|15&ce>>12),ge+=Q(ce,6)):0==(4292870144&ce)&&(ge=ne(240|7&ce>>18),ge+=Q(ce,12),ge+=Q(ce,6)),ge+=ne(128|63&ce),ge}function J(){if(se>=oe)throw Error("Invalid byte index");var ce=255&le[se];if(se++,128==(192&ce))return 63&ce;throw Error("Invalid continuation byte")}function ee(){var ce,ge,pe,fe,_e;if(se>oe)throw Error("Invalid byte index");if(se==oe)return!1;if(ce=255&le[se],se++,0==(128&ce))return ce;if(192==(224&ce)){if(ge=J(),_e=(31&ce)<<6|ge,128<=_e)return _e;throw Error("Invalid continuation byte")}if(224==(240&ce)){if(ge=J(),pe=J(),_e=(15&ce)<<12|ge<<6|pe,2048<=_e)return Z(_e),_e;throw Error("Invalid continuation byte")}if(240==(248&ce)&&(ge=J(),pe=J(),fe=J(),_e=(7&ce)<<18|ge<<12|pe<<6|fe,65536<=_e&&1114111>=_e))return _e;throw Error("Invalid UTF-8 detected")}var te="object"==typeof T&&T,ae="object"==typeof R&&R&&R.exports==te&&R,ie="object"==typeof L&&L;(ie.global===ie||ie.window===ie)&&(E=ie);var ne=String.fromCharCode,le,oe,se,de={version:"2.1.2",encode:function(ge){for(var pe=G(ge),fe=pe.length,_e=-1,ye="",be;++_e<fe;)be=pe[_e],ye+=$(be);return ye},decode:function(ge){le=G(ge),oe=le.length,se=0;for(var pe=[],fe;!1!==(fe=ee());)pe.push(fe);return W(pe)}};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return de});else if(!(te&&!te.nodeType))E.utf8=de;else if(ae)ae.exports=de;else{var he={}.hasOwnProperty;for(var ue in de)he.call(de,ue)&&(te[ue]=de[ue])}})(void 0)}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],149:[function(I,R){"use strict";function T(G,W){if("string"!=typeof G&&"function"!=typeof G)throw new TypeError("func argument must be a function");if(void 0===W&&(W={}),"object"!=typeof W||null===W)throw new TypeError("options argument must be an object");this._workerCode=G.toString(),this._numWorkers=void 0===W.maxWorkers||"auto"===W.maxWorkers?Math.min(E-1,1):0<W.maxWorkers?Math.min(W.maxWorkers,E):E,this._workers=new Map,this._timeout=W.timeout||0,this._terminateOnError=!!W.terminateOnError;var Z=W.deps;"string"==typeof Z&&(Z=[Z]),Array.isArray(Z)||(Z=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._init(Z)}var L=I("./workerTemplate"),E=navigator.hardwareConcurrency||1;Function.prototype,T.prototype._init=function(G){var W=L.newWorkerURL(this._workerCode,G);for(var Z=0;Z<this._numWorkers;Z++){var Q=new Worker(W);Q.onmessage=this._onmessage.bind(this,Q),Q.onerror=this._onerror.bind(this,Q),Q.running=!1,Q.id=Z,this._workers.set(Q,null)}URL.revokeObjectURL(W)},T.prototype._onerror=function(G,W){if(!this._terminated){this._working--,G.running=!1;var Z=this._workers.get(G);Z&&Z[1](W.message),this._workers.set(G,null),this._terminateOnError?this.terminate():this._exec()}},T.prototype._onmessage=function(G,W){if(!this._terminated){this._working--,G.running=!1;var Z=this._workers.get(G);Z&&Z[0](W.data.data),this._workers.set(G,null),this._exec()}},T.prototype._exec=function(){for(var G of this._workers.keys()){if(this._working===this._numWorkers||0===this._waiting.length)return;if(!G.running)for(var W=0;W<this._waiting.length;W++){var Z=this._waiting[W];if("number"!=typeof Z[4]||Z[4]===G.id){this._waiting.splice(W,1),G.postMessage({action:"exec",event:Z[0],args:Z[1]},Z[2]),G.running=!0,G.time=Date.now(),this._workers.set(G,Z[3]),this._working++;break}}}},T.prototype.terminate=function(){if(!this._terminated){for(var G of this._workers)G[0].terminate(),G[1]&&G[1][1](new Error("Terminated"));this._workers.clear(),this._waiting=[],this._working=0,this._terminated=!0}},T.prototype.postAll=function(G,W){if(this._terminated)throw new Error("Cannot post (terminated)");var Z=[];for(var Q of this._workers.keys())Z.push(this.post(G,W,[],Q.id));return Promise.all(Z)},T.prototype.post=function(G,W,Z,Q){W===void 0&&(W=[]),Z===void 0&&(Z=[]),Array.isArray(W)||(W=[W]),Array.isArray(Z)||(Z=[Z]);var $=this;return new Promise(function(J,ee){if($._terminated)throw new Error("Cannot post (terminated)");$._waiting.push([G,W,Z,[J,ee],Q]),$._exec()})},R.exports=T},{"./workerTemplate":150}],150:[function(I,R,T){"use strict";var L=function(){function G(){this._listeners={}}self.window=self,G.prototype.on=function(W,Z){if(this._listeners[W])throw new RangeError("there is already a listener for "+W);if("function"!=typeof Z)throw new TypeError("callback argument must be a function");this._listeners[W]=Z},G.prototype._send=function(W,Z,Q){Q===void 0?Q=[]:!Array.isArray(Q)&&(Q=[Q]),self.postMessage({id:W,data:Z},Q)},G.prototype._trigger=function(W,Z){if(!this._listeners[W])throw new Error("event "+W+" is not defined");this._listeners[W].apply(null,Z)};var E=new G;self.onmessage=function(W){switch(W.data.action){case"exec":W.data.args.unshift(function(Z,Q){E._send(W.data.id,Z,Q)}),E._trigger(W.data.event,W.data.args);break;case"ping":E._send(W.data.id,"pong");break;default:throw new Error("unexpected action: "+W.data.action);}}}.toString().split("\"CODE\";");T.newWorkerURL=function(G,W){var Z=new Blob(["(",L[0],"importScripts.apply(self, "+JSON.stringify(W)+");\n","(",G,")();",L[1],")();"],{type:"application/javascript"});return URL.createObjectURL(Z)}},{}],151:[function(I,R,T){(function(L){"use strict";function E(we){return we&&we.__esModule?we:{default:we}}function G(we){if(Array.isArray(we)){for(var ke=0,ve=Array(we.length);ke<we.length;ke++)ve[ke]=we[ke];return ve}return Array.from(we)}Object.defineProperty(T,"__esModule",{value:!0});var W=I("./kind"),Z=I("./kindNames"),Q=I("./environment"),$=I("./extend"),J=E($),ee=I("./bitMethods"),te=E(ee),ae=I("fs"),ie=I("./model/model"),ne=I("./roi/manager"),le=E(ne),oe=I("./mediaTypes"),se=I("extend"),de=E(se),he=I("./load"),ue=I("../stack/Stack"),ce=E(ue),ge=I("blob-util"),pe=I("has-own"),fe=E(pe),_e=I("fast-bmp"),be=I("../util/base64"),ye={configurable:!0,enumerable:!1,get:void 0};class xe{constructor(we,ke,ve,Me){if(void 0===we&&(we=1),void 0===ke&&(ke=1),"object"==typeof we){var je=we,Pe=!0===ke;we=je.width,ke=je.height,ve=Pe?je.data.slice():je.data,Me={position:je.position,components:je.components,alpha:je.alpha,bitDepth:je.bitDepth,colorModel:je.colorModel,parent:je,meta:je.meta}}if(ve&&!ve.length&&(Me=ve,ve=null),void 0===Me&&(Me={}),this.width=we,this.height=ke,0>=this.width)throw new RangeError("width must be greater than 0");if(0>=this.height)throw new RangeError("height must be greater than 0");Object.defineProperty(this,"parent",{enumerable:!1,writable:!0}),this.parent=Me.parent,this.position=Me.position||[0,0];var Ie=void 0;if("string"!=typeof Me.kind)Ie=(0,W.getKind)(Z.RGBA);else if(Ie=(0,W.getKind)(Me.kind),!Ie)throw new RangeError("invalid image kind: "+Me.kind);var De=(0,de.default)({},Ie,Me);this.components=De.components,this.alpha=De.alpha+0,this.bitDepth=De.bitDepth,this.colorModel=De.colorModel,this.meta=Me.meta||{},this.computed=null,this.initialize(),ve||(ve=(0,W.createPixelArray)(this)),this.setData(ve)}initialize(){this.size=this.width*this.height,this.sizes=[this.width,this.height],this.channels=this.components+this.alpha,this.maxValue=32===this.bitDepth?Number.MAX_VALUE:Math.pow(2,this.bitDepth)-1,this.multiplierX=this.channels,this.multiplierY=this.channels*this.width,this.isClamped=32>this.bitDepth,this.borderSizes=[0,0]}setData(we){var ke=(0,W.getTheoreticalPixelArraySize)(this);if(ke!==we.length)throw new RangeError(`incorrect data size. Should be ${ke} and found ${we.length}`);this.data=we}static load(we,ke){return(0,he.loadImage)(we,ke)}static fromCanvas(we){var ke=we.getContext("2d"),ve=ke.getImageData(0,0,we.width,we.height);return new xe(ve.width,ve.height,ve.data)}static extendMethod(we,ke){var ve=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},Me=ve.inPlace,je=Me!==void 0&&Me,Pe=ve.returnThis,Ie=!(Pe!==void 0)||Pe,De=ve.partialArgs,Se=De===void 0?[]:De,Ce=ve.stack,Ae=Ce!==void 0&&Ce;if(je){if(xe.prototype[we]=function(){this.computed=null;for(var Te=arguments.length,ze=Array(Te),Le=0;Le<Te;Le++)ze[Le]=arguments[Le];var Ee=ke.apply(this,[].concat(G(Se),ze));return Ie?this:Ee},Ae){var Be="string"==typeof Ae?Ae:we;ce.default.prototype[Be]=Ie?function(){for(var Te of this)Te[we].apply(Te,arguments);return this}:function(){var Te=new ce.default(this.length);for(var ze=0;ze<this.length;ze++){var Le;Te[ze]=(Le=this[ze])[we].apply(Le,arguments)}return Te}}}else if(xe.prototype[we]=function(){for(var Te=arguments.length,ze=Array(Te),Le=0;Le<Te;Le++)ze[Le]=arguments[Le];return ke.apply(this,[].concat(G(Se),ze))},Ae){var Re="string"==typeof Ae?Ae:we;ce.default.prototype[Re]=function(){var Te=new ce.default(this.length);for(var ze=0;ze<this.length;ze++){var Le;Te[ze]=(Le=this[ze])[we].apply(Le,arguments)}return Te}}return xe}static extendProperty(we,ke){var ve=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},Me=ve.partialArgs,je=void 0===Me?[]:Me;return ye.get=function(){if(null===this.computed)this.computed={};else if((0,fe.default)(we,this.computed))return this.computed[we];var Pe=ke.apply(this,je);return this.computed[we]=Pe,Pe},Object.defineProperty(xe.prototype,we,ye),xe}static createFrom(we,ke){var ve={width:we.width,height:we.height,position:we.position,components:we.components,alpha:we.alpha,colorModel:we.colorModel,bitDepth:we.bitDepth,parent:we};return(0,de.default)(ve,ke),new xe(ve.width,ve.height,ve)}static isTypeSupported(we){var ke=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"write";if("string"!=typeof we)throw new TypeError("type argument must be a string");if(we=(0,oe.getType)(we),"write"===ke)return(0,oe.canWrite)(we);throw new TypeError("unknown operation: "+ke)}getPixelIndex(we){var ke=0;for(var ve=0;ve<we.length;ve++)ke+=this.multipliers[ve]*we[ve];return ke}setValueXY(we,ke,ve,Me){return this.data[(ke*this.width+we)*this.channels+ve]=Me,this.computed=null,this}getValueXY(we,ke,ve){return this.data[(ke*this.width+we)*this.channels+ve]}setValue(we,ke,ve){return this.data[we*this.channels+ke]=ve,this.computed=null,this}getValue(we,ke){return this.data[we*this.channels+ke]}setPixelXY(we,ke,ve){return this.setPixel(ke*this.width+we,ve)}getPixelXY(we,ke){return this.getPixel(ke*this.width+we)}setPixel(we,ke){var ve=we*this.channels;for(var Me=0;Me<ke.length;Me++)this.data[ve+Me]=ke[Me];return this.computed=null,this}getPixel(we){var ke=Array(this.channels),ve=we*this.channels;for(var Me=0;Me<this.channels;Me++)ke[Me]=this.data[ve+Me];return ke}toDataURL(){function we(Me){var je=(0,_e.encode)(Me),Pe=(0,be.encode)(je);return`data:${ke};base64,${Pe}`}var ke=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"image/png",ve=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return(ke=(0,oe.getType)(ke),ve)?new Promise((Me,je)=>{"image/bmp"===ke?Me(we(this)):this.getCanvas().toDataURL(ke,function(Pe,Ie){Pe?je(Pe):Me(Ie)})}):"image/bmp"===ke?we(this):this.getCanvas().toDataURL(ke)}toBase64(){var we=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"image/png",ke=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(ke)return this.toDataURL(we,!0).then(function(Me){return Me.substring(Me.indexOf(",")+1)});var ve=this.toDataURL(we);return ve.substring(ve.indexOf(",")+1)}toBlob(){var we=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"image/png",ke=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0.8;return(0,ge.canvasToBlob)(this.getCanvas({originalData:!0}),we,ke)}getCanvas(){var we=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},ke=we.originalData,ve=void 0!==ke&&ke,Me=void 0;ve?(this.checkProcessable("getInPlaceCanvas",{channels:[4],bitDepth:[8]}),Me=new Q.ImageData(this.data,this.width,this.height)):Me=new Q.ImageData(this.getRGBAData(),this.width,this.height);var je=new Q.Canvas(this.width,this.height),Pe=je.getContext("2d");return Pe.putImageData(Me,0,0),je}getRGBAData(){this.checkProcessable("getRGBAData",{components:[1,3],bitDepth:[1,8,16]});var we=this.size,ke=new Uint8ClampedArray(4*(this.width*this.height));if(1===this.bitDepth)for(var ve=0;ve<we;ve++){var Me=this.getBit(ve);ke[4*ve]=255*Me,ke[4*ve+1]=255*Me,ke[4*ve+2]=255*Me}else if(1===this.components)for(var je=0;je<we;je++)ke[4*je]=this.data[je*this.channels]>>>this.bitDepth-8,ke[4*je+1]=this.data[je*this.channels]>>>this.bitDepth-8,ke[4*je+2]=this.data[je*this.channels]>>>this.bitDepth-8;else if(3===this.components&&(this.checkProcessable("getRGBAData",{colorModel:[ie.RGB]}),this.colorModel===ie.RGB))for(var Pe=0;Pe<we;Pe++)ke[4*Pe]=this.data[Pe*this.channels]>>>this.bitDepth-8,ke[4*Pe+1]=this.data[Pe*this.channels+1]>>>this.bitDepth-8,ke[4*Pe+2]=this.data[Pe*this.channels+2]>>>this.bitDepth-8;if(this.alpha){this.checkProcessable("getRGBAData",{bitDepth:[8,16]});for(var Ie=0;Ie<we;Ie++)ke[4*Ie+3]=this.data[Ie*this.channels+this.components]>>this.bitDepth-8}else for(var De=0;De<we;De++)ke[4*De+3]=255;return ke}getRoiManager(we){return new le.default(this,we)}clone(){var we=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},ke=we.copyData,ve=!(ke!==void 0)||ke;return new xe(this,ve)}save(we){var ke=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},ve=ke.format,Me=ve===void 0?"png":ve;return new Promise((je,Pe)=>{var Ie=(0,ae.createWriteStream)(we),De=void 0,Se=void 0;switch(Me.toLowerCase()){case"png":De=this.getCanvas().pngStream();break;case"jpg":case"jpeg":De=this.getCanvas().jpegStream();break;case"bmp":Se=(0,_e.encode)(this);break;default:throw new RangeError("invalid output format: "+Me);}De?(Ie.on("finish",je),Ie.on("error",Pe),De.pipe(Ie)):Se&&(0,ae.writeFile)(we,L.from(Se),Ce=>{return Ce?void Pe(Ce):void je()})})}checkProcessable(we){var ke=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},ve=ke.bitDepth,Me=ke.alpha,je=ke.colorModel,Pe=ke.components,Ie=ke.channels;if("string"!=typeof we)throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(ve&&(Array.isArray(ve)||(ve=[ve]),!ve.includes(this.bitDepth)))throw new TypeError("The process: "+we+" can only be applied if bit depth is in: "+ve);if(Me&&(Array.isArray(Me)||(Me=[Me]),!Me.includes(this.alpha)))throw new TypeError("The process: "+we+" can only be applied if alpha is in: "+Me);if(je&&(Array.isArray(je)||(je=[je]),!je.includes(this.colorModel)))throw new TypeError("The process: "+we+" can only be applied if color model is in: "+je);if(Pe&&(Array.isArray(Pe)||(Pe=[Pe]),!Pe.includes(this.components)))throw new TypeError("The process: "+we+" can only be applied if the number of components is in: "+Pe);if(Ie&&(Array.isArray(Ie)||(Ie=[Ie]),!Ie.includes(this.channels)))throw new TypeError("The process: "+we+" can only be applied if the number of channels is in: "+Ie)}checkColumn(we){if(0>we||we>=this.width)throw new RangeError(`checkColumn: column should be included between 0 and ${this.width-1}. Current value: ${we}`)}checkRow(we){if(0>we||we>=this.height)throw new RangeError(`checkRow: row should be included between 0 and ${this.height-1}. Current value: ${we}`)}checkChannel(we){if(0>we||we>=this.channels)throw new RangeError(`checkChannel: channel should be included between 0 and ${this.channels-1}. Current value: ${we}`)}apply(we){for(var ke=0;ke<this.height;ke++)for(var ve=0;ve<this.width;ve++){var Me=(ke*this.width+ve)*this.channels;we.call(this,Me)}}}T.default=xe,(0,J.default)(xe),(0,te.default)(xe)}).call(this,I("buffer").Buffer)},{"../stack/Stack":256,"../util/base64":266,"./bitMethods":152,"./environment":165,"./extend":166,"./kind":187,"./kindNames":188,"./load":189,"./mediaTypes":190,"./model/model":191,"./roi/manager":207,"blob-util":5,buffer:7,extend:34,"fast-bmp":38,fs:7,"has-own":48}],152:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){for(var G in L)E.prototype[G]=L[G]};var L={setBitXY:function(G,W){var Z=W*this.width+G;this.data[Z>>3]|=1<<7-(7&Z)},clearBitXY:function(G,W){var Z=W*this.width+G;this.data[Z>>3]&=~(1<<7-(7&Z))},toggleBitXY:function(G,W){var Z=W*this.width+G;this.data[Z>>3]^=1<<7-(7&Z)},getBitXY:function(G,W){var Z=W*this.width+G;return this.data[Z>>3]&1<<7-(7&Z)?1:0},setBit:function(G){this.data[G>>3]|=1<<7-(7&G)},clearBit:function(G){this.data[G>>3]&=~(1<<7-(7&G))},toggleBit:function(G){this.data[G>>3]^=1<<7-(7&G)},getBit:function(G){return this.data[G>>3]&1<<7-(7&G)?1:0}}},{}],153:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var W=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},Z=W.useAlpha,Q=!(Z!==void 0)||Z,$=W.nbSlots,J=$===void 0?512:$;this.checkProcessable("getColorHistogram",{bitDepth:[8,16],components:[3]});var ee=Math.log(J)/Math.log(8);if(ee!==Math.floor(ee))throw new RangeError("nbSlots must be a power of 8. Usually 8, 64, 512 or 4096");var te=this.bitDepth-ee,ae=this.data,ie=(0,E.default)(Math.pow(8,ee),0),ne=Math.pow(2,2*ee),le=Math.pow(2,ee);for(var oe=0;oe<ae.length;oe+=this.channels){var se=(ae[oe]>>te)*ne+(ae[oe+1]>>te)*le+(ae[oe+2]>>te);Q&&this.alpha?ie[se]+=ae[oe+this.channels-1]/this.maxValue:ie[se]++}return ie};var L=I("new-array"),E=function(W){return W&&W.__esModule?W:{default:W}}(L)},{"new-array":118}],154:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var E=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},G=E.alpha,W=G===void 0?1:G;this.checkProcessable("countAlphaPixels",{bitDepth:[8,16],alpha:1});var Z=0;if(W!==void 0){for(var Q=this.components;Q<this.data.length;Q+=this.channels)this.data[Q]===W&&Z++;return Z}return this.size}},{}],155:[function(I,R,T){"use strict";function L($){return $&&$.__esModule?$:{default:$}}function E($,J){var ee=J.useAlpha,te=J.maxSlots;if(1===this.bitDepth){var ae=[0,0];for(var ie=0;ie<this.height;ie++)for(var ne=0;ne<this.width;ne++){var le=this.getBitXY(ie,ne);0===le?ae[0]+=1:1===le&&(ae[1]+=1)}return ae}var oe=Math.log2(te);if(!(0,Q.default)(oe))throw new RangeError("maxSlots must be a power of 2, for example: 64, 256, 1024");var se=0;this.bitDepth>oe&&(se=this.bitDepth-oe);var de=this.data,he=(0,W.default)(Math.pow(2,Math.min(this.bitDepth,oe)),0);if(ee&&this.alpha){var ue=this.channels-$-1;for(var ce=$;ce<de.length;ce+=this.channels)he[de[ce]>>se]+=de[ce+ue]/this.maxValue}else for(var ge=$;ge<de.length;ge+=this.channels)he[de[ge]>>se]++;return he}Object.defineProperty(T,"__esModule",{value:!0}),T.getHistogram=function(){var J=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},ee=J.maxSlots,te=void 0===ee?256:ee,ae=J.channel,ie=J.useAlpha,ne=void 0===ie||ie;if(this.checkProcessable("getHistogram",{bitDepth:[1,8,16]}),void 0===ae){if(1<this.components)throw new RangeError("You need to define the channel for an image that contains more than one channel");ae=0}return E.call(this,ae,{useAlpha:ne,maxSlots:te})},T.getHistograms=function(){var J=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},ee=J.maxSlots,te=ee===void 0?256:ee,ae=J.useAlpha,ie=!(ae!==void 0)||ae;this.checkProcessable("getHistograms",{bitDepth:[8,16]});var ne=Array(ie?this.components:this.channels);for(var le=0;le<ne.length;le++)ne[le]=E.call(this,le,{useAlpha:ie,maxSlots:te});return ne};var G=I("new-array"),W=L(G),Z=I("is-integer"),Q=L(Z)},{"is-integer":57,"new-array":118}],156:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var E=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},G=E.mask,W=E.region,Z=W===void 0?3:W,Q=E.removeClosePoints,$=Q===void 0?0:Q,J=E.invert,ee=J!==void 0&&J,te=E.maxEquals,ae=te===void 0?2:te,ie=this;this.checkProcessable("localMaxima",{bitDepth:[8,16],components:1}),Z*=4;var ne=ee?0:1,le=[1,0,-1,0,1,1,-1,-1,2,0,-2,0,2,2,-2,-2],oe=[0,1,0,-1,1,-1,1,-1,0,2,0,-2,2,-2,2,-2],se=8>=Z?1:2,de=[];for(var he=se;he<ie.height-se;he++)for(var ue=se;ue<ie.width-se;ue++)if(!(G&&G.getBitXY(ue,he)!==ne)){var ce=0,ge=0,pe=ie.data[ue+he*ie.width];for(var fe=0;fe<Z;fe++)ee?ie.data[ue+le[fe]+(he+oe[fe])*ie.width]>pe&&ce++:ie.data[ue+le[fe]+(he+oe[fe])*ie.width]<pe&&ce++,ie.data[ue+le[fe]+(he+oe[fe])*ie.width]===pe&&ge++;ce+ge===Z&&ge<=ae&&de.push([ue,he])}if(0<$)for(var _e=0;_e<de.length;_e++)for(var be=_e+1;be<de.length;be++)Math.sqrt(Math.pow(de[_e][0]-de[be][0],2)+Math.pow(de[_e][1]-de[be][1],2))<$&&(de[_e][0]=de[_e][0]+de[be][0]>>1,de[_e][1]=de[_e][1]+de[be][1]>>1,de.splice(be,1),be--);return de}},{}],157:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("max",{bitDepth:[8,16]});var W=(0,E.default)(this.channels,-(1/0));for(var Z=0;Z<this.data.length;Z+=this.channels)for(var Q=0;Q<this.channels;Q++)this.data[Z+Q]>W[Q]&&(W[Q]=this.data[Z+Q]);return W};var L=I("new-array"),E=function(W){return W&&W.__esModule?W:{default:W}}(L)},{"new-array":118}],158:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var G=this.getHistograms({maxSlots:this.maxValue+1}),W=Array(G.length);for(var Z=0;Z<G.length;Z++){var Q=G[Z];W[Z]=(0,L.mean)(Q)}return W};var L=I("../../util/histogram")},{"../../util/histogram":271}],159:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var G=this.getHistograms({maxSlots:this.maxValue+1}),W=Array(G.length);for(var Z=0;Z<G.length;Z++){var Q=G[Z];W[Z]=(0,L.median)(Q)}return W};var L=I("../../util/histogram")},{"../../util/histogram":271}],160:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("min",{bitDepth:[8,16]});var W=(0,E.default)(this.channels,+(1/0));for(var Z=0;Z<this.data.length;Z+=this.channels)for(var Q=0;Q<this.channels;Q++)this.data[Z+Q]<W[Q]&&(W[Q]=this.data[Z+Q]);return W};var L=I("new-array"),E=function(W){return W&&W.__esModule?W:{default:W}}(L)},{"new-array":118}],161:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("points",{bitDepth:[1]});var E=Array(this.size),G=0;for(var W=0;W<this.width;W++)for(var Z=0;Z<this.height;Z++)1===this.getBitXY(W,Z)&&(E[G++]=[W,Z]);return E.length=G,E}},{}],162:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){if(this===E)return[0,0];for(var G=[0,0],W=this;W;){if(W===E)return G;W.position&&(G[0]+=W.position[0],G[1]+=W.position[1]),W=W.parent}return!1}},{}],163:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("sum",{bitDepth:[8,16]});var W=(0,E.default)(this.channels,0);for(var Z=0;Z<this.data.length;Z+=this.channels)for(var Q=0;Q<this.channels;Q++)W[Q]+=this.data[Z+Q];return W};var L=I("new-array"),E=function(W){return W&&W.__esModule?W:{default:W}}(L)},{"new-array":118}],164:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){return this.checkProcessable("getSvd",{bitDepth:[1]}),L.DC.SVD(this.points)};var L=I("ml-matrix")},{"ml-matrix":91}],165:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var L=void 0,E=void 0,G=void 0,W=void 0,Z=void 0,Q=void 0;"undefined"==typeof self?"undefined"!=typeof R&&R.exports&&function(){T.env=Q="node",T.isDifferentOrigin=Z=()=>!1;var $=I("canvas");T.DOMImage=E=$.Image,T.Canvas=G=$,T.ImageData=W=$.ImageData;var J=I("fs");T.fetchBinary=L=function(te){return new Promise(function(ae,ie){J.readFile(te,function(ne,le){ne?ie(ne):ae(le.buffer)})})}}():function(){T.env=Q="browser";var $=self.location.origin;T.isDifferentOrigin=Z=function(ee){try{var te=new self.URL(ee);return te.origin!==$}catch(ae){return!1}},T.ImageData=W=self.ImageData,T.DOMImage=E=self.Image,T.Canvas=G=function(ee,te){var ae=self.document.createElement("canvas");return ae.width=ee,ae.height=te,ae},T.fetchBinary=L=function(ee){var te=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},ae=te.withCredentials,ie=ae!==void 0&&ae;return new Promise(function(ne,le){var oe=new self.XMLHttpRequest;oe.open("GET",ee,!0),oe.responseType="arraybuffer",oe.withCredentials=ie,oe.onload=function(se){200===this.status?ne(this.response):le(se)},oe.onerror=le,oe.send()})}}(),T.fetchBinary=L,T.DOMImage=E,T.Canvas=G,T.ImageData=W,T.isDifferentOrigin=Z,T.env=Q},{canvas:void 0,fs:7}],166:[function(I,R,T){"use strict";function L(ya){return ya&&ya.__esModule?ya:{default:ya}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(xa){var wa={inPlace:!0},ka={stack:!0};xa.extendMethod("invertGetSet",G.default,wa),xa.extendMethod("invertIterator",Z.default,wa),xa.extendMethod("invertPixel",ee.default,wa),xa.extendMethod("invertOneLoop",$.default,wa),xa.extendMethod("invertApply",ae.default,wa),xa.extendMethod("invert",oe.default,{inPlace:!0,stack:!0}),xa.extendMethod("invertBinaryLoop",ne.default,wa),xa.extendMethod("level",ke.default,wa),xa.extendMethod("add",Me.default,wa),xa.extendMethod("subtract",Pe.default,wa),xa.extendMethod("multiply",Ce.default,wa),xa.extendMethod("divide",Be.default,wa),xa.extendMethod("hypotenuse",De.default),xa.extendMethod("background",Te.default),xa.extendMethod("flipX",de.default),xa.extendMethod("flipY",ue.default),xa.extendMethod("blurFilter",ge.default),xa.extendMethod("medianFilter",fe.default),xa.extendMethod("gaussianFilter",be.default),xa.extendMethod("sobelFilter",xe.default),xa.extendMethod("crop",Le.default,ka),xa.extendMethod("cropAlpha",Ve.default,ka),xa.extendMethod("scale",Ye.default,ka),xa.extendMethod("hsv",Ue.default),xa.extendMethod("hsl",qe.default),xa.extendMethod("cmyk",Ge.default),xa.extendMethod("rgba8",We.default),xa.extendMethod("grey",Ke.default).extendMethod("gray",Ke.default),xa.extendMethod("mask",$e.default),xa.extendMethod("pad",et.default),xa.extendMethod("colorDepth",nt.default),xa.extendMethod("setBorder",rt.default,wa),xa.extendMethod("rotate",lt.rotate),xa.extendMethod("rotateLeft",lt.rotateLeft),xa.extendMethod("rotateRight",lt.rotateRight),xa.extendMethod("getRow",Mt.default),xa.extendMethod("getColumn",Pt.default),xa.extendMethod("getMatrix",Dt.default),xa.extendMethod("setMatrix",Ct.default),xa.extendMethod("getPixelsArray",Bt.default),xa.extendMethod("split",dt.default),xa.extendMethod("getChannel",ut.default),xa.extendMethod("combineChannels",ct.default),xa.extendMethod("setChannel",pt.default),xa.extendMethod("getSimilarity",bt.default),xa.extendMethod("getPixelsGrid",xt.default),xa.extendMethod("getBestMatch",kt.default),xa.extendMethod("paintMasks",Tt.default,wa),xa.extendMethod("paintLabels",Lt.default,wa),xa.extendMethod("paintPoints",Vt.default,wa),xa.extendMethod("extract",Yt.default),xa.extendMethod("convolution",Ut.default),xa.extendMethod("convolutionFft",qt.default),xa.extendMethod("floodFill",Gt.default),xa.extendMethod("countAlphaPixels",ba.default),xa.extendMethod("getHistogram",Ht.getHistogram).extendProperty("histogram",Ht.getHistogram),xa.extendMethod("getHistograms",Ht.getHistograms).extendProperty("histograms",Ht.getHistograms),xa.extendMethod("getColorHistogram",Zt.default).extendProperty("colorHistogram",Zt.default),xa.extendMethod("getMin",Qt.default).extendProperty("min",Qt.default),xa.extendMethod("getMax",Jt.default).extendProperty("max",Jt.default),xa.extendMethod("getSum",ta.default).extendProperty("sum",ta.default),xa.extendMethod("getLocalMaxima",ia.default),xa.extendMethod("getMedian",da.default).extendProperty("median",da.default),xa.extendMethod("getMean",la.default).extendProperty("mean",la.default),xa.extendMethod("getPoints",ua.default).extendProperty("points",ua.default),xa.extendMethod("getRelativePosition",ca.default),xa.extendMethod("getSvd",fa.default).extendProperty("svd",fa.default)};var E=I("./filter/invertGetSet"),G=L(E),W=I("./filter/invertIterator"),Z=L(W),Q=I("./filter/invertOneLoop"),$=L(Q),J=I("./filter/invertPixel"),ee=L(J),te=I("./filter/invertApply"),ae=L(te),ie=I("./filter/invertBinaryLoop"),ne=L(ie),le=I("./filter/invert"),oe=L(le),se=I("./filter/flipX"),de=L(se),he=I("./filter/flipY"),ue=L(he),ce=I("./filter/blurFilter"),ge=L(ce),pe=I("./filter/medianFilter"),fe=L(pe),_e=I("./filter/gaussianFilter"),be=L(_e),ye=I("./filter/sobelFilter"),xe=L(ye),we=I("./filter/level"),ke=L(we),ve=I("./filter/add"),Me=L(ve),je=I("./filter/subtract"),Pe=L(je),Ie=I("./filter/hypotenuse"),De=L(Ie),Se=I("./filter/multiply"),Ce=L(Se),Ae=I("./filter/divide"),Be=L(Ae),Re=I("./filter/background"),Te=L(Re),ze=I("./transform/crop"),Le=L(ze),Ee=I("./transform/cropAlpha"),Ve=L(Ee),Fe=I("./transform/scale/scale"),Ye=L(Fe),Oe=I("./transform/hsv"),Ue=L(Oe),Ne=I("./transform/hsl"),qe=L(Ne),Xe=I("./transform/cmyk"),Ge=L(Xe),He=I("./transform/rgba8"),We=L(He),Ze=I("./transform/grey"),Ke=L(Ze),Qe=I("./transform/mask/mask"),$e=L(Qe),Je=I("./transform/pad"),et=L(Je),at=I("./transform/colorDepth"),nt=L(at),lt=I("./transform/rotate"),ot=I("./utility/setBorder"),rt=L(ot),st=I("./utility/split"),dt=L(st),ht=I("./utility/getChannel"),ut=L(ht),mt=I("./utility/combineChannels"),ct=L(mt),gt=I("./utility/setChannel"),pt=L(gt),_t=I("./utility/getSimilarity"),bt=L(_t),yt=I("./utility/getPixelsGrid"),xt=L(yt),wt=I("./utility/getBestMatch"),kt=L(wt),vt=I("./utility/getRow"),Mt=L(vt),jt=I("./utility/getColumn"),Pt=L(jt),It=I("./utility/getMatrix"),Dt=L(It),St=I("./utility/setMatrix"),Ct=L(St),At=I("./utility/getPixelsArray"),Bt=L(At),Rt=I("./operator/paintMasks"),Tt=L(Rt),zt=I("./operator/paintLabels"),Lt=L(zt),Et=I("./operator/paintPoints"),Vt=L(Et),Ft=I("./operator/extract"),Yt=L(Ft),Ot=I("./operator/convolution"),Ut=L(Ot),Nt=I("./operator/convolutionFft"),qt=L(Nt),Xt=I("./operator/floodFill"),Gt=L(Xt),Ht=I("./compute/histogram"),Wt=I("./compute/colorHistogram"),Zt=L(Wt),Kt=I("./compute/min"),Qt=L(Kt),$t=I("./compute/max"),Jt=L($t),ea=I("./compute/sum"),ta=L(ea),aa=I("./compute/localMaxima"),ia=L(aa),na=I("./compute/mean"),la=L(na),oa=I("./compute/median"),da=L(oa),ha=I("./compute/points"),ua=L(ha),ma=I("./compute/relativePosition"),ca=L(ma),ga=I("./compute/svd"),fa=L(ga),_a=I("./compute/countAlphaPixels"),ba=L(_a)},{"./compute/colorHistogram":153,"./compute/countAlphaPixels":154,"./compute/histogram":155,"./compute/localMaxima":156,"./compute/max":157,"./compute/mean":158,"./compute/median":159,"./compute/min":160,"./compute/points":161,"./compute/relativePosition":162,"./compute/sum":163,"./compute/svd":164,"./filter/add":167,"./filter/background":168,"./filter/blurFilter":169,"./filter/divide":170,"./filter/flipX":171,"./filter/flipY":172,"./filter/gaussianFilter":173,"./filter/hypotenuse":174,"./filter/invert":175,"./filter/invertApply":176,"./filter/invertBinaryLoop":177,"./filter/invertGetSet":178,"./filter/invertIterator":179,"./filter/invertOneLoop":180,"./filter/invertPixel":181,"./filter/level":182,"./filter/medianFilter":183,"./filter/multiply":184,"./filter/sobelFilter":185,"./filter/subtract":186,"./operator/convolution":192,"./operator/convolutionFft":193,"./operator/extract":194,"./operator/floodFill":195,"./operator/paintLabels":196,"./operator/paintMasks":197,"./operator/paintPoints":198,"./transform/cmyk":208,"./transform/colorDepth":209,"./transform/crop":210,"./transform/cropAlpha":211,"./transform/grey":212,"./transform/hsl":214,"./transform/hsv":215,"./transform/mask/mask":220,"./transform/pad":233,"./transform/rgba8":234,"./transform/rotate":235,"./transform/scale/scale":238,"./utility/combineChannels":239,"./utility/getBestMatch":241,"./utility/getChannel":242,"./utility/getColumn":243,"./utility/getMatrix":244,"./utility/getPixelsArray":245,"./utility/getPixelsGrid":246,"./utility/getRow":247,"./utility/getSimilarity":248,"./utility/setBorder":249,"./utility/setChannel":250,"./utility/setMatrix":251,"./utility/split":252}],167:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W){var Z=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Q=Z.channels;if(this.checkProcessable("add",{bitDepth:[8,16]}),Q=(0,L.validateArrayOfChannels)(this,{channels:Q}),W=(0,E.checkNumberArray)(W),!isNaN(W))for(var $=0;$<Q.length;$++){var J=Q[$];for(var ee=0;ee<this.data.length;ee+=this.channels)this.data[ee+J]=Math.min(this.maxValue,this.data[ee+J]+W>>0)}else{if(this.data.length!==W.length)throw new Error("add: the data size is different");for(var te=0;te<Q.length;te++){var ae=Q[te];for(var ie=0;ie<this.data.length;ie+=this.channels)this.data[ie+ae]=Math.max(0,Math.min(this.maxValue,this.data[ie+ae]+W[ie+ae]>>0))}}return this};var L=I("../../util/channel"),E=I("../../util/value")},{"../../util/channel":267,"../../util/value":275}],168:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z,Q,$){var J=new L.KernelRidgeRegression(Z,Q,$),ee=Array(this.size);for(var te=0;te<this.width;te++)for(var ae=0;ae<this.height;ae++)ee[ae*this.width+te]=[te,ae];var ie=J.predict(ee),W=G.default.createFrom(this);for(var ne=0;ne<this.size;ne++)W.data[ne]=Math.min(this.maxValue,Math.max(0,ie[ne][0]));return W};var L=I("ml-regression"),E=I("../Image"),G=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(E)},{"../Image":151,"ml-regression":103}],169:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var W=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Z=W.radius,Q=void 0===Z?1:Z;if(this.checkProcessable("meanFilter",{components:[1],bitDepth:[8,16]}),1>Q)throw new Error("Number of neighbors should be grater than 0");var $=2*Q+1,J=Array($*$);for(var ee=0;ee<J.length;ee++)J[ee]=1;return E.default.call(this,J)};var L=I("../operator/convolutionFft"),E=function(W){return W&&W.__esModule?W:{default:W}}(L)},{"../operator/convolutionFft":193}],170:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W){var Z=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Q=Z.channels;if(this.checkProcessable("divide",{bitDepth:[8,16]}),Q=(0,L.validateArrayOfChannels)(this,{channels:Q}),W=(0,E.checkNumberArray)(W),!isNaN(W))for(var $=0;$<Q.length;$++){var J=Q[$];for(var ee=0;ee<this.data.length;ee+=this.channels)this.data[ee+J]=Math.min(this.maxValue,this.data[ee+J]/W>>0)}else{if(this.data.length!==W.length)throw new Error("divide: the: the data size is different");for(var te=0;te<Q.length;te++){var ae=Q[te];for(var ie=0;ie<this.data.length;ie+=this.channels)this.data[ie+ae]=Math.max(0,Math.min(this.maxValue,this.data[ie+ae]/W[ie+ae]>>0))}}return this};var L=I("../../util/channel"),E=I("../../util/value")},{"../../util/channel":267,"../../util/value":275}],171:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("flipX",{bitDepth:[8,16]});for(var E=0;E<this.height;E++){var G=E*this.width*this.channels;for(var W=0;W<Math.floor(this.width/2);W++){var Z=W*this.channels+G,Q=(this.width-W-1)*this.channels+G;for(var $=0;$<this.channels;$++){var J=this.data[Z+$];this.data[Z+$]=this.data[Q+$],this.data[Q+$]=J}}}return this}},{}],172:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("flipY",{bitDepth:[8,16]});for(var E=0;E<Math.floor(this.height/2);E++)for(var G=0;G<this.width;G++){var W=G*this.channels+E*this.width*this.channels,Z=G*this.channels+(this.height-1-E)*this.channels*this.width;for(var Q=0;Q<this.channels;Q++){var $=this.data[W+Q];this.data[W+Q]=this.data[Z+Q],this.data[Z+Q]=$}}return this}},{}],173:[function(I,R,T){"use strict";function L(Z,Q){if(1>Z)throw new RangeError("Radius should be grater than 0");var $=2*Z+1,J=Array($*$),ee=2*(Q*Q),te=Math.PI*ee;for(var ae=0;ae<=Z;ae++)for(var ie=ae;ie<=Z;ie++){var ne=Math.exp(-(ae*ae+ie*ie)/ee)/te;J[(ae+Z)*$+(ie+Z)]=ne,J[(ae+Z)*$+(-ie+Z)]=ne,J[(-ae+Z)*$+(ie+Z)]=ne,J[(-ae+Z)*$+(-ie+Z)]=ne,J[(ie+Z)*$+(ae+Z)]=ne,J[(ie+Z)*$+(-ae+Z)]=ne,J[(-ie+Z)*$+(ae+Z)]=ne,J[(-ie+Z)*$+(-ae+Z)]=ne}return J}function E(Z){if(0>=Z)throw new RangeError("Sigma should be grater than 0");for(var Q=2*(Z*Z),$=Math.PI*Q,J=1/$,ee=J,te=0;0.99>ee;){te++,J=Math.exp(-(te*te)/Q)/$,ee+=4*J;for(var ae=1;ae<te;ae++)J=Math.exp(-(ae*ae+te*te)/Q)/$,ee+=8*J;J=4*Math.exp(-(2*te*te)/Q)/$,ee+=J}if(1<ee)throw new Error("unexpected sum over 1");return L(te,Z)}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},$=Q.radius,J=void 0===$?1:$,ee=Q.sigma,te=Q.channels,ae=Q.border,ie=void 0===ae?"copy":ae,ne=Q.algorithm,le=void 0===ne?"auto":ne;this.checkProcessable("gaussian",{bitDepth:[8,16]});var oe=void 0;return ee?oe=E(ee):(ee=0.3*(J-1)+0.8,oe=L(J,ee)),W.default.call(this,oe,{border:ie,channels:te,algorithm:le})};var G=I("../operator/convolution"),W=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(G)},{"../operator/convolution":192}],174:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){var Q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},$=Q.bitDepth,J=void 0===$?this.bitDepth:$,ee=Q.channels;if(this.checkProcessable("hypotenuse",{bitDepth:[8,16,32]}),this.width!==Z.width||this.height!==Z.height)throw new Error("hypotenuse: both images must have the same size");if(this.alpha!==Z.alpha||this.bitDepth!==Z.bitDepth)throw new Error("hypotenuse: both images must have the same alpha and bitDepth");if(this.channels!==Z.channels)throw new Error("hypotenuse: both images must have the same number of channels");var te=G.default.createFrom(this,{bitDepth:J});ee=(0,L.validateArrayOfChannels)(this,{channels:ee});var ae=te.isClamped;for(var ie=0;ie<ee.length;ie++){var ne=ee[ie];for(var le=ne;le<this.data.length;le+=this.channels){var oe=Math.sqrt(this.data[le]*this.data[le]+Z.data[le]*Z.data[le]);te.data[le]=ae?Math.min(Math.max(Math.round(oe),0),te.maxValue):oe}}return te};var L=I("../../util/channel"),E=I("../Image"),G=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(E)},{"../../util/channel":267,"../Image":151}],175:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var G=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},W=G.channels;if(this.checkProcessable("invertOneLoop",{bitDepth:[1,8,16]}),1===this.bitDepth){var Z=this.data;for(var Q=0;Q<Z.length;Q++)Z[Q]=~Z[Q]}else{W=(0,L.validateArrayOfChannels)(this,{channels:W});for(var $=0;$<W.length;$++){var J=W[$];for(var ee=J;ee<this.data.length;ee+=this.channels)this.data[ee]=this.maxValue-this.data[ee]}}return this};var L=I("../../util/channel")},{"../../util/channel":267}],176:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){if(1===this.bitDepth){var E=this.data;for(var G=0;G<E.length;G++)E[G]=~E[G]}else this.checkProcessable("invertApply",{bitDepth:[8,16]}),this.apply(function(W){for(var Z=0;Z<this.components;Z++)this.data[W+Z]=this.maxValue-this.data[W+Z]})}},{}],177:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("invertBinaryLoop",{bitDepth:[1]});for(var E=0;E<this.size;E++)this.toggleBit(E)}},{}],178:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){if(this.checkProcessable("invert",{bitDepth:[1,8,16]}),1===this.bitDepth){var E=this.data;for(var G=0;G<E.length;G++)E[G]=~E[G]}else for(var W=0;W<this.width;W++)for(var Z=0;Z<this.height;Z++)for(var Q=0;Q<this.components;Q++){var $=this.getValueXY(W,Z,Q);this.setValueXY(W,Z,Q,this.maxValue-$)}}},{}],179:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){if(this.checkProcessable("invert",{bitDepth:[1,8,16]}),1===this.bitDepth){var E=this.data;for(var G=0;G<E.length;G++)E[G]=~E[G]}else for(var W of this.pixels()){var Z=W.index,Q=W.pixel;for(var $=0;$<this.components;$++)this.setValue(Z,$,this.maxValue-Q[$])}}},{}],180:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("invertOneLoop",{bitDepth:[8,16]});var E=this.data;for(var G=0;G<E.length;G+=this.channels)for(var W=0;W<this.components;W++)E[G+W]=this.maxValue-E[G+W]}},{}],181:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("invertPixel",{bitDepth:[8,16]});for(var E=0;E<this.width;E++)for(var G=0;G<this.height;G++){var W=this.getPixelXY(E,G);for(var Z=0;Z<this.components;Z++)W[Z]=this.maxValue-W[Z];this.setPixelXY(E,G,W)}}},{}],182:[function(I,R,T){"use strict";function L(Z,Q,$,J){var ee=1e-5,te=Array(Z.channels);for(var ae of J)te[ae]=0===Q[ae]&&$[ae]===Z.maxValue?0:$[ae]===Q[ae]?0:(Z.maxValue+1-ee)/($[ae]-Q[ae]),Q[ae]+=(0.5-ee/2)/te[ae];for(var ie=0;ie<J.length;ie++){var ne=J[ie];if(0!==te[ne])for(var le=0;le<Z.data.length;le+=Z.channels)Z.data[le+ne]=Math.min(Math.max(0,0|(Z.data[le+ne]-Q[ne])*te[ne]+0.5),Z.maxValue)}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},$=Q.algorithm,J=void 0===$?"range":$,ee=Q.channels,te=Q.min,ae=void 0===te?this.min:te,ie=Q.max,ne=void 0===ie?this.max:ie;switch(this.checkProcessable("level",{bitDepth:[8,16]}),ee=(0,W.validateArrayOfChannels)(this,{channels:ee}),J){case"range":0>ae&&(ae=0),ne>this.maxValue&&(ne=this.maxValue),Array.isArray(ae)||(ae=(0,G.default)(ee.length,ae)),Array.isArray(ne)||(ne=(0,G.default)(ee.length,ne)),L(this,ae,ne,ee);break;default:throw new Error("level: algorithm not implement: "+J);}return this};var E=I("new-array"),G=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(E),W=I("../../util/channel")},{"../../util/channel":267,"new-array":118}],183:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},$=Q.radius,J=void 0===$?1:$,ee=Q.channels,te=Q.border,ae=void 0===te?"copy":te;if(this.checkProcessable("median",{bitDepth:[8,16]}),1>J)throw new Error("Kernel radius should be greater than 0");ee=(0,L.validateArrayOfChannels)(this,ee,!0);var ie=J,ne=J,le=W.default.createFrom(this),oe=(2*ie+1)*(2*ne+1),se=Math.floor(oe/2),de=Array(oe);for(var he=0;he<ee.length;he++){var ue=ee[he];for(var ce=ne;ce<this.height-ne;ce++)for(var ge=ie;ge<this.width-ie;ge++){var pe=0;for(var fe=-ne;fe<=ne;fe++)for(var _e=-ie;_e<=ie;_e++){var be=((ce+fe)*this.width+ge+_e)*this.channels+ue;de[pe++]=this.data[be]}var ye=(ce*this.width+ge)*this.channels+ue,xe=de.sort(E.asc)[se];le.data[ye]=xe}}if(this.alpha&&!ee.includes(this.channels))for(var we=this.components;we<this.data.length;we=we+this.channels)le.data[we]=this.data[we];return le.setBorder({size:[ie,ne],algorithm:ae}),le};var L=I("../../util/channel"),E=I("num-sort"),G=I("../Image"),W=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(G)},{"../../util/channel":267,"../Image":151,"num-sort":119}],184:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W){var Z=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Q=Z.channels;if(this.checkProcessable("multiply",{bitDepth:[8,16]}),0>=W)throw new Error("multiply: the value must be greater than 0");if(Q=(0,L.validateArrayOfChannels)(this,{channels:Q}),W=(0,E.checkNumberArray)(W),!isNaN(W))for(var $=0;$<Q.length;$++){var J=Q[$];for(var ee=0;ee<this.data.length;ee+=this.channels)this.data[ee+J]=Math.min(this.maxValue,this.data[ee+J]*W>>0)}else{if(this.data.length!==W.length)throw new Error("multiply: the data size is different");for(var te=0;te<Q.length;te++){var ae=Q[te];for(var ie=0;ie<this.data.length;ie+=this.channels)this.data[ie+ae]=Math.max(0,Math.min(this.maxValue,this.data[ie+ae]*W[ie+ae]>>0))}}return this};var L=I("../../util/channel"),E=I("../../util/value")},{"../../util/channel":267,"../../util/value":275}],185:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Z=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},Q=Z.kernelX,$=Q===void 0?G.GRADIENT_X:Q,J=Z.kernelY,ee=J===void 0?G.GRADIENT_Y:J,te=Z.border,ae=te===void 0?"copy":te,ie=Z.channels;this.checkProcessable("sobel",{bitDepth:[8,16]});var ne=E.default.call(this,$,{channels:ie,border:ae,bitDepth:32}),le=E.default.call(this,ee,{channels:ie,border:ae,bitDepth:32});return ne.hypotenuse(le,{bitDepth:this.bitDepth,channels:ie})};var L=I("../operator/convolution"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L),G=I("../../util/kernels")},{"../../util/kernels":273,"../operator/convolution":192}],186:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W){var Z=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Q=Z.channels;if(this.checkProcessable("subtract",{bitDepth:[8,16]}),Q=(0,L.validateArrayOfChannels)(this,{channels:Q}),W=(0,E.checkNumberArray)(W),!isNaN(W))for(var $=0;$<Q.length;$++){var J=Q[$];for(var ee=0;ee<this.data.length;ee+=this.channels)this.data[ee+J]=Math.max(0,this.data[ee+J]-W>>0)}else{if(this.data.length!==W.length)throw new Error("substract: the data size is different");for(var te=0;te<Q.length;te++){var ae=Q[te];for(var ie=0;ie<this.data.length;ie+=this.channels)this.data[ie+ae]=Math.max(0,Math.min(this.maxValue,this.data[ie+ae]-W[ie+ae]>>0))}}return this};var L=I("../../util/channel"),E=I("../../util/value")},{"../../util/channel":267,"../../util/value":275}],187:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.getKind=function(Q){return W[Q]},T.getTheoreticalPixelArraySize=function(Q){var $=Q.channels*Q.size;return 1===Q.bitDepth&&($=Math.ceil($/8)),$},T.createPixelArray=function(Q){var $=Q.channels*Q.size,J=void 0;switch(Q.bitDepth){case 1:J=new Uint8Array(Math.ceil($/8));break;case 8:J=new Uint8ClampedArray($);break;case 16:J=new Uint16Array($);break;case 32:J=new Float32Array($);break;default:throw new Error("Cannot create pixel array for bit depth "+Q.bitDepth);}if(Q.alpha)for(var ee=Q.components;ee<J.length;ee+=Q.channels)J[ee]=Q.maxValue;return J};var L=I("./kindNames"),E=function(Q){if(Q&&Q.__esModule)return Q;var $={};if(null!=Q)for(var J in Q)Object.prototype.hasOwnProperty.call(Q,J)&&($[J]=Q[J]);return $.default=Q,$}(L),G=I("./model/model"),W={};W[E.BINARY]={components:1,alpha:0,bitDepth:1,colorModel:G.GREY},W[E.GREYA]={components:1,alpha:1,bitDepth:8,colorModel:G.GREY},W[E.GREY]={components:1,alpha:0,bitDepth:8,colorModel:G.GREY},W[E.RGBA]={components:3,alpha:1,bitDepth:8,colorModel:G.RGB},W[E.RGB]={components:3,alpha:0,bitDepth:8,colorModel:G.RGB},W[E.CMYK]={components:4,alpha:0,bitDepth:8,colorModel:G.CMYK},W[E.CMYKA]={components:4,alpha:1,bitDepth:8,colorModel:G.CMYK}},{"./kindNames":188,"./model/model":191}],188:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.BINARY="BINARY",T.GREY="GREY",T.GREYA="GREYA",T.RGB="RGB",T.RGBA="RGBA",T.CMYK="CMYK",T.CMYKA="CMYKA"},{}],189:[function(I,R,T){"use strict";function L(pe){return pe&&pe.__esModule?pe:{default:pe}}function E(pe){return(255&pe)<<8|255&pe>>8}function G(pe,fe,_e){function be(ke,ve){if(!ke)throw new Error(`This kind of image (${ye}) can only be loaded from URL.`);return ee(ke,ve)}var ye=(0,ue.default)(pe);if(ye)switch(ye.ext){case"png":return Z(pe);case"jpg":{var xe=(0,se.decode)(pe),we=void 0;return xe.exif&&(we=$(xe.exif)),be(_e,{meta:we})}case"tif":return Q(pe);}return be(_e)}function W(pe,fe){var _e=pe.slice(0,64).match(ge),be=void 0;return be=_e?Promise.resolve((0,ce.decode)(pe.slice(_e[0].length))):(0,le.fetchBinary)(pe,fe),be.then(ye=>{var xe=new Uint8Array(ye);return G(xe,fe,pe)})}function Z(pe){var fe=new oe.PNGDecoder(pe),_e=fe.decode(),be=_e.bitDepth,ye=_e.data.buffer,xe=void 0;if(8===be)xe=new Uint8ClampedArray(ye);else if(16===be){xe=new Uint16Array(ye);for(var we=0;we<xe.length;we++)xe[we]=E(xe[we])}var ke=_e.colourType,ve=void 0,Me=0;switch(ke){case 0:ve=1;break;case 2:ve=3;break;case 4:ve=1,Me=1;break;case 6:ve=3,Me=1;break;default:throw new Error(`Unexpected colourType: ${ke}`);}return new ae.default(_e.width,_e.height,xe,{components:ve,alpha:Me,bitDepth:be})}function Q(pe){var fe=(0,de.decode)(pe);return 1===fe.length?J(fe[0]):new ne.default(fe.map(J))}function $(pe){var fe={tiff:pe};return pe.exif&&(fe.exif=pe.exif),pe.gps&&(fe.gps=pe.gps),fe}function J(pe){return new ae.default(pe.width,pe.height,pe.data,{components:1,alpha:0,colorModel:null,bitDepth:pe.bitsPerSample.length?pe.bitsPerSample[0]:pe.bitsPerSample,meta:$(pe)})}function ee(pe,fe){return fe=fe||{},new Promise(function(_e,be){var ye=new le.DOMImage;(0,le.isDifferentOrigin)(pe)&&(ye.crossOrigin="Anonymous"),ye.onload=function(){var xe=ye.width,we=ye.height,ke=new le.Canvas(xe,we),ve=ke.getContext("2d");ve.drawImage(ye,0,0,xe,we);var Me=ve.getImageData(0,0,xe,we).data;_e(new ae.default(xe,we,Me,fe))},ye.onerror=function(){be(new Error("Could not load "+pe))},ye.src=pe})}Object.defineProperty(T,"__esModule",{value:!0}),T.loadImage=function(fe,_e){if("string"==typeof fe)return W(fe,_e);if(fe instanceof ArrayBuffer)return Promise.resolve(G(new Uint8Array(fe),_e));if(fe.buffer)return Promise.resolve(G(fe,_e));throw new Error("argument to \"load\" must be a string or buffer.")};var te=I("./Image"),ae=L(te),ie=I("../stack/Stack"),ne=L(ie),le=I("./environment"),oe=I("fast-png"),se=I("fast-jpeg"),de=I("tiff"),he=I("image-type"),ue=L(he),ce=I("../util/base64"),ge=/^data:[a-z]+\/([a-z]+);base64,/},{"../stack/Stack":256,"../util/base64":266,"./Image":151,"./environment":165,"fast-jpeg":40,"fast-png":43,"image-type":50,tiff:142}],190:[function(I,R,T){"use strict";function L(J){Q||(Q=new G.default(1,1));var ee=Z.get(J);return ee||(ee=new $(J),Z.set(J,ee)),ee}Object.defineProperty(T,"__esModule",{value:!0}),T.canWrite=function(ee){return"node"===W.env&&"image/png"!==ee?!1:L(ee).canWrite()},T.getType=function(ee){return ee.includes("/")||(ee="image/"+ee),ee};var E=I("./Image"),G=function(ee){return ee&&ee.__esModule?ee:{default:ee}}(E),W=I("./environment"),Z=new Map,Q=void 0;class ${constructor(J){this.type=J,this._canWrite=null}canWrite(){return null===this._canWrite&&(this._canWrite=Q.toDataURL(this.type).startsWith("data:"+this.type)),this._canWrite}}},{"./Image":151,"./environment":165}],191:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.RGB="RGB",T.HSL="HSL",T.HSV="HSV",T.CMYK="CMYK",T.GREY="GREY"},{}],192:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function($){var J=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},ee=J.channels,te=J.bitDepth,ae=J.normalize,ie=void 0!==ae&&ae,ne=J.divisor,le=void 0===ne?1:ne,oe=J.border,se=void 0===oe?"copy":oe,de=J.algorithm,he=void 0===de?"auto":de,ue=E.default.createFrom(this,{bitDepth:te});ee=(0,G.validateArrayOfChannels)(this,ee,!0);var ce=(0,W.validateKernel)($);$=ce.kernel,"auto"===he&&(9<$.length||9<$[0].length?he="fft":he="direct"),(4096<this.width||4096<this.height)&&(he="direct");var ge=Math.floor($.length/2),pe=Math.floor($[0].length/2),fe=ue.isClamped,_e=Array(this.height*this.width),be=void 0,ye=void 0,xe=void 0,we=void 0,ke=void 0,ve=void 0;for(we=0;we<ee.length;we++){for(ke=ee[we],xe=0;xe<this.height;xe++)for(ye=0;ye<this.width;ye++)be=xe*this.width+ye,_e[be]=this.data[be*this.channels+ke];for(ve="direct"===he?Z.direct(_e,$,{rows:this.height,cols:this.width,normalize:ie,divisor:le}):Z.fft(_e,$,{rows:this.height,cols:this.width,normalize:ie,divisor:le}),xe=0;xe<this.height;xe++)for(ye=0;ye<this.width;ye++)be=xe*this.width+ye,ue.data[be*this.channels+ke]=fe?Math.min(Math.max(ve[be],0),ue.maxValue):ve[be]}if(this.alpha&&!ee.includes(this.channels))for(ye=this.components;ye<this.data.length;ye=ye+this.channels)ue.data[ye]=this.data[ye];return"periodic"!==se&&ue.setBorder({size:[pe,ge],algorithm:se}),ue};var L=I("../Image"),E=function($){return $&&$.__esModule?$:{default:$}}(L),G=I("../../util/channel"),W=I("../../util/kernel"),Z=I("ml-matrix-convolution")},{"../../util/channel":267,"../../util/kernel":272,"../Image":151,"ml-matrix-convolution":82}],193:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return G=Object.assign({},G),G.algorithm="fft",this.convolution(E,G)}},{}],194:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W){var Z=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Q=Z.position;if(this.checkProcessable("extract",{bitDepth:[1,8,16]}),!Q&&(Q=W.getRelativePosition(this),!Q))throw new Error("extract : can not extract an image because the relative position can not be determined, try to specify manually the position as an array of 2 elements [x,y].");if(1<this.bitDepth){var $=E.default.createFrom(this,{width:W.width,height:W.height,alpha:1,position:Q,parent:this});for(var J=0;J<W.width;J++)for(var ee=0;ee<W.height;ee++){for(var te=0;te<this.channels;te++){var ae=this.getValueXY(J+Q[0],ee+Q[1],te);$.setValueXY(J,ee,te,ae)}W.getBitXY(J,ee)||$.setValueXY(J,ee,this.components,0)}return $}var ie=E.default.createFrom(this,{width:W.width,height:W.height,position:Q,parent:this});for(var ne=0;ne<W.height;ne++)for(var le=0;le<W.width;le++)W.getBitXY(le,ne)&&this.getBitXY(le+Q[0],ne+Q[1])&&ie.setBitXY(le,ne);return ie};var L=I("../Image"),E=function(W){return W&&W.__esModule?W:{default:W}}(L)},{"../Image":151}],195:[function(I,R,T){"use strict";function L($){return $&&$.__esModule?$:{default:$}}function E($,J){this.x=$,this.y=J}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var J=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},ee=J.x,te=void 0===ee?0:ee,ae=J.y,ie=void 0===ae?0:ae,ne=J.inPlace,le=void 0===ne||ne,oe=le?this:Q.default.createFrom(this);if(this.checkProcessable("floodFill",{bitDepth:1}),1===this.bitDepth){var se=this.getBitXY(te,ie);if(se)return oe;var de=new W.default;for(de.push(new E(te,ie));0<de.length;){var he=de.shift();oe.setBitXY(he.x,he.y);for(var ue=he.x+1;ue<this.width&&!oe.getBitXY(ue,he.y)&&!this.getBitXY(ue,he.y);ue++)oe.setBitXY(ue,he.y),he.y+1<this.height&&!this.getBitXY(ue,he.y+1)&&de.push(new E(ue,he.y+1)),0<=he.y-1&&!this.getBitXY(ue,he.y-1)&&de.push(new E(ue,he.y-1));for(var ce=he.x-1;0<=ce&&!oe.getBitXY(ce,he.y)&&!this.getBitXY(ce,he.y);ce++)oe.setBitXY(ce,he.y),he.y+1<this.height&&!this.getBitXY(ce,he.y+1)&&de.push(new E(ce,he.y+1)),0<=he.y-1&&!this.getBitXY(ce,he.y-1)&&de.push(new E(ce,he.y-1))}}return oe};var G=I("fast-list"),W=L(G),Z=I("../Image"),Q=L(Z)},{"../Image":151,"fast-list":41}],196:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W,Z){var Q=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},$=Q.color,J=void 0===$?"blue":$,ee=Q.colors,te=Q.font,ae=void 0===te?"12px Helvetica":te,ie=Q.rotate,ne=void 0===ie?0:ie;if(this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:L.RGB}),!Array.isArray(W))throw Error("paintLabels: labels must be an array");if(!Array.isArray(Z))throw Error("paintLabels: positions must be an array");if(J&&!Array.isArray(J)&&(J=(0,E.css2array)(J)),ee=ee?ee.map(function(ue){return Array.isArray(ue)?ue:(0,E.css2array)(ue)}):[J],W.length!==Z.length)throw Error("paintLabels: positions and labels must be arrays from the same size");Array.isArray(ae)||(ae=[ae]),Array.isArray(ne)||(ne=[ne]);var le=this.getCanvas({originalData:!0}),oe=le.getContext("2d");for(var se=0;se<W.length;se++){oe.save();var de=ee[se%ee.length];oe.fillStyle=`rgba(${de[0]},${de[1]},${de[2]},${de[3]/this.maxValue})`,oe.font=ae[se%ae.length];var he=Z[se];oe.translate(he[0],he[1]),oe.rotate(ne[se%ne.length]/180*Math.PI),oe.fillText(W[se],0,0),oe.restore()}return this.setData(oe.getImageData(0,0,this.width,this.height).data),this};var L=I("../model/model"),E=I("../../util/color")},{"../../util/color":268,"../model/model":191}],197:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W){var Z=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},Q=Z.color,$=Q===void 0?"red":Q,J=Z.colors,ee=Z.alpha,te=ee===void 0?255:ee,ae=Z.randomColors,ie=ae!==void 0&&ae,ne=Z.distinctColors,le=ne!==void 0&&ne,oe=Z.labels,se=oe===void 0?[]:oe,de=Z.labelsPosition,he=de===void 0?[]:de,ue=Z.labelColor,ce=ue===void 0?"blue":ue,ge=Z.labelFont,pe=ge===void 0?"12px Helvetica":ge;this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:L.RGB}),$&&!Array.isArray($)&&($=(0,E.css2array)($)),J&&(J=J.map(function(Pe){return Array.isArray(Pe)?Pe:(0,E.css2array)(Pe)})),Array.isArray(W)||(W=[W]),le&&(J=(0,E.getDistinctColors)(W.length));for(var fe=0;fe<W.length;fe++){var _e=W[fe];J?$=J[fe%J.length]:ie&&($=(0,E.getRandomColor)());for(var be=0;be<_e.width;be++)for(var ye=0;ye<_e.height;ye++)if(_e.getBitXY(be,ye))for(var xe=0;xe<Math.min(this.components,$.length);xe++)if(255===te)this.setValueXY(be+_e.position[0],ye+_e.position[1],xe,$[xe]);else{var we=this.getValueXY(be+_e.position[0],ye+_e.position[1],xe);we=Math.round((we*(255-te)+$[xe]*te)/255),this.setValueXY(be+_e.position[0],ye+_e.position[1],xe,we)}}if(Array.isArray(se)&&0<se.length){var ke=this.getCanvas({originalData:!0}),ve=ke.getContext("2d");ve.fillStyle=ce,ve.font=pe;for(var Me=0;Me<Math.min(W.length,se.length);Me++){var je=he[Me]?he[Me]:W[Me].position;ve.fillText(se[Me],je[0],je[1])}this.setData(ve.getImageData(0,0,this.width,this.height).data)}return this};var L=I("../model/model"),E=I("../../util/color")},{"../../util/color":268,"../model/model":191}],198:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){var Q=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},$=Q.color,J=$===void 0?[this.maxValue,0,0]:$,ee=Q.shape;this.checkProcessable("paintPoints",{components:3,bitDepth:[8,16],colorModel:L.RGB});var te=new G.default(ee).getPoints(),ae=Math.min(this.channels,J.length);for(var ie=0;ie<Z.length;ie++){var ne=Z[ie][0],le=Z[ie][1];for(var oe=0;oe<te.length;oe++){var se=te[oe][0],de=te[oe][1];if(0<=ne+se&&0<=le+de&&ne+se<this.width&&le+de<this.height){var he=(ne+se+(le+de)*this.width)*this.channels;for(var ue=0;ue<ae;ue++)this.data[he+ue]=J[ue]}}}return this};var L=I("../model/model"),E=I("../../util/Shape"),G=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(E)},{"../../util/Shape":265,"../model/model":191}],199:[function(I,R,T){"use strict";function L(oe){return oe&&oe.__esModule?oe:{default:oe}}function E(oe){var se=oe.map,de=se.data,he=new Set,ue=new Map,ce=new Set,ge=[1,0,-1,0],pe=[0,1,0,-1];for(var fe=oe.minX;fe<=oe.maxX;fe++)for(var _e=oe.minY;_e<=oe.maxY;_e++){var be=fe+_e*se.width;if(de[be]===oe.id)for(var ye=0;4>ye;ye++){var xe=fe+ge[ye],we=_e+pe[ye];if(0<=xe&&0<=we&&xe<se.width&&we<se.height){var ke=xe+we*se.width;if(de[ke]!==oe.id&&!ce.has(ke)){ce.add(ke),he.add(de[ke]);var ve=ue.get(de[ke]);ve?ue.set(de[ke],++ve):ue.set(de[ke],1)}}}}var Me=Array.from(he),je=Me.map(function(Pe){return ue.get(Pe)});return{ids:Me,lengths:je}}function G(oe){var se=new Set,de=oe.map,he=de.data;for(var ue of[0,oe.height-1])for(var ce=0;ce<oe.width;ce++){var ge=(ue+oe.minY)*de.width+ce+oe.minX;if(0<ce-oe.minX&&he[ge]===oe.id&&he[ge-1]!==oe.id){var pe=he[ge-1];se.add(pe)}if(1<de.width-ce-oe.minX&&he[ge]===oe.id&&he[ge+1]!==oe.id){var fe=he[ge+1];se.add(fe)}}for(var _e of[0,oe.width-1])for(var be=0;be<oe.height;be++){var ye=(be+oe.minY)*de.width+_e+oe.minX;if(0<be-oe.minY&&he[ye]===oe.id&&he[ye-de.width]!==oe.id){var xe=he[ye-de.width];se.add(xe)}if(1<de.height-be-oe.minY&&he[ye]===oe.id&&he[ye+de.width]!==oe.id){var we=he[ye+de.width];se.add(we)}}return Array.from(se)}function W(oe){var se=0,de=oe.map,he=de.data,ue=[0];1<oe.height&&(ue[1]=oe.height-1);for(var ce of ue)for(var ge=1;ge<oe.width-1;ge++){var pe=(ce+oe.minY)*de.width+ge+oe.minX;he[pe]===oe.id&&se++}var fe=[0];1<oe.width&&(fe[1]=oe.width-1);for(var _e of fe)for(var be=0;be<oe.height;be++){var ye=(be+oe.minY)*de.width+_e+oe.minX;he[ye]===oe.id&&se++}return se}function Z(oe){var se=0,de=oe.map,he=de.data;for(var ue=1;ue<oe.width-1;ue++)for(var ce=1;ce<oe.height-1;ce++){var ge=(ce+oe.minY)*de.width+ue+oe.minX;he[ge]===oe.id&&(he[ge-1]!==oe.id||he[ge+1]!==oe.id||he[ge-de.width]!==oe.id||he[ge+de.width]!==oe.id)&&se++}return se+oe.box}function Q(oe){var se=0,de=oe.map,he=de.data;for(var ue=1;ue<oe.width-1;ue++)for(var ce=1;ce<oe.height-1;ce++){var ge=(ce+oe.minY)*de.width+ue+oe.minX;he[ge]===oe.id&&(oe.externalIDs.includes(he[ge-1])||oe.externalIDs.includes(he[ge+1])||oe.externalIDs.includes(he[ge-de.width])||oe.externalIDs.includes(he[ge+de.width]))&&se++}return se+oe.box}function $(oe){var se=[oe.id],de=oe.map,he=de.data;if(2<oe.height)for(var ue=0;ue<oe.width;ue++){var ce=oe.minY*de.width+ue+oe.minX;if(se.includes(he[ce])){var ge=he[ce+de.width];se.includes(ge)||oe.boxIDs.includes(ge)||se.push(ge)}}var pe=[,,,,];for(var fe=1;fe<oe.width-1;fe++)for(var _e=1;_e<oe.height-1;_e++){var be=(_e+oe.minY)*de.width+fe+oe.minX;if(se.includes(he[be])){pe[0]=he[be-1],pe[1]=he[be+1],pe[2]=he[be-de.width],pe[3]=he[be+de.width];for(var ye=0;4>ye;ye++){var xe=pe[ye];se.includes(xe)||oe.boxIDs.includes(xe)||se.push(xe)}}}return se}Object.defineProperty(T,"__esModule",{value:!0});var J=I("../Image"),ee=L(J),te=I("../kindNames"),ae=function(se){if(se&&se.__esModule)return se;var de={};if(null!=se)for(var he in se)Object.prototype.hasOwnProperty.call(se,he)&&(de[he]=se[he]);return de.default=se,de}(te),ie=I("../../util/Shape"),ne=L(ie);class le{constructor(oe,se){this.map=oe,this.id=se,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,this.meanX=0,this.meanY=0,this.surface=0,this.computed={}}getMask(){var oe=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},se=oe.scale,de=void 0===se?1:se,he=oe.kind,ue=void 0===he?"":he,ce=void 0;return ce="contour"===ue?this.contourMask:"box"===ue?this.boxMask:"filled"===ue?this.filledMask:"center"===ue?this.centerMask:this.mask,1>de&&(ce=ce.scale({factor:de}),ce.parent=this.mask.parent,ce.position[0]+=this.minX,ce.position[1]+=this.minY),ce}get mean(){throw new Error("Roi mean not implemented yet")}get center(){return this.computed.center?this.computed.center:this.computed.center=[this.width/2>>0,this.height/2>>0]}get width(){return this.maxX-this.minX+1}get height(){return this.maxY-this.minY+1}_computExternalIDs(){var oe=this.borderIDs,se=this.borderLengths;this.computed.externalIDs=[],this.computed.externalLengths=[];var de=this.internalIDs;for(var he=0;he<oe.length;he++)de.includes(oe[he])||(this.computed.externalIDs.push(oe[he]),this.computed.externalLengths.push(se[he]))}get externalIDs(){return this.computed.externalIDs?this.computed.externalIDs:(this._computExternalIDs(),this.computed.externalIDs)}get externalLengths(){return this.computed.externalLengths?this.computed.externalLengths:(this._computExternalIDs(),this.computed.externalLengths)}_computeBorderIDs(){var oe=E(this);this.computed.borderIDs=oe.ids,this.computed.borderLengths=oe.lengths}get borderIDs(){return this.computed.borderIDs?this.computed.borderIDs:(this._computeBorderIDs(),this.computed.borderIDs)}get borderLengths(){return this.computed.borderLengths?this.computed.borderLengths:(this._computeBorderIDs(),this.computed.borderLengths)}get boxIDs(){return this.computed.boxIDs?this.computed.boxIDs:this.computed.boxIDs=G(this)}get internalIDs(){return this.computed.internalIDs?this.computed.internalIDs:this.computed.internalIDs=$(this)}get box(){return this.computed.box?this.computed.box:this.computed.box=W(this)}get external(){return this.computed.external?this.computed.external:this.computed.external=Q(this)}get border(){return this.computed.border?this.computed.border:this.computed.border=Z(this)}get contourMask(){if(this.computed.contourMask)return this.computed.contourMask;var oe=new ee.default(this.width,this.height,{kind:ae.BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(var se=0;se<this.width;se++)for(var de=0;de<this.height;de++)this.map.data[se+this.minX+(de+this.minY)*this.map.width]===this.id&&(0<se&&se<this.width-1&&0<de&&de<this.height-1?(this.map.data[se-1+this.minX+(de+this.minY)*this.map.width]!==this.id||this.map.data[se+1+this.minX+(de+this.minY)*this.map.width]!==this.id||this.map.data[se+this.minX+(de-1+this.minY)*this.map.width]!==this.id||this.map.data[se+this.minX+(de+1+this.minY)*this.map.width]!==this.id)&&oe.setBitXY(se,de):oe.setBitXY(se,de));return this.computed.contour=oe}get boxMask(){if(this.computed.boxMask)return this.computed.boxMask;var oe=new ee.default(this.width,this.height,{kind:ae.BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(var se=0;se<this.width;se++)oe.setBitXY(se,0),oe.setBitXY(se,this.height-1);for(var de=0;de<this.height;de++)oe.setBitXY(0,de),oe.setBitXY(this.width-1,de);return this.computed.boxMask=oe}get mask(){if(this.computed.mask)return this.computed.mask;var oe=new ee.default(this.width,this.height,{kind:ae.BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(var se=0;se<this.width;se++)for(var de=0;de<this.height;de++)this.map.data[se+this.minX+(de+this.minY)*this.map.width]===this.id&&oe.setBitXY(se,de);return this.computed.mask=oe}get filledMask(){if(this.computed.filledMask)return this.computed.filledMask;var oe=new ee.default(this.width,this.height,{kind:ae.BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(var se=0;se<this.width;se++)for(var de=0;de<this.height;de++){var he=se+this.minX+(de+this.minY)*this.map.width;this.internalIDs.includes(this.map.data[he])&&oe.setBitXY(se,de)}return this.computed.filledMask=oe}get centerMask(){if(this.computed.centerMask)return this.computed.centerMask;var oe=new ne.default({kind:"smallCross"}).getMask();return oe.parent=this.map.parent,oe.position=[this.minX+this.center[0]-1,this.minY+this.center[1]-1],this.computed.centerMask=oe}get points(){if(this.computed.points)return this.computed.points;var oe=[];for(var se=0;se<this.height;se++)for(var de=0;de<this.width;de++){var he=(se+this.minY)*this.map.width+de+this.minX;this.map.data[he]===this.id&&oe.push([de,se])}return this.computed.points=oe}get maxLengthPoints(){if(this.computed.maxLengthPoints)return this.computed.maxLengthPoints;var oe=0,se=void 0,de=this.points;for(var he=0;he<de.length;he++)for(var ue=he+1;ue<de.length;ue++){var ce=Math.pow(de[he][0]-de[ue][0],2)+Math.pow(de[he][1]-de[ue][1],2);ce>=oe&&(oe=ce,se=[de[he],de[ue]])}return this.computed.maxLengthPoints=se}get maxLength(){if(this.computed.maxLength)return this.computed.maxLength;var oe=Math.sqrt(Math.pow(this.maxLengthPoints[0][0]-this.maxLengthPoints[1][0],2)+Math.pow(this.maxLengthPoints[0][1]-this.maxLengthPoints[1][1],2));return this.computed.maxLength=oe}get angle(){if(this.computed.angle)return this.computed.angle;var oe=this.maxLengthPoints,se=180*-Math.atan2(oe[0][1]-oe[1][1],oe[0][0]-oe[1][0])/Math.PI;return this.computed.angle=se}toJSON(){return{id:this.id,minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,meanX:this.meanX,meanY:this.meanY,height:this.height,width:this.width,surface:this.surface}}}T.default=le},{"../../util/Shape":265,"../Image":151,"../kindNames":188}],200:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var L=I("./Roi"),E=function(W){return W&&W.__esModule?W:{default:W}}(L);T.default=class{constructor(W,Z){this.roiMap=W,this.options=Z,this.roi=this.createRoi()}createRoi(){var W=this.roiMap.data,Z={};this.roiMap.positive=0,this.roiMap.negative=0;for(var Q=0;Q<W.length;Q++)W[Q]&&!Z[W[Q]]&&(Z[W[Q]]=!0,0<W[Q]?this.roiMap.positive++:this.roiMap.negative++);var $={};for(var J in Z)$[J]=new E.default(this.roiMap,1*J);var ee=this.roiMap.width,te=this.roiMap.height;for(var ae=0;ae<ee;ae++)for(var ie=0;ie<te;ie++){var ne=ie*ee+ae;if(0!==W[ne]){var le=W[ne],oe=$[le];ae<oe.minX&&(oe.minX=ae),ae>oe.maxX&&(oe.maxX=ae),ie<oe.minY&&(oe.minY=ie),ie>oe.maxY&&(oe.maxY=ie),oe.meanX+=ae,oe.meanY+=ie,oe.surface++}}var se=[];for(var de in Z)$[de].meanX/=$[de].surface,$[de].meanY/=$[de].surface,se.push($[de]);return se}}},{"./Roi":199}],201:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});class L{constructor(E,G){this.parent=E,this.width=E.width,this.height=E.height,this.data=G,this.negative=0,this.positive=0}get total(){return this.negative+this.positive}}T.default=L},{}],202:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W){function Z(de,he){var ue=0,ce=0,ge=W.getBitXY(de,he),pe=ge?++te:--ae;for(ne[0]=de,le[0]=he;ue<=ce;){var fe=ne[ue&ie],_e=le[ue&ie];if(ee[_e*W.width+fe]=pe,0<fe&&0===ee[_e*W.width+fe-1]&&W.getBitXY(fe-1,_e)===ge&&(ce++,ne[ce&ie]=fe-1,le[ce&ie]=_e,ee[_e*W.width+fe-1]=-32768),0<_e&&0===ee[(_e-1)*W.width+fe]&&W.getBitXY(fe,_e-1)===ge&&(ce++,ne[ce&ie]=fe,le[ce&ie]=_e-1,ee[(_e-1)*W.width+fe]=-32768),fe<W.width-1&&0===ee[_e*W.width+fe+1]&&W.getBitXY(fe+1,_e)===ge&&(ce++,ne[ce&ie]=fe+1,le[ce&ie]=_e,ee[_e*W.width+fe+1]=-32768),_e<W.height-1&&0===ee[(_e+1)*W.width+fe]&&W.getBitXY(fe,_e+1)===ge&&(ce++,ne[ce&ie]=fe,le[ce&ie]=_e+1,ee[(_e+1)*W.width+fe]=-32768),J&&(0<fe&&0<_e&&0===ee[(_e-1)*W.width+fe-1]&&W.getBitXY(fe-1,_e-1)===ge&&(ce++,ne[ce&ie]=fe-1,le[ce&ie]=_e-1,ee[(_e-1)*W.width+fe-1]=-32768),fe<W.width-1&&0<_e&&0===ee[(_e-1)*W.width+fe+1]&&W.getBitXY(fe+1,_e-1)===ge&&(ce++,ne[ce&ie]=fe+1,le[ce&ie]=_e-1,ee[(_e-1)*W.width+fe+1]=-32768),0<fe&&_e<W.height-1&&0===ee[(_e+1)*W.width+fe-1]&&W.getBitXY(fe-1,_e+1)===ge&&(ce++,ne[ce&ie]=fe-1,le[ce&ie]=_e+1,ee[(_e+1)*W.width+fe-1]=-32768),fe<W.width-1&&_e<W.height-1&&0===ee[(_e+1)*W.width+fe+1]&&W.getBitXY(fe+1,_e+1)===ge&&(ce++,ne[ce&ie]=fe+1,le[ce&ie]=_e+1,ee[(_e+1)*W.width+fe+1]=-32768)),ue++,ce-ue>ie)throw new Error("analyseMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY")}}var Q=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},$=Q.allowCorners,J=$!==void 0&&$,ee=new Int16Array(W.size),te=0,ae=0,ie=65535,ne=new Uint16Array(ie+1),le=new Uint16Array(ie+1);for(var oe=0;oe<W.width;oe++)for(var se=0;se<W.height;se++)0===ee[se*W.width+oe]&&Z(oe,se);return new E.default(W,ee)};var L=I("../RoiMap"),E=function(W){return W&&W.__esModule?W:{default:W}}(L)},{"../RoiMap":201}],203:[function(I,R,T){"use strict";function L(ie){return ie&&ie.__esModule?ie:{default:ie}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(ne){var le=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},oe=le.allowCorners,se=oe!==void 0&&oe,de=4;se&&(de=8);var he=void 0,ue=void 0,ce=void 0;if(8==de)he=ee,ue=te,ce=ae;else if(4==de)he=Q,ue=$,ce=J;else throw new RangeError("unsupported neighbours count: "+de);var ge=ne.size,pe=ne.width,fe=ne.height,_e=Array(ge),be=new Int16Array(ge),ye=new G.default,xe=1;for(var we=0;we<fe;we++)for(var ke=0;ke<pe;ke++){var ve=ke+we*pe;if(ne.getBit(ve)){var Me=null;for(var je=0;je<ce.length;je++){var Pe=ke+he[je],Ie=we+ue[je];if(0<=Pe&&0<=Ie&&Pe<pe&&Ie<fe){var De=_e[Pe+Ie*pe];De?(ce[je]=De,(!Me||ce[je].value<Me.value)&&(Me=ce[je])):ce[je]=null}}if(!Me)_e[ve]=ye.add(xe++);else{_e[ve]=Me;for(var Se=0;Se<ce.length;Se++)ce[Se]&&ce[Se]!==Me&&ye.union(Me,ce[Se])}}}for(var Ce=0;Ce<fe;Ce++)for(var Ae=0;Ae<pe;Ae++){var Be=Ae+Ce*pe;ne.getBit(Be)&&(be[Be]=ye.find(_e[Be]).value)}return new Z.default(ne,be)};var E=I("ml-disjoint-set"),G=L(E),W=I("../RoiMap"),Z=L(W),Q=[-1,0],$=[0,-1],J=[null,null],ee=[-1,-1,0,1],te=[0,-1,-1,-1],ae=[null,null,null,null]},{"../RoiMap":201,"ml-disjoint-set":66}],204:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){function W(je,Pe){var Ie=be;we=0,ke=1,ye[0]=je,xe[0]=Pe;for(var De=!0;we<ke;){var Se=ye[we&ge],Ce=xe[we&ge];De&=Z(Se,Ce,le),we++}if(!De){for(var Ae=0;Ae<ke;Ae++){var Be=ye[Ae&ge],Re=xe[Ae&ge],Te=Re*ne.width+Be;he[Te]=0}be=Ie}return De}function Z(je,Pe,Ie){var De=he[Pe*ne.width+je],Se=ne.data[Pe*ne.width+je];for(var Ce=Pe-1;Ce<=Pe+1;Ce++)for(var Ae=je-1;Ae<=je+1;Ae++){var Be=Ce*ne.width+Ae;if(0===ue[Be])switch(ue[Be]=1,ce[Be]=ne.data[Be]-Se,Ie){case le:if(0===ce[Be]){if(0===Ae||0===Ce||Ae===ne.width-1||Ce===ne.height-1)return!1;he[Be]=De,ye[ke&ge]=Ae,xe[ke&ge]=Ce,ke++}else{if(0<ce[Be])return!1;te||(he[Be]=De,pe[be&ge]=Ae,fe[be&ge]=Ce,be++)}break;case oe:0>=ce[Be]&&(he[Be]=De,pe[be&ge]=Ae,fe[be&ge]=Ce,be++);break;default:throw new Error("unreachable");}}return!0}var Q=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},$=Q.allowCorner,J=!($!==void 0)||$,ee=Q.onlyTop,te=ee!==void 0&&ee,ae=Q.invert,ie=ae!==void 0&&ae,ne=this;ne.checkProcessable("fromMaxima",{components:[1]});var le=1,oe=2,se=0,de=0,he=new Int16Array(ne.size),ue=new Int8Array(ne.size),ce=new Float32Array(ne.size),ge=1048575,pe=new Uint16Array(ge+1),fe=new Uint16Array(ge+1),_e=0,be=0,ye=new Uint16Array(ge+1),xe=new Uint16Array(ge+1),we=0,ke=0;for(function(Pe){var Ie=Pe.maxima,De=void 0===Ie||Ie;for(var Se=1;Se<ne.height-1;Se++)for(var Ce=1;Ce<ne.width-1;Ce++){var Ae=Ce+Se*ne.width;if(0===ue[Ae]){var Be=De?ne.data[Ae]:-ne.data[Ce+Se*ne.width];if(ne.data[Se*ne.width+Ce-1]>Be)continue;if(ne.data[Se*ne.width+Ce+1]>Be)continue;if(ne.data[(Se-1)*ne.width+Ce]>Be)continue;if(ne.data[(Se+1)*ne.width+Ce]>Be)continue;if(J){if(ne.data[(Se-1)*ne.width+Ce-1]>Be)continue;if(ne.data[(Se-1)*ne.width+Ce+1]>Be)continue;if(ne.data[(Se+1)*ne.width+Ce-1]>Be)continue;if(ne.data[(Se+1)*ne.width+Ce+1]>Be)continue}he[Ae]=De?++se:--de;var Re=W(Ce,Se,le);Re||(De?--se:++de)}}}(ne,{maxima:!ie});_e<be;){var ve=pe[_e&ge],Me=fe[_e&ge];Z(ve,Me,oe),_e++}return new E.default(ne,he)};var L=I("../RoiMap"),E=function(W){return W&&W.__esModule?W:{default:W}}(L)},{"../RoiMap":201}],205:[function(I,R,T){"use strict";function L(Q){return Q&&Q.__esModule?Q:{default:Q}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function($){var J=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},ee=new Z.default(J),te=new Int16Array(this.size),ae=0,ie=ee.getPoints();for(var ne=0;ne<$.length;ne++){ae++;var le=$[ne][0],oe=$[ne][1];for(var se=0;se<ie.length;se++){var de=ie[se][0],he=ie[se][1];0<=le+de&&0<=oe+he&&le+de<this.width&&oe+he<this.height&&(te[le+de+(oe+he)*this.width]=ae)}}return new G.default(this,te)};var E=I("../RoiMap"),G=L(E),W=I("./../../../util/Shape"),Z=L(W)},{"../RoiMap":201,"./../../../util/Shape":265}],206:[function(I,R,T){"use strict";function L($){return $&&$.__esModule?$:{default:$}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var J=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},ee=J.points,te=J.mask,ae=J.image,ie=J.fillMaxValue,ne=ie===void 0?this.maxValue:ie,le=J.invert,oe=le!==void 0&&le,se=ae||this;se.checkProcessable("fromWaterShed",{bitDepth:[8,16],components:1}),oe=!oe,ee||(ee=se.getLocalMaxima({invert:oe,mask:te}));var de=oe?0:1,he=new Int16Array(se.size),ue=se.width,ce=se.height,ge=new Z.default({comparator:(je,Pe)=>je[2]-Pe[2],strategy:Z.default.BinaryHeapStrategy});for(var pe=0;pe<ee.length;pe++){var fe=ee[pe][0]+ee[pe][1]*ue;he[fe]=pe+1;var _e=se.data[fe];(oe&&_e<=ne||!oe&&_e>=ne)&&ge.queue([ee[pe][0],ee[pe][1],_e])}for(;0<ge.length;){var be=ge.dequeue(),ye=be[0]+be[1]*ue;for(var xe=0;4>xe;xe++){var we=be[0]+Q.dxs[xe],ke=be[1]+Q.dys[xe];if(0<=we&&0<=ke&&we<ue&&ke<ce){var ve=we+ke*ue;if(!te||te.getBit(ve)===de){var Me=se.data[ve];(oe&&Me<=ne||!oe&&Me>=ne)&&0===he[ve]&&(he[ve]=he[ye],ge.queue([be[0]+Q.dxs[xe],be[1]+Q.dys[xe],Me]))}}}}return new G.default(se,he)};var E=I("../RoiMap"),G=L(E),W=I("js-priority-queue"),Z=L(W),Q=I("./../../../util/dxdy.js")},{"../RoiMap":201,"./../../../util/dxdy.js":270,"js-priority-queue":60}],207:[function(I,R,T){"use strict";function L(ge){return ge&&ge.__esModule?ge:{default:ge}}function E(ge,pe,fe,_e,be){var ye={id:[],surface:[],roiSurfaceCovered:[],same:0,opposite:0,total:0};for(var xe=0;xe<fe.length;xe++){var we=fe[xe],ke=we[0],ve=we[1],Me=ke+ge+(ve+pe)*_e.width,je=_e.data[Me];(0<je||0>je)&&(ye.id.includes(je)?ye.surface[ye.id.indexOf(je)]+=1:(ye.id.push(je),ye.surface.push(1)))}for(var Pe=0;Pe<ye.id.length;Pe++){var Ie=Math.sign(ye.id[Pe]);Ie===be?ye.same+=ye.surface[Pe]:ye.opposite+=ye.surface[Pe],ye.roiSurfaceCovered[Pe]=ye.surface[Pe]/fe.length}return ye.total=ye.opposite+ye.same,ye}Object.defineProperty(T,"__esModule",{value:!0});var G=I("./creator/fromMask"),W=L(G),Z=I("./creator/fromMaskConnectedComponentLabelingAlgorithm"),Q=L(Z),$=I("./creator/fromMaxima"),J=L($),ee=I("./creator/fromWaterShed"),te=L(ee),ae=I("./creator/fromPoints"),ie=L(ae),ne=I("extend"),le=L(ne),oe=I("../Image"),se=L(oe),de=I("./RoiMap"),he=L(de),ue=I("./RoiLayer"),ce=L(ue);T.default=class{constructor(pe){var fe=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this._image=pe,this._options=fe,this._options.label||(this._options.label="default"),this._layers={},this._painted=null}fromMaxima(){var pe=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},fe=(0,le.default)({},this._options,pe),_e=J.default.call(this._image,pe);this._layers[fe.label]=new ce.default(_e,fe)}fromPoints(pe){var fe=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_e=(0,le.default)({},this._options,fe),be=ie.default.call(this._image,pe,fe);return this._layers[_e.label]=new ce.default(be,_e),this}putMap(pe){var fe=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_e=new he.default(this._image,pe),be=(0,le.default)({},this._options,fe);return this._layers[be.label]=new ce.default(_e,be),this}fromWaterShed(){var pe=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},fe=(0,le.default)({},this._options,pe),_e=te.default.call(this._image,pe);this._layers[fe.label]=new ce.default(_e,fe)}fromMask(pe){var fe=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_e=(0,le.default)({},this._options,fe),be=W.default.call(this._image,pe,fe);return this._layers[_e.label]=new ce.default(be,_e),this}fromMaskConnectedComponentLabelingAlgorithm(pe){var fe=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_e=(0,le.default)({},this._options,fe),be=Q.default.call(this._image,pe,fe);return this._layers[_e.label]=new ce.default(be,_e),this}getMap(){var pe=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},fe=(0,le.default)({},this._options,pe);return this._assertLayerWithLabel(fe.label),this._layers[fe.label].roiMap}getRoiIds(){var pe=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},fe=this.getRois(pe);if(fe){var _e=Array(fe.length);for(var be=0;be<fe.length;be++)_e[be]=fe[be].id;return _e}throw new Error("ROIs not found")}getRois(){var pe=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},fe=pe.label,_e=void 0===fe?this._options.label:fe,be=pe.positive,ye=void 0===be||be,xe=pe.negative,we=void 0===xe||xe,ke=pe.minSurface,ve=void 0===ke?0:ke,Me=pe.maxSurface,je=void 0===Me?Number.POSITIVE_INFINITY:Me,Pe=pe.minWidth,Ie=void 0===Pe?0:Pe,De=pe.maxWidth,Se=void 0===De?Number.POSITIVE_INFINITY:De,Ce=pe.minHeight,Ae=void 0===Ce?0:Ce,Be=pe.maxHeight,Re=void 0===Be?Number.POSITIVE_INFINITY:Be;if(!this._layers[_e])throw new Error("getRoi: This Roi layer ("+_e+") does not exists.");var Te=this._layers[_e].roi,ze=Array(Te.length),Le=0;for(var Ee=0;Ee<Te.length;Ee++){var Ve=Te[Ee];(0>Ve.id&&we||0<Ve.id&&ye)&&Ve.surface>=ve&&Ve.surface<=je&&Ve.width>=Ie&&Ve.width<=Se&&Ve.height>=Ae&&Ve.height<=Re&&(ze[Le++]=Ve)}return ze.length=Le,ze}getMasks(){var pe=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},fe=this.getRois(pe),_e=Array(fe.length);for(var be=0;be<fe.length;be++)_e[be]=fe[be].getMask(pe);return _e}getData(){var pe=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},fe=(0,le.default)({},this._options,pe);return this._assertLayerWithLabel(fe.label),this._layers[fe.label].roiMap.data}paint(){var pe=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},fe=pe.labelProperty;this._painted||(this._painted=this._image.rgba8());var _e=this.getMasks(pe);if(fe){var be=this.getRois(pe);pe.labels=be.map(ye=>ye[fe]),pe.labelsPosition=be.map(ye=>[ye.meanX,ye.meanY])}return this._painted.paintMasks(_e,pe),this._painted}getMask(){var pe=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},fe=new se.default(this._image.width,this._image.height,{kind:"BINARY"}),_e=this.getMasks(pe);for(var be=0;be<_e.length;be++){var ye=_e[be];for(var xe=0;xe<ye.width;xe++)for(var we=0;we<ye.height;we++)ye.getBitXY(xe,we)&&fe.setBitXY(xe+ye.position[0],we+ye.position[1])}return fe}resetPainted(){var pe=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},fe=pe.image;this._painted=fe?this.image.rgba8():this._image.rgba8()}mergeRoi(){var pe=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},fe=(0,le.default)({},this._options,pe),_e=pe.algorithm,be=void 0===_e?"commonBorder":_e,ye=pe.minCommonBorderLength,xe=void 0===ye?5:ye,we=this.getRois(fe),ke=new Set;switch(be.toLowerCase()){case"commonborder":for(var ve=0;ve<we.length;ve++)for(var Me=0;Me<we[ve].borderIDs.length;Me++)0!==we[ve].borderIDs[Me]&&we[ve].borderIDs[Me]<we[ve].id&&we[ve].borderLengths[Me]*xe>=we[ve].border&&ke.add([we[ve].id,we[ve].borderIDs[Me]]);break;default:throw new Error(`Unexpected algorithm: ${be}`);}var je=this.getMap(fe).data;for(var Pe=0;Pe<je.length;Pe++)if(0!==je[Pe])for(var Ie of ke)je[Pe]===Ie[0]&&(je[Pe]=Ie[1]);return this.putMap(je,fe),this}findCorrespondingRoi(pe){var fe=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},_e=this.getRois(fe),be=[];for(var ye=0;ye<_e.length;ye++){var xe=_e[ye],we=xe.minX,ke=xe.minY,ve=xe.points,Me=Math.sign(xe.id),je=E(we,ke,ve,pe,Me);be.push(je)}return be}_assertLayerWithLabel(pe){if(!this._layers[pe])throw new Error(`no layer with label ${pe}`)}}},{"../Image":151,"./RoiLayer":200,"./RoiMap":201,"./creator/fromMask":202,"./creator/fromMaskConnectedComponentLabelingAlgorithm":203,"./creator/fromMaxima":204,"./creator/fromPoints":205,"./creator/fromWaterShed":206,extend:34}],208:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("cmyk",{bitDepth:[8,16],alpha:[0,1],colorModel:[L.RGB]});var Z=G.default.createFrom(this,{components:4,colorModel:L.CMYK}),Q=0,$=this.data;for(var J=0;J<$.length;J+=this.channels){var ee=$[J],te=$[J+1],ae=$[J+2],ie=Math.min(this.maxValue-ee,this.maxValue-te,this.maxValue-ae),ne=(this.maxValue-ee-ie)/(1-ie/this.maxValue),le=(this.maxValue-te-ie)/(1-ie/this.maxValue),oe=(this.maxValue-ae-ie)/(1-ie/this.maxValue);Z.data[Q++]=ne,Z.data[Q++]=le,Z.data[Q++]=oe,Z.data[Q++]=ie,this.alpha&&(Z.data[Q++]=$[J+3])}return Z};var L=I("../model/model"),E=I("../Image"),G=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(E)},{"../Image":151,"../model/model":191}],209:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var W=0<arguments.length&&void 0!==arguments[0]?arguments[0]:8;if(this.checkProcessable("colorDepth",{bitDepth:[8,16]}),![8,16].includes(W))throw Error("You need to specify the new colorDepth as 8 or 16");if(this.bitDepth===W)return this.clone();var Z=E.default.createFrom(this,{bitDepth:W});if(8===W)for(var Q=0;Q<this.data.length;Q++)Z.data[Q]=this.data[Q]>>8;else for(var $=0;$<this.data.length;$++)Z.data[$]=this.data[$]<<8|this.data[$];return Z};var L=I("../Image"),E=function(W){return W&&W.__esModule?W:{default:W}}(L)},{"../Image":151}],210:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var W=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Z=W.x,Q=void 0===Z?0:Z,$=W.y,J=void 0===$?0:$,ee=W.width,te=void 0===ee?this.width-Q:ee,ae=W.height,ie=void 0===ae?this.height-J:ae;if(Q=Math.round(Q),J=Math.round(J),te=Math.round(te),ie=Math.round(ie),Q>this.width-1||J>this.height-1)throw new RangeError(`crop: origin (x:${Q}, y:${J}) out of range (${this.width-1}; ${this.height-1})`);if(0>=te||0>=ie)throw new RangeError(`crop: width and height (width:${te}; height:${ie}) must be positive numbers`);if(0>Q||0>J)throw new RangeError(`crop: x and y (x:${Q}, y:${J}) must be positive numbers`);if(te>this.width-Q||ie>this.height-J)throw new RangeError(`crop: (x: ${Q}, y:${J}, width:${te}, height:${ie}) size is out of range`);var ne=E.default.createFrom(this,{width:te,height:ie}),le=te*this.channels,oe=J+ie,se=0,de=Q*this.channels;for(var he=J;he<oe;he++)for(var ue=he*this.width*this.channels+de,ce=ue+le;ue<ce;ue++)ne.data[se++]=this.data[ue];return ne};var L=I("../Image"),E=function(W){return W&&W.__esModule?W:{default:W}}(L)},{"../Image":151}],211:[function(I,R,T){"use strict";function L(Z,Q,$){for(var J=0;J<Z.width;J++)for(var ee=0;ee<Z.height;ee++)if(Z.getValueXY(J,ee,$)>=Q)return J;return-1}function E(Z,Q,$,J){for(var ee=0;ee<Z.height;ee++)for(var te=J;te<Z.width;te++)if(Z.getValueXY(te,ee,$)>=Q)return ee;return-1}function G(Z,Q,$,J){for(var ee=Z.height-1;0<=ee;ee--)for(var te=J;te<Z.width;te++)if(Z.getValueXY(te,ee,$)>=Q)return ee;return-1}function W(Z,Q,$,J,ee,te){for(var ae=Z.width-1;ae>=J;ae--)for(var ie=ee;ie<=te;ie++)if(Z.getValueXY(ae,ie,$)>=Q)return ae;return-1}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Q=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};this.checkProcessable("cropAlpha",{alpha:1});var $=Q.threshold,J=$===void 0?this.maxValue:$,ee=L(this,J,this.components);if(-1===ee)throw new Error("Could not find new dimensions. Threshold may be too high.");var te=E(this,J,this.components,ee),ae=G(this,J,this.components,ee),ie=W(this,J,this.components,ee,te,ae);return this.crop({x:ee,y:te,width:ie-ee+1,height:ae-te+1})}},{}],212:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Q=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},$=Q.algorithm,J=$===void 0?"luma709":$,ee=Q.keepAlpha,te=ee!==void 0&&ee,ae=Q.mergeAlpha,ie=!(ae!==void 0)||ae,ne=Q.allowGrey,le=ne!==void 0&&ne,oe={bitDepth:[8,16],alpha:[0,1]};le||(oe.colorModel=[G.RGB],oe.components=[3]),this.checkProcessable("grey",oe),1===this.components&&(J="red"),te&=this.alpha,ie&=this.alpha,te&&(ie=!1);var se=E.default.createFrom(this,{components:1,alpha:te,colorModel:null}),de=W.methods[J.toLowerCase()];if(!de)throw new Error("Unsupported grey algorithm: "+J);var he=0;for(var ue=0;ue<this.data.length;ue+=this.channels)ie?se.data[he++]=de(this.data,ue,this)*this.data[ue+this.components]/this.maxValue:(se.data[he++]=de(this.data,ue,this),se.alpha&&(se.data[he++]=this.data[ue+this.components]));return se};var L=I("../Image"),E=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(L),G=I("../model/model"),W=I("./greyAlgorithms")},{"../Image":151,"../model/model":191,"./greyAlgorithms":213}],213:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var L=T.methods={luma709:function(G,W){return 6966*G[W]+23436*G[W+1]+2366*G[W+2]>>15},luma601:function(G,W){return 9798*G[W]+19235*G[W+1]+3735*G[W+2]>>15},maximum:function(G,W){return Math.max(G[W],G[W+1],G[W+2])},minimum:function(G,W){return Math.min(G[W],G[W+1],G[W+2])},average:function(G,W){return(G[W]+G[W+1]+G[W+2])/3>>0},minmax:function(G,W){return(Math.max(G[W],G[W+1],G[W+2])+Math.min(G[W],G[W+1],G[W+2]))/2},red:function(G,W){return G[W]},green:function(G,W){return G[W+1]},blue:function(G,W){return G[W+2]},cyan:function(G,W,Z){var Q=L.black(G,W,Z);return(Z.maxValue-G[0]-Q)/(1-Q/Z.maxValue)>>0},magenta:function(G,W,Z){var Q=L.black(G,W,Z);return(Z.maxValue-G[1]-Q)/(1-Q/Z.maxValue)>>0},yellow:function(G,W,Z){var Q=L.black(G,W,Z);return(Z.maxValue-G[2]-Q)/(1-Q/Z.maxValue)>>0},black:function(G,W,Z){return Math.min(Z.maxValue-G[W],Z.maxValue-G[W+1],Z.maxValue-G[W+2])},hue:function(G,W,Z){var Q=L.min(G,W),$=L.max(G,W);if($===Q)return 0;var E=0,J=$-Q;switch($){case G[W]:E=(G[W+1]-G[W+2])/J+(G[W+1]<G[W+2]?6:0);break;case G[W+1]:E=(G[W+2]-G[W])/J+2;break;case G[W+2]:E=(G[W]-G[W+1])/J+4;break;default:throw new Error("unreachable");}return E/6*Z.maxValue>>0},saturation:function(G,W,Z){var Q=L.min(G,W),$=L.max(G,W);return 0===$?0:($-Q)/$*Z.maxValue},lightness:function(G,W){var Z=L.min(G,W),Q=L.max(G,W);return(Q+Z)/2}};Object.defineProperty(L,"luminosity",{enumerable:!1,value:L.lightness}),Object.defineProperty(L,"luminance",{enumerable:!1,value:L.lightness}),Object.defineProperty(L,"min",{enumerable:!1,value:L.minimum}),Object.defineProperty(L,"max",{enumerable:!1,value:L.maximum}),Object.defineProperty(L,"brightness",{enumerable:!1,value:L.maximum}),T.names=Object.keys(L)},{}],214:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("hsl",{bitDepth:[8,16],alpha:[0,1],colorModel:[L.RGB]});var Z=G.default.createFrom(this,{colorModel:L.HSL}),Q=Math.floor(this.maxValue/2),$=0,J=this.data;for(var ee=0;ee<J.length;ee+=this.channels){var te=J[ee],ae=J[ee+1],ie=J[ee+2],ne=Math.max(te,ae,ie),le=Math.min(te,ae,ie),oe=0,se=0,de=(ne+le)/2;if(ne!==le){var he=ne-le;switch(se=de>Q?he/(2-ne-le):he/(ne+le),ne){case te:oe=(ae-ie)/he+(ae<ie?6:0);break;case ae:oe=(ie-te)/he+2;break;case ie:oe=(te-ae)/he+4;break;default:throw new Error("unreachable");}oe/=6}Z.data[$++]=oe*this.maxValue,Z.data[$++]=se*this.maxValue,Z.data[$++]=de,this.alpha&&(Z.data[$++]=J[ee+3])}return Z};var L=I("../model/model"),E=I("../Image"),G=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(E)},{"../Image":151,"../model/model":191}],215:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("hsv",{bitDepth:[8,16],alpha:[0,1],colorModel:[L.RGB]});var Z=G.default.createFrom(this,{colorModel:L.HSV}),Q=0,$=this.data;for(var J=0;J<$.length;J+=this.channels){var ee=$[J],te=$[J+1],ae=$[J+2],ie=Math.min(ee,te,ae),ne=Math.max(ee,te,ae),le=ne-ie,oe=0,se=0===ne?0:le/ne;if(ne!==ie){switch(ne){case ee:oe=(te-ae)/le+(te<ae?6:0);break;case te:oe=(ae-ee)/le+2;break;case ae:oe=(ee-te)/le+4;break;default:throw new Error("unreachable");}oe/=6}Z.data[Q++]=oe*this.maxValue,Z.data[Q++]=se*this.maxValue,Z.data[Q++]=ne,this.alpha&&(Z.data[Q++]=$[J+3])}return Z};var L=I("../model/model"),E=I("../Image"),G=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(E)},{"../Image":151,"../model/model":191}],216:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=0;for(var W=0;W<E.length;W++)if(0!==E[W]){G=W;break}var Z=E.length-1;for(var Q=E.length-1;Q>=G;Q--)if(0!==E[Q]){Z=Q;break}var $=1/(Z-G),J=Array(E.length),ee=0,te=0;for(var ae=G;ae<E.length;ae++)ee+=ae*E[ae],te+=E[ae],J[ae]=ee/te;var ie=Array(E.length);ee=te=0;for(var ne=Z;0<ne;ne--)ee+=ne*E[ne],te+=E[ne],ie[ne-1]=ee/te;var le=-1,oe=Number.MAX_VALUE;for(var se=0;se<E.length;se++){var de=0,he=void 0;for(var ue=0;ue<=se;ue++)he=1/(1+$*Math.abs(ue-J[se])),1e-6>he||0.999999<he||(de+=E[ue]*(-he*Math.log(he)-(1-he)*Math.log(1-he)));for(var ce=se+1;ce<E.length;ce++)he=1/(1+$*Math.abs(ce-ie[se])),1e-6>he||0.999999<he||(de+=E[ce]*(-he*Math.log(he)-(1-he)*Math.log(1-he)));de<oe&&(oe=de,le=se)}return le}},{}],217:[function(I,R,T){"use strict";function L(E){var G=!1,W=0;for(var Z=1;Z<E.length-1;Z++)if(E[Z-1]<E[Z]&&E[Z+1]<E[Z]&&(W++,2<W))return!1;return 2==W&&(G=!0),G}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(G){for(var W=G.slice(),Z=0;!L(W);){var Q=0,$=0,J=W[0];for(var ee=0;ee<G.length-1;ee++)Q=$,$=J,J=W[ee+1],W[ee]=(Q+$+J)/3;if(W[G.length-1]=($+J)/3,Z++,1e4<Z)throw new Error("Intermodes Threshold not found after 10000 iterations")}var te=0;for(var ae=1;ae<G.length-1;ae++)W[ae-1]<W[ae]&&W[ae+1]<W[ae]&&(te+=ae);return Math.floor(te/2)}},{}],218:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=void 0,W=void 0,Z=void 0,Q=void 0,$=0;for(var J=1;J<E.length;J++)if(0<E[J]){$=J+1;break}for(;!0;){G=0,Z=0;for(var ee=0;ee<$;ee++)Z=Z+E[ee],G=G+E[ee]*ee;Q=0,W=0;for(var te=$+1;te<E.length;te++)W+=E[te],Q+=E[te]*te;if(0<Z&&0<W&&(G/=Z,Q/=W,$===Math.round((G+Q)/2)))break;if($++,$>E.length-2)throw new Error("Threshold not found")}return $}},{}],219:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){var W=void 0,Z=void 0,Q=void 0,$=void 0,J=void 0,ee=void 0,te=void 0,ae=void 0,ie=void 0,ne=void 0,le=void 0,oe=void 0;le=0.5,ne=0;for(var se=0;se<E.length;se++)ne+=se*E[se];ne/=G,te=ne;do{ee=te,W=0|ee+0.5,Z=0,$=0;for(var de=0;de<=W;de++)Z+=de*E[de],$+=E[de];ae=0===$?0:Z/$,Q=0,J=0;for(var he=W+1;he<E.length;he++)Q+=he*E[he],J+=E[he];ie=0===J?0:Q/J,oe=(ae-ie)/(Math.log(ae)-Math.log(ie)),te=oe<-Number.EPSILON?0|oe-0.5:0|oe+0.5}while(Math.abs(te-ee)>le);return W}},{}],220:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},$=Q.algorithm,J=void 0===$?"threshold":$,ee=Q.threshold,te=void 0===ee?0.5:ee,ae=Q.useAlpha,ie=void 0===ae||ae,ne=Q.invert,le=void 0!==ne&&ne;if(this.checkProcessable("mask",{components:1,bitDepth:[8,16]}),"threshold"===J)te=(0,W.getThreshold)(te,this.maxValue);else{var oe=G.methods[J.toLowerCase()];if(oe){var se=this.getHistogram();te=oe(se,this.size)}else throw new Error("mask transform unknown algorithm: "+J)}var de=new E.default(this.width,this.height,{kind:"BINARY",parent:this}),he=0;if(this.alpha&&ie)for(var ue=0;ue<this.data.length;ue+=this.channels){var ce=this.data[ue]+(this.maxValue-this.data[ue])*(this.maxValue-this.data[ue+1])/this.maxValue;(le&&ce<=te||!le&&ce>=te)&&de.setBit(he),he++}else for(var ge=0;ge<this.data.length;ge+=this.channels)(le&&this.data[ge]<=te||!le&&this.data[ge]>=te)&&de.setBit(he),he++;return de};var L=I("../../Image"),E=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(L),G=I("./maskAlgorithms"),W=I("../../../util/converter")},{"../../../util/converter":269,"../../Image":151,"./maskAlgorithms":221}],221:[function(I,R,T){"use strict";function L(Pe){return Pe&&Pe.__esModule?Pe:{default:Pe}}Object.defineProperty(T,"__esModule",{value:!0}),T.names=T.methods=void 0;var E=I("./huang"),G=L(E),W=I("./intermodes"),Z=L(W),Q=I("./isodata"),$=L(Q),J=I("./li"),ee=L(J),te=I("./maxEntropy"),ae=L(te),ie=I("./mean"),ne=L(ie),le=I("./minError"),oe=L(le),se=I("./minimum"),de=L(se),he=I("./moments"),ue=L(he),ce=I("./otsu"),ge=L(ce),pe=I("./percentile"),fe=L(pe),_e=I("./renyiEntropy.js"),be=L(_e),ye=I("./shanbhag"),xe=L(ye),we=I("./triangle"),ke=L(we),ve=I("./yen"),Me=L(ve),je=T.methods={huang:G.default,intermodes:Z.default,isodata:$.default,li:ee.default,maxentropy:ae.default,mean:ne.default,minerror:oe.default,minimum:de.default,moments:ue.default,otsu:ge.default,percentile:fe.default,renyientropy:be.default,shanbhag:xe.default,triangle:ke.default,yen:Me.default};T.names=["threshold"].concat(Object.keys(je))},{"./huang":216,"./intermodes":217,"./isodata":218,"./li":219,"./maxEntropy":222,"./mean":223,"./minError":224,"./minimum":225,"./moments":226,"./otsu":227,"./percentile":228,"./renyiEntropy.js":229,"./shanbhag":230,"./triangle":231,"./yen":232}],222:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){var W=Array(E.length);for(var Z=0;Z<E.length;Z++)W[Z]=E[Z]/G;var Q=Array(E.length),$=Array(E.length);Q[0]=W[0],$[0]=1-Q[0];for(var J=1;J<E.length;J++)Q[J]=Q[J-1]+W[J],$[J]=1-Q[J];var ee=0;for(var te=0;te<E.length;te++)if(Math.abs(Q[te])>=Number.EPSILON){ee=te;break}var ae=E.length-1;for(var ie=E.length-1;ie>=ee;ie--)if(Math.abs($[ie])>=Number.EPSILON){ae=ie;break}var ne=-1,le=void 0,oe=Number.MIN_VALUE,se=void 0,de=void 0;for(var he=ee;he<=ae;he++){se=0;for(var ue=0;ue<=he;ue++)0!==E[ue]&&(se-=W[ue]/Q[he]*Math.log(W[ue]/Q[he]));de=0;for(var ce=he+1;ce<E.length;ce++)0!==E[ce]&&(de-=W[ce]/$[he]*Math.log(W[ce]/$[he]));le=se+de,oe<le&&(oe=le,ne=he)}return ne}},{}],223:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){var W=0;for(var Z=0;Z<E.length;Z++)W+=Z*E[Z];return Math.floor(W/G)}},{}],224:[function(I,R,T){"use strict";function L(W,Z){var Q=0;for(var $=0;$<=Z;$++)Q+=W[$];return Q}function E(W,Z){var Q=0;for(var $=0;$<=Z;$++)Q+=$*W[$];return Q}function G(W,Z){var Q=0;for(var $=0;$<=Z;$++)Q+=$*$*W[$];return Q}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z,Q){var $=void 0,J=-2,ee=void 0,te=void 0,ae=void 0,ie=void 0,ne=void 0,le=void 0,oe=void 0,se=void 0,de=void 0,he=void 0,ue=void 0,ce=0;for(var ge=0;ge<Z.length;ge++)ce+=ge*Z[ge];for(ce/=Q,$=ce;$!==J;){var pe=L(Z,$),fe=L(Z,Z.length-1),_e=E(Z,$),be=E(Z,Z.length-1),ye=G(Z,$),xe=G(Z,Z.length-1);if(ee=_e/pe,te=(be-_e)/(fe-pe),ae=pe/fe,ie=(fe-pe)/fe,ne=ye/pe-ee*ee,le=(xe-ye)/(fe-pe)-te*te,oe=1/ne-1/le,se=ee/ne-te/le,de=ee*ee/ne-te*te/le+Math.log10(ne*(ie*ie)/(le*(ae*ae))),he=se*se-oe*de,0>he)return $;J=$,ue=(se+Math.sqrt(he))/oe,$=isNaN(ue)?J:Math.floor(ue)}return $}},{}],225:[function(I,R,T){"use strict";function L(W){var Z=Array(W.length);for(var Q=1;Q<W.length-1;Q++)Z[Q]=(W[Q-1]+W[Q]+W[Q+1])/3;return Z[0]=(W[0]+W[1])/3,Z[W.length-1]=(W[W.length-2]+W[W.length-1])/3,Z}function E(W,Z){var Q=void 0;for(var $=1;$<Z;$++)if(W[$-1]>W[$]&&W[$+1]>=W[$]){Q=$;break}return Q}function G(W){var Z=W.length,Q=!1,$=0;for(var J=1;J<Z-1;J++)if(W[J-1]<W[J]&&W[J+1]<W[J]&&($++,2<$))return!1;return 2==$&&(Q=!0),Q}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){if(2>Z.length)return 0;var Q=0,$=-1,J=-1,ee=Array(Z.length);for(var te=0;te<Z.length;te++)ee[te]=Z[te],0<Z[te]&&(J=te);for(;!G(ee);)if(ee=L(ee),Q++,1e4<Q)return $;return $=E(ee,J),$}},{}],226:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){var W=1,Z=0,Q=0,$=0,J=0,ee=void 0,te=void 0,ae=void 0,ie=void 0,ne=void 0,le=void 0,oe=-1,se=E.length,de=Array(se);for(var he=0;he<se;he++)de[he]=E[he]/G;for(var ue=0;ue<se;ue++)Z+=ue*de[ue],Q+=ue*ue*de[ue],$+=ue*ue*ue*de[ue];te=W*Q-Z*Z,ae=(-Q*Q+Z*$)/te,ie=(W*-$+Q*Z)/te,ne=0.5*(-ie-Math.sqrt(ie*ie-4*ae)),le=0.5*(-ie+Math.sqrt(ie*ie-4*ae)),ee=(le-Z)/(le-ne);for(var ce=0;ce<se;ce++)if(J+=de[ce],J>ee){oe=ce;break}return oe}},{}],227:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){var W=0,Z=0,Q=0,$=0,J=void 0,ee=void 0,te=0,ae=0,ie=0;for(var ne=1;ne<E.length;++ne)W+=ne*E[ne];for(var le=1;le<E.length;++le)if(Q+=E[le],0!=Q){if($=G-Q,0==$)break;Z+=le*E[le],J=Z/Q,ee=(W-Z)/$,ae=Q*$*(J-ee)*(J-ee),ae>=te&&(ie=le,te=ae)}return ie}},{}],228:[function(I,R,T){"use strict";function L(E,G){var W=0;for(var Z=0;Z<=G;Z++)W+=E[Z];return W}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=-1,W=Array(E.length),Z=L(E,E.length-1),Q=1;for(var $=0;$<E.length;$++)W[$]=Math.abs(L(E,$)/Z-0.5),W[$]<Q&&(Q=W[$],G=$);return G}},{}],229:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(G,W){var Z=void 0,Q=void 0,$=void 0,J=Array(G.length),ee=Array(G.length),te=Array(G.length),ae=0,ie=0,ne=0,le=0,oe=0,se=0;for(var de=0;de<G.length;de++)J[de]=G[de]/W;ee[0]=J[0],te[0]=1-ee[0];for(var he=1;he<G.length;he++)ee[he]=ee[he-1]+J[he],te[he]=1-ee[he];Q=0;for(var ue=0;ue<G.length;ue++)if(Math.abs(ee[ue])>=Number.EPSILON){Q=ue;break}$=G.length-1;for(var ce=G.length-1;ce>=Q;ce--)if(Math.abs(te[ce])>=Number.EPSILON){$=ce;break}for(var ge=Q;ge<=$;ge++){var pe=0,fe=0,_e=0;for(var be=0;be<=ge;be++)0!==G[be]&&(pe-=J[be]/ee[ge]*Math.log(J[be]/ee[ge])),fe+=Math.sqrt(J[be]/ee[ge]),_e+=J[be]*J[be]/(ee[ge]*ee[ge]);var ye=0,xe=0,we=0;for(var ke=ge+1;ke<G.length;ke++)0!==G[ke]&&(ye-=J[ke]/te[ge]*Math.log(J[ke]/te[ge])),xe+=Math.sqrt(J[ke]/te[ge]),we+=J[ke]*J[ke]/(te[ge]*te[ge]);var ve=pe+ye,Me=2*(0<fe*xe?Math.log(fe*xe):0),je=-1*(0<_e*we?Math.log(_e*we):0);ve>le&&(le=ve,ae=ge),Me>oe&&(oe=Me,ie=ge),je>se&&(se=je,ne=ge)}var Pe=[ae,ie,ne];Pe.sort(L.asc);var Ie=void 0;Ie=5>=Math.abs(Pe[0]-Pe[1])?5>=Math.abs(Pe[1]-Pe[2])?[1,2,1]:[0,1,3]:5>=Math.abs(Pe[1]-Pe[2])?[3,1,0]:[1,2,1];var De=ee[Pe[2]]-ee[Pe[0]];return Z=Math.round(Pe[0]*(ee[Pe[0]]+0.25*De*Ie[0])+0.25*Pe[1]*De*Ie[1]+Pe[2]*(te[Pe[2]]+0.25*De*Ie[2])),Z};var L=I("num-sort")},{"num-sort":119}],230:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){var W=Array(E.length);for(var Z=0;Z<E.length;Z++)W[Z]=E[Z]/G;var Q=Array(E.length),$=Array(E.length);Q[0]=W[0],$[0]=1-Q[0];for(var J=1;J<E.length;J++)Q[J]=Q[J-1]+W[J],$[J]=1-Q[J];var ee=0;for(var te=0;te<E.length;te++)if(Math.abs(Q[te])>=Number.EPSILON){ee=te;break}var ae=E.length-1;for(var ie=E.length-1;ie>=ee;ie--)if(Math.abs($[ie])>=Number.EPSILON){ae=ie;break}var ne=-1,le=Number.MAX_VALUE,oe=void 0,se=void 0,de=void 0,he=void 0;for(var ue=ee;ue<=ae;ue++){de=0,oe=0.5/Q[ue];for(var ce=1;ce<=ue;ce++)de-=W[ce]*Math.log(1-oe*Q[ce-1]);de*=oe,he=0,oe=0.5/$[ue];for(var ge=ue+1;ge<E.length;ge++)he-=W[ge]*Math.log(1-oe*$[ge]);he*=oe,se=Math.abs(de-he),se<le&&(le=se,ne=ue)}return ne}},{}],231:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=0,W=0,Z=0,Q=0;for(var $=0;$<E.length;$++)if(0<E[$]){G=$;break}0<G&&G--;for(var J=E.length-1;0<J;J--)if(0<E[J]){Q=J;break}Q<E.length-1&&Q++;for(var ee=0;ee<E.length;ee++)E[ee]>W&&(Z=ee,W=E[ee]);var te=!1;if(Z-G<Q-Z){te=!0;for(var ae=0,ie=E.length-1;ae<ie;){var ne=E[ae];E[ae]=E[ie],E[ie]=ne,ae++,ie--}G=E.length-1-Q,Z=E.length-1-Z}if(G===Z)return G;var le=void 0,oe=void 0,se=void 0;le=E[Z],oe=G-Z,se=Math.sqrt(le*le+oe*oe),le/=se,oe/=se,se=le*G+oe*E[G];var de=G,he=0;for(var ue=G+1;ue<=Z;ue++){var ce=le*ue+oe*E[ue]-se;ce>he&&(de=ue,he=ce)}if(de--,te){for(var ge=0,pe=E.length-1;ge<pe;){var fe=E[ge];E[ge]=E[pe],E[pe]=fe,ge++,pe--}return E.length-1-de}return de}},{}],232:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){var W=Array(E.length);for(var Z=0;Z<E.length;Z++)W[Z]=E[Z]/G;var Q=Array(E.length);Q[0]=W[0];for(var $=1;$<E.length;$++)Q[$]=Q[$-1]+W[$];var J=Array(E.length);J[0]=W[0]*W[0];for(var ee=1;ee<E.length;ee++)J[ee]=J[ee-1]+W[ee]*W[ee];var te=Array(E.length);te[E.length-1]=0;for(var ae=E.length-2;0<=ae;ae--)te[ae]=te[ae+1]+W[ae+1]*W[ae+1];var ie=-1,ne=Number.MIN_VALUE,le=void 0;for(var oe=0;oe<E.length;oe++)le=-1*(0<J[oe]*te[oe]?Math.log(J[oe]*te[oe]):0)+2*(0<Q[oe]*(1-Q[oe])?Math.log(Q[oe]*(1-Q[oe])):0),le>ne&&(ne=le,ie=oe);return ie}},{}],233:[function(I,R,T){"use strict";function L(J){return J&&J.__esModule?J:{default:J}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var ee=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},te=ee.size,ae=void 0===te?0:te,ie=ee.algorithm,ne=void 0===ie?"copy":ie,le=ee.color;if(this.checkProcessable("pad",{bitDepth:[8,16]}),"set"===ne){if(le.length!==this.channels)throw new Error("pad: the color array must have the same length as the number of channels. Here: "+this.channels);for(var oe=0;oe<le.length;oe++)0===le[oe]&&(le[oe]=1e-3)}else le=(0,Z.default)(this.channels,null);Array.isArray(ae)||(ae=[ae,ae]);var se=this.width+2*ae[0],de=this.height+2*ae[1],he=this.channels,ue=G.default.createFrom(this,{width:se,height:de});(0,$.default)(this,ue,ae[0],ae[1]);for(var ce=ae[0];ce<se-ae[0];ce++)for(var ge=0;ge<he;ge++){var pe=le[ge]||ue.data[(ae[1]*se+ce)*he+ge];for(var fe=0;fe<ae[1];fe++)ue.data[(fe*se+ce)*he+ge]=pe;pe=le[ge]||ue.data[((de-ae[1]-1)*se+ce)*he+ge];for(var _e=de-ae[1];_e<de;_e++)ue.data[(_e*se+ce)*he+ge]=pe}for(var be=0;be<de;be++)for(var ye=0;ye<he;ye++){var xe=le[ye]||ue.data[(be*se+ae[0])*he+ye];for(var we=0;we<ae[0];we++)ue.data[(be*se+we)*he+ye]=xe;xe=le[ye]||ue.data[(be*se+se-ae[0]-1)*he+ye];for(var ke=se-ae[0];ke<se;ke++)ue.data[(be*se+ke)*he+ye]=xe}return ue};var E=I("../Image"),G=L(E),W=I("new-array"),Z=L(W),Q=I("../utility/copy"),$=L(Q)},{"../Image":151,"../utility/copy":240,"new-array":118}],234:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){return new E.default(this.width,this.height,this.getRGBAData(),{kind:"RGBA"})};var L=I("../Image"),E=function(W){return W&&W.__esModule?W:{default:W}}(L)},{"../Image":151}],235:[function(I,R,T){"use strict";function L(ee){return ee&&ee.__esModule?ee:{default:ee}}function E(){var ee=Q.default.createFrom(this,{width:this.height,height:this.width}),te=ee.height-1;for(var ae=0;ae<this.height;ae++)for(var ie=0;ie<this.width;ie++)for(var ne=0;ne<this.channels;ne++)ee.setValueXY(ae,te-ie,ne,this.getValueXY(ie,ae,ne));return ee}function G(){var ee=Q.default.createFrom(this,{width:this.height,height:this.width}),te=ee.width-1;for(var ae=0;ae<this.height;ae++)for(var ie=0;ie<this.width;ie++)for(var ne=0;ne<this.channels;ne++)ee.setValueXY(te-ae,ie,ne,this.getValueXY(ie,ae,ne));return ee}function W(){var ee=Q.default.createFrom(this),te=ee.width-1,ae=ee.height-1;for(var ie=0;ie<this.height;ie++)for(var ne=0;ne<this.width;ne++)for(var le=0;le<this.channels;le++)ee.setValueXY(te-ne,ae-ie,le,this.getValueXY(ne,ie,le));return ee}Object.defineProperty(T,"__esModule",{value:!0}),T.rotate=function(te,ae){if("number"!=typeof te)throw new TypeError("angle must be a number");switch(0>te&&(te=360*Math.ceil(-te/360)+te),te%360){case 0:return this.clone();case 90:return G.call(this);case 180:return W.call(this);case 270:return E.call(this);default:return J.default.call(this,te,ae);}},T.rotateLeft=E,T.rotateRight=G;var Z=I("../Image"),Q=L(Z),$=I("./rotateFree"),J=L($)},{"../Image":151,"./rotateFree":236}],236:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W){var Z=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},Q=Z.interpolation,$=Q===void 0?"none":Q,J=Z.width,ee=J===void 0?this.width:J,te=Z.height,ae=te===void 0?this.height:te,ie=W*Math.PI/180,ne=Math.floor(Math.abs(ee*Math.cos(ie))+Math.abs(ae*Math.sin(ie))),le=Math.floor(Math.abs(ae*Math.cos(ie))+Math.abs(ee*Math.sin(ie))),oe=E.default.createFrom(this,{width:ne,height:le}),se=Math.cos(-ie),de=Math.sin(-ie),he=ne/2,ue=le/2;0==ne%2?(he=he-0.5,ue=0==le%2?ue-0.5:Math.floor(ue)):(he=Math.floor(he),ue=0==le%2?ue-0.5:Math.floor(ue));var ce=Math.floor(ee/2-he),ge=Math.floor(ae/2-ue);if("bilinear"===$){var pe=this.width*this.channels;for(var fe=0;fe<ne;fe+=1)for(var _e=0;_e<le;_e+=1){var be=(fe-he)*se-(_e-ue)*de+he+ce,ye=(_e-ue)*se+(fe-he)*de+ue+ge,xe=0|be,we=0|ye,ke=be-xe,ve=ye-we;for(var Me=0;Me<this.channels;Me++)if(0>be||be>=ee||0>ye||ye>=ae)this.alpha?oe.setValueXY(fe,_e,Me,this.alpha):oe.setValueXY(fe,_e,Me,this.maxValue);else{var je=(we*this.width+xe)*this.channels+Me,Pe=this.data[je],Ie=this.data[je+this.channels],De=this.data[je+pe],Se=this.data[je+pe+this.channels];oe.setValueXY(fe,_e,Me,0|Pe+ke*(Ie-Pe)+ve*(De-Pe)+ke*ve*(Pe-Ie-De+Se))}}}else for(var Ce=0;Ce<ne;Ce+=1)for(var Ae=0;Ae<le;Ae+=1)for(var Be=0;Be<this.channels;Be++){var Re=Math.round((Ce-he)*se-(Ae-ue)*de+he)+ce,Te=Math.round((Ae-ue)*se+(Ce-he)*de+ue)+ge;0>Re||Re>=ee||0>Te||Te>=ae?this.alpha?oe.setValueXY(Ce,Ae,Be,this.alpha):oe.setValueXY(Ce,Ae,Be,this.maxValue):oe.setValueXY(Ce,Ae,Be,this.getValueXY(Re,Te,Be))}return oe};var L=I("../Image"),E=function(W){return W&&W.__esModule?W:{default:W}}(L)},{"../Image":151}],237:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G,W){var Z=this.width/G,Q=this.height/W;if(1<this.bitDepth)for(var $=0;$<G;$++){var J=Math.floor(($+0.5)*Z);for(var ee=0;ee<W;ee++){var te=Math.floor((ee+0.5)*Q);for(var ae=0;ae<this.channels;ae++)E.setValueXY($,ee,ae,this.getValueXY(J,te,ae))}}else for(var ie=0;ie<G;ie++){var ne=Math.floor((ie+0.5)*Z);for(var le=0;le<W;le++){var oe=Math.floor((le+0.5)*Q);this.getBitXY(ne,oe)&&E.setBitXY(ie,le)}}}},{}],238:[function(I,R,T){"use strict";function L($){return $&&$.__esModule?$:{default:$}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var J=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},ee=J.factor,te=void 0===ee?1:ee,ae=J.algorithm,ie=void 0===ae?"nearestNeighbor":ae,ne=J.preserveAspectRatio,le=void 0===ne||ne,oe=J.width,se=J.height;oe||(se&&le?oe=Math.round(se*(this.width/this.height)):oe=this.width),se||(le?se=Math.round(oe*(this.height/this.width)):se=this.height);var de=(0,Q.factorDimensions)(te,oe,se);if(oe=de.width,se=de.height,oe===this.width&&se===this.height){var he=this.clone();return he.position=[0,0],he}var ue=Math.round((this.width-oe)/2),ce=Math.round((this.height-se)/2),ge=G.default.createFrom(this,{width:oe,height:se,position:[ue,ce]});switch(ie.toLowerCase()){case"nearestneighbor":case"nearestneighbour":Z.default.call(this,ge,oe,se);break;default:throw new Error("Unsupported scale algorithm: "+ie);}return ge};var E=I("../../Image"),G=L(E),W=I("./nearestNeighbor"),Z=L(W),Q=I("../../../util/converter")},{"../../../util/converter":269,"../../Image":151,"./nearestNeighbor":237}],239:[function(I,R,T){"use strict";function L(W){return(W[0]+W[1]+W[2])/3}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Z=0<arguments.length&&arguments[0]!==void 0?arguments[0]:L,Q=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},$=Q.mergeAlpha,J=$!==void 0&&$,ee=Q.keepAlpha,te=ee!==void 0&&ee;J&=this.alpha,te&=this.alpha,this.checkProcessable("combineChannels",{bitDepth:[8,16]});var ae=G.default.createFrom(this,{components:1,alpha:te,colorModel:null}),ie=0;for(var ne=0;ne<this.size;ne++){var le=Z(this.getPixel(ne));J?ae.data[ie++]=le*this.data[ne*this.channels+this.components]/this.maxValue:(ae.data[ie++]=le,te&&(ae.data[ie++]=this.data[ne*this.channels+this.components]))}return ae};var E=I("../Image"),G=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(E)},{"../Image":151}],240:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G,W,Z){var Q=E.width,$=E.height,J=G.width,ee=E.channels;for(var te=0;te<Q;te++)for(var ae=0;ae<$;ae++)for(var ie=0;ie<ee;ie++){var ne=(ae*Q+te)*ee+ie,le=((Z+ae)*J+W+te)*ee+ie;G.data[le]=E.data[ne]}}},{}],241:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W){var Z=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Q=Z.border;if(this.checkProcessable("getChannel",{bitDepth:[8,16]}),this.bitDepth!==W.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==W.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==W.colorModel)throw new Error("Both images must have the same colorModel");for(var $=new E.default(W.width,W.height,-(1/0)),J=Math.floor(W.width/2),ee=Math.floor(W.height/2),te=J,ae=ee,ie=!1;!ie;){var ne=$.localSearch(J,ee,-(1/0));for(var le=0;le<ne.length;le++){var oe=ne[le],se=this.getSimilarity(W,{border:Q,shift:[te-oe[0],ae-oe[1]]});$[oe[0]][oe[1]]=se}var de=$.localMax(J,ee);de.position[0]!==J||de.position[1]!==ee?(J=de.position[0],ee=de.position[1]):ie=!0}return[J-te,ee-ae]};var L=I("../../util/matrix"),E=function(W){return W&&W.__esModule?W:{default:W}}(L)},{"../../util/matrix":274}],242:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){var Q=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},$=Q.keepAlpha,J=$!==void 0&&$,ee=Q.mergeAlpha,te=ee!==void 0&&ee;J&=this.alpha,te&=this.alpha,this.checkProcessable("getChannel",{bitDepth:[8,16]}),Z=(0,G.validateChannel)(this,Z);var ae=E.default.createFrom(this,{components:1,alpha:J,colorModel:null}),ie=0;for(var ne=0;ne<this.data.length;ne+=this.channels)te?ae.data[ie++]=this.data[ne+Z]*this.data[ne+this.components]/this.maxValue:(ae.data[ie++]=this.data[ne+Z],J&&(ae.data[ie++]=this.data[ne+this.components]));return ae};var L=I("../Image"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L),G=I("./../../util/channel")},{"../Image":151,"./../../util/channel":267}],243:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0;this.checkProcessable("getColumn",{bitDepth:[8,16]}),this.checkColumn(E),this.checkChannel(G);var W=Array(this.height),Z=0,Q=this.width*this.channels;for(var $=G+E*this.channels;$<this.data.length;$+=Q)W[Z++]=this.data[$];return W}},{}],244:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var W=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Z=W.channel;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===Z){if(1<this.components)throw new RangeError("You need to define the channel for an image that contains more than one channel");Z=0}var Q=new E.default(this.height,this.width);for(var $=0;$<this.height;$++)for(var J=0;J<this.width;J++)Q.set($,J,this.getValueXY(J,$,Z));return Q};var L=I("ml-matrix"),E=function(W){return W&&W.__esModule?W:{default:W}}(L)},{"ml-matrix":91}],245:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("getPixelsArray",{bitDepth:[8,16,32]});var E=Array(this.size),G=0;for(var W=0;W<this.data.length;W+=this.channels){var Z=Array(this.components);for(var Q=0;Q<this.components;Q++)Z[Q]=this.data[W+Q];E[G++]=Z}return E}},{}],246:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var E=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},G=E.sampling,W=void 0===G?[10,10]:G,Z=E.painted,Q=void 0!==Z&&Z,$=E.mask;this.checkProcessable("getPixelsGrid",{bitDepth:[8,16],channels:1}),Array.isArray(W)||(W=[W,W]);var J=W[0],ee=W[1],te=J*ee,ae=Array(te),ie=Array(te),ne=this.width/J,le=this.height/ee,oe=Math.floor(ne/2),se=0;for(var de=0;de<J;de++){var he=Math.floor(le/2);for(var ue=0;ue<ee;ue++){var ce=Math.round(oe),ge=Math.round(he);(!$||$.getBitXY(ce,ge))&&(ae[se]=[ce,ge],ie[se]=this.getPixelXY(ce,ge),se++),he+=le}oe+=ne}ae.length=se,ie.length=se;var pe={xyS:ae,zS:ie};return Q&&(pe.painted=this.rgba8().paintPoints(ae)),pe}},{}],247:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0;this.checkProcessable("getRow",{bitDepth:[8,16]}),this.checkRow(E),this.checkChannel(G);var W=Array(this.width),Z=0,Q=E*this.width*this.channels+G,$=Q+this.width*this.channels;for(var J=Q;J<$;J+=this.channels)W[Z++]=this.data[J];return W}},{}],248:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){var Q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},$=Q.shift,J=void 0===$?[0,0]:$,ee=Q.average,te=Q.channels,ae=Q.defaultAlpha,ie=Q.normalize,ne=Q.border,le=void 0===ne?[0,0]:ne;if(this.checkProcessable("getSimilarity",{bitDepth:[8,16]}),Array.isArray(le)||(le=[le,le]),te=(0,L.validateArrayOfChannels)(this,{channels:te,defaultAlpha:ae}),this.bitDepth!==Z.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==Z.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==Z.colorModel)throw new Error("Both images must have the same colorModel");"undefined"==typeof ee&&(ee=!0);var oe=Math.max(le[0],-J[0]),se=Math.min(this.width-le[0],this.width-J[0]),de=Math.max(le[1],-J[1]),he=Math.min(this.height-le[1],this.height-J[1]),ue=(0,G.default)(te.length,0);for(var ce=0;ce<te.length;ce++){var ge=te[ce],pe=ie?this.sum[ge]:Math.max(this.sum[ge],Z.sum[ge]),fe=ie?Z.sum[ge]:Math.max(this.sum[ge],Z.sum[ge]);if(0!==pe&&0!==fe)for(var _e=oe;_e<se;_e++)for(var be=de;be<he;be++){var ye=_e*this.multiplierX+be*this.multiplierY+ge,xe=ye+J[0]*this.multiplierX+J[1]*this.multiplierY;ue[ce]+=Math.min(this.data[ye]/pe,Z.data[xe]/fe)}}return ee?ue.reduce((we,ke)=>we+ke)/ue.length:ue};var L=I("./../../util/channel"),E=I("new-array"),G=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(E)},{"./../../util/channel":267,"new-array":118}],249:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var W=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Z=W.size,Q=void 0===Z?0:Z,$=W.algorithm,J=void 0===$?"copy":$,ee=W.color;if(this.checkProcessable("setBorder",{bitDepth:[8,16,32,64]}),"set"===J){if(ee.length!==this.channels)throw new Error("setBorder: the color array must have the same length as the number of channels. Here: "+this.channels);for(var te=0;te<ee.length;te++)0===ee[te]&&(ee[te]=1e-3)}else ee=(0,E.default)(this.channels,null);Array.isArray(Q)||(Q=[Q,Q]);var ae=Q[0],ie=Q[1],ne=this.channels;for(var le=ae;le<this.width-ae;le++)for(var oe=0;oe<ne;oe++){var se=ee[oe]||this.data[(le+this.width*ie)*ne+oe];for(var de=0;de<ie;de++)this.data[(de*this.width+le)*ne+oe]=se;se=ee[oe]||this.data[(le+this.width*(this.height-ie-1))*ne+oe];for(var he=this.height-ie;he<this.height;he++)this.data[(he*this.width+le)*ne+oe]=se}for(var ue=0;ue<this.height;ue++)for(var ce=0;ce<ne;ce++){var ge=ee[ce]||this.data[(ue*this.width+ae)*ne+ce];for(var pe=0;pe<ae;pe++)this.data[(ue*this.width+pe)*ne+ce]=ge;ge=ee[ce]||this.data[(ue*this.width+this.width-ae-1)*ne+ce];for(var fe=this.width-ae;fe<this.width;fe++)this.data[(ue*this.width+fe)*ne+ce]=ge}return this};var L=I("new-array"),E=function(W){return W&&W.__esModule?W:{default:W}}(L)},{"new-array":118}],250:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(G,W){if(this.checkProcessable("setChannel",{bitDepth:[8,16]}),W.checkProcessable("setChannel (image parameter check)",{bitDepth:[this.bitDepth],alpha:[0],components:[1]}),W.width!==this.width||W.height!==this.height)throw new Error("Images must have exactly the same width and height");G=(0,L.validateChannel)(this,G);var Z=G;for(var Q=0;Q<W.data.length;Q++)this.data[Z]=W.data[Q],Z+=this.channels;return this};var L=I("./../../util/channel")},{"./../../util/channel":267}],251:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},W=G.channel;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===W){if(1<this.components)throw new RangeError("You need to define the channel for an image that contains more than one channel");W=0}if(!E.length||!E[0].length||this.width!==E.columns||this.height!==E.rows)throw new RangeError("The size of the matrix must be equal to the size of the image");for(var Z=0;Z<this.height;Z++)for(var Q=0;Q<this.width;Q++)this.setValueXY(Q,Z,W,E.get(Z,Q))}},{}],252:[function(I,R,T){"use strict";function L(Q){return Q&&Q.__esModule?Q:{default:Q}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var $=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},J=$.preserveAlpha,ee=void 0===J||J;if(this.checkProcessable("split",{bitDepth:[8,16]}),1===this.components)return new Z.default([this.clone()]);var te=new Z.default,ae=this.data;if(this.alpha&&ee)for(var ie=0;ie<this.components;ie++){var ne=G.default.createFrom(this,{components:1,alpha:!0,colorModel:null}),le=0;for(var oe=0;oe<ae.length;oe+=this.channels)ne.data[le++]=ae[oe+ie],ne.data[le++]=ae[oe+this.components];te.push(ne)}else for(var se=0;se<this.channels;se++){var de=G.default.createFrom(this,{components:1,alpha:!1,colorModel:null}),he=0;for(var ue=0;ue<ae.length;ue+=this.channels)de.data[he++]=ae[ue+se];te.push(de)}return te};var E=I("../Image"),G=L(E),W=I("../../stack/Stack"),Z=L(W)},{"../../stack/Stack":256,"../Image":151}],253:[function(I,R,T){"use strict";var L=I("./image/environment"),E=I("array-includes"),G=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(E);G.default.shim(),R.exports=T=I("./image/Image").default,T.Stack=I("./stack/Stack").default,T.Shape=I("./util/Shape").default,T.Kernel=I("./kernel/kernel"),T.Static={grey:I("./image/transform/greyAlgorithms").names,mask:I("./image/transform/mask/maskAlgorithms").names},"browser"===L.env&&(T.Worker=I("./worker/worker").default)},{"./image/Image":151,"./image/environment":165,"./image/transform/greyAlgorithms":213,"./image/transform/mask/maskAlgorithms":221,"./kernel/kernel":254,"./stack/Stack":256,"./util/Shape":265,"./worker/worker":278,"array-includes":2}],254:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var L=I("../util/kernels");Object.keys(L).forEach(function(G){"default"===G||"__esModule"===G||Object.defineProperty(T,G,{enumerable:!0,get:function(){return L[G]}})});var E=I("./laplacianOfGaussian");Object.defineProperty(T,"laplacianOfGaussian",{enumerable:!0,get:function(){return E.laplacianOfGaussian}})},{"../util/kernels":273,"./laplacianOfGaussian":255}],255:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.laplacianOfGaussian=function(E,G,W){var Z=Array(G),Q=void 0,$=void 0,J=void 0,ee=void 0;W||(W=100),W*=-1;var te=(G-1)/2,ae=2*E*E;for(Q=0;Q<G;Q++)for(Z[Q]=Array(G),ee=(Q-te)*(Q-te),$=0;$<G;$++)J=($-te)*($-te),Z[Q][$]=Math.round(W*(1-(J+ee)/ae)*Math.exp(-(J+ee)/ae));return Z}},{}],256:[function(I,R,T){"use strict";function L(ae){return ae&&ae.__esModule?ae:{default:ae}}function E(ae){if(Array.isArray(ae)){for(var ie=0,ne=Array(ae.length);ie<ae.length;ie++)ne[ie]=ae[ie];return ne}return Array.from(ae)}Object.defineProperty(T,"__esModule",{value:!0});var G=I("./extend"),W=L(G),Z=I("../image/Image"),Q=L(Z),$=I("has-own"),J=L($),ee={configurable:!0,enumerable:!1,get:void 0};class te extends Array{constructor(ae){if(Array.isArray(ae)){super(ae.length);for(var ie=0;ie<ae.length;ie++)this[ie]=ae[ie]}else"number"==typeof ae?super(ae):super();this.computed=null}static load(ae){return Promise.all(ae.map(Q.default.load)).then(ie=>new te(ie))}static extendMethod(ae,ie){var ne=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},le=ne.inPlace,oe=void 0!==le&&le,se=ne.returnThis,de=void 0===se||se,he=ne.partialArgs,ue=void 0===he?[]:he;return te.prototype[ae]=oe?function(){this.computed=null;for(var ce=arguments.length,ge=Array(ce),pe=0;pe<ce;pe++)ge[pe]=arguments[pe];var fe=ie.apply(this,[].concat(E(ue),ge));return de?this:fe}:function(){for(var ce=arguments.length,ge=Array(ce),pe=0;pe<ce;pe++)ge[pe]=arguments[pe];return ie.apply(this,[].concat(E(ue),ge))},te}static extendProperty(ae,ie){var ne=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},le=ne.partialArgs,oe=void 0===le?[]:le;return ee.get=function(){if(null===this.computed)this.computed={};else if((0,J.default)(ae,this.computed))return this.computed[ae];var se=ie.apply(this,oe);return this.computed[ae]=se,se},Object.defineProperty(te.prototype,ae,ee),te}checkProcessable(ae){var ie=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if("string"!=typeof ae)throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(0===this.size)throw new TypeError("The process: "+ae+" can not be applied on an empty stack");this[0].checkProcessable(ae,ie);for(var ne=1;ne<this.length;ne++){if((ie.sameSize===void 0||ie.sameSize)&&this[0].width!==this[ne].width)throw new TypeError("The process: "+ae+" can not be applied if width is not identical in all images");if((void 0===ie.sameSize||ie.sameSize)&&this[0].height!==this[ne].height)throw new TypeError("The process: "+ae+" can not be applied if height is not identical in all images");if((void 0===ie.sameAlpha||ie.sameAlpha)&&this[0].alpha!==this[ne].alpha)throw new TypeError("The process: "+ae+" can not be applied if alpha is not identical in all images");if((void 0===ie.sameBitDepth||ie.sameBitDepth)&&this[0].bitDepth!==this[ne].bitDepth)throw new TypeError("The process: "+ae+" can not be applied if bitDepth is not identical in all images");if((void 0===ie.sameColorModel||ie.sameColorModel)&&this[0].colorModel!==this[ne].colorModel)throw new TypeError("The process: "+ae+" can not be applied if colorModel is not identical in all images");if((void 0===ie.sameNumberChannels||ie.sameNumberChannels)&&this[0].channels!==this[ne].channels)throw new TypeError("The process: "+ae+" can not be applied if channels is not identical in all images")}}}T.default=te,Array[Symbol.species]||(te.prototype.map=function(ae,ie){if("function"!=typeof ae)throw new TypeError(ae+" is not a function");var ne=new te(this.length);for(var le=0;le<this.length;le++)ne[le]=ae.call(ie,this[le],le,this);return ne}),(0,W.default)(te)},{"../image/Image":151,"./extend":262,"has-own":48}],257:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){this.checkProcessable("min",{bitDepth:[8,16]});var L=this[0].getHistogram(E);for(var G=1;G<this.length;G++){var W=this[G].getHistogram(E);for(var Z=0;Z<L.length;Z++)L[Z]+=W[Z]}return L}},{}],258:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){this.checkProcessable("min",{bitDepth:[8,16]});var L=this[0].getHistograms(E),G=L[0].length;for(var W=1;W<this.length;W++){var Z=this[W].getHistograms(E);for(var Q=0;Q<L.length;Q++)for(var $=0;$<G;$++)L[Q][$]+=Z[Q][$]}return L}},{}],259:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("min",{bitDepth:[8,16]});var L=this[0].max;for(var E=1;E<this.length;E++)for(var G=0;G<L.length;G++)L[G]=Math.max(L[G],this[E].max[G]);return L}},{}],260:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("median",{bitDepth:[8,16]});var G=this.getHistograms({maxSlots:this[0].maxValue+1}),W=Array(G.length);for(var Z=0;Z<G.length;Z++){var Q=G[Z];W[Z]=(0,L.median)(Q)}return W};var L=I("../../util/histogram")},{"../../util/histogram":271}],261:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("min",{bitDepth:[8,16]});var L=this[0].min;for(var E=1;E<this.length;E++)for(var G=0;G<L.length;G++)L[G]=Math.min(L[G],this[E].min[G]);return L}},{}],262:[function(I,R,T){"use strict";function L(se){return se&&se.__esModule?se:{default:se}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(de){de.extendMethod("matchAndCrop",G.default),de.extendMethod("getMin",Z.default),de.extendMethod("getMax",$.default),de.extendMethod("getMedian",ee.default),de.extendMethod("getHistogram",ae.default),de.extendMethod("getHistograms",ne.default),de.extendMethod("getAverage",oe.default)};var E=I("./transform/matchAndCrop"),G=L(E),W=I("./compute/min"),Z=L(W),Q=I("./compute/max"),$=L(Q),J=I("./compute/median"),ee=L(J),te=I("./compute/histogram"),ae=L(te),ie=I("./compute/histograms"),ne=L(ie),le=I("./utility/average"),oe=L(le)},{"./compute/histogram":257,"./compute/histograms":258,"./compute/max":259,"./compute/median":260,"./compute/min":261,"./transform/matchAndCrop":263,"./utility/average":264}],263:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var W=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},Z=W.algorithm,Q=Z===void 0?"matchToPrevious":Z,$=W.ignoreBorder,J=$===void 0?[0,0]:$;this.checkProcessable("matchAndCrop",{bitDepth:[8,16]});var ee=this[0],te=[];te[0]={position:[0,0],image:this[0]};var ae=[0,0];for(var ie=1;ie<this.length;ie++){var ne=ee.getBestMatch(this[ie],{border:J});te[ie]={position:[ne[0]+ae[0],ne[1]+ae[1]],image:this[ie]},"matchToPrevious"===Q&&(ae[0]+=ne[0],ae[1]+=ne[1],ee=this[ie])}var le=0,oe=0,se=0,de=0;for(var he=0;he<te.length;he++){var ue=te[he];ue.position[0]>le&&(le=ue.position[0]),ue.position[0]<oe&&(oe=ue.position[0]),ue.position[1]>se&&(se=ue.position[1]),ue.position[1]<de&&(de=ue.position[1])}oe=0-oe,de=0-de;for(var ce=0;ce<te.length;ce++){var ge=te[ce];ge.crop=ge.image.crop({x:le-ge.position[0],y:se-ge.position[1],width:ee.width-oe-le,height:ee.height-de-se})}var pe=[];for(var fe=0;fe<te.length;fe++)pe[fe]=te[fe].crop;return new E.default(pe)};var L=I("../Stack"),E=function(W){return W&&W.__esModule?W:{default:W}}(L)},{"../Stack":256}],264:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("average",{bitDepth:[8,16]});var W=new Uint32Array(this[0].data.length);for(var Z=0;Z<this.length;Z++){var Q=this[Z];for(var $=0;$<this[0].data.length;$++)W[$]+=Q.data[$]}var J=E.default.createFrom(this[0]),ee=J.data;for(var te=0;te<this[0].data.length;te++)ee[te]=W[te]/this.length;return J};var L=I("../../image/Image"),E=function(W){return W&&W.__esModule?W:{default:W}}(L)},{"../../image/Image":151}],265:[function(I,R,T){"use strict";function L(ie){return ie&&ie.__esModule?ie:{default:ie}}function E(ie,ne,le){var oe=Q.default.zeros(ne,ie);if(le.filled)for(var se=0;se<ne;se++)for(var de=0;de<ie;de++)oe.set(se,de,1);else{for(var he of[0,ne-1])for(var ue=0;ue<ie;ue++)oe.set(he,ue,1);for(var ce=0;ce<ne;ce++)for(var ge of[0,ie-1])oe.set(ce,ge,1)}return oe}function G(ie,ne,le){var oe=Q.default.zeros(ne,ie,le),se=1-ne%2,de=1-ie%2,he=Math.floor((ie-1)/2),ue=Math.floor((ne-1)/2),ce=he*he,ge=ue*ue;if(le.filled)for(var pe=0;pe<=ue;pe++){var fe=Math.floor(Math.sqrt(ce-ce*pe*pe/ge));for(var _e=he-fe;_e<=he;_e++)oe.set(ue-pe,_e,1),oe.set(ue+pe+se,_e,1),oe.set(ue-pe,ie-_e-1,1),oe.set(ue+pe+se,ie-_e-1,1)}else{for(var be=0;be<=ue;be++){var ye=Math.floor(Math.sqrt(ce-ce*be*be/ge)),xe=he-ye;oe.set(ue-be,xe,1),oe.set(ue+be+se,xe,1),oe.set(ue-be,ie-xe-1,1),oe.set(ue+be+se,ie-xe-1,1)}for(var we=0;we<=he;we++){var ke=Math.floor(Math.sqrt(ge-ge*we*we/ce)),ve=ue-ke;oe.set(ve,he-we,1),oe.set(ve,he+we+de,1),oe.set(ne-ve-1,he-we,1),oe.set(ne-ve-1,he+we+de,1)}}return oe}function W(ie,ne,le){if(!le.filled)throw new Error("Non filled triangle is not implemented");var oe=Q.default.zeros(ne,ie,le);for(var se=0;se<ne;se++){var de=Math.floor((1-se/ne)*ie/2);for(var he=de;he<ie-de;he++)oe.set(se,he,1)}return oe}Object.defineProperty(T,"__esModule",{value:!0});var Z=I("ml-matrix"),Q=L(Z),$=I("../image/Image"),J=L($),ee=I("../image/kindNames"),te=[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]],ae=[[0,1,0],[1,1,1],[0,1,0]];T.default=class{constructor(){var ne=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},le=ne.kind,oe=void 0===le?"cross":le,se=ne.shape,de=ne.size,he=ne.width,ue=ne.height,ce=ne.filled,ge=void 0===ce||ce;if(de&&(he=de,ue=de),se)switch(se.toLowerCase()){case"square":case"rectangle":this.matrix=E(he,ue,{filled:ge});break;case"circle":case"ellipse":this.matrix=G(he,ue,{filled:ge});break;case"triangle":this.matrix=W(he,ue,{filled:ge});break;default:throw new Error(`Shape: unexpected shape: ${se}`);}else if(oe)switch(oe.toLowerCase()){case"cross":this.matrix=te;break;case"smallcross":this.matrix=ae;break;default:throw new Error(`Shape: unexpected kind: ${oe}`);}else throw new Error("Shape: expected a kind or a shape option");this.height=this.matrix.length,this.width=this.matrix[0].length,this.halfHeight=this.height/2>>0,this.halfWidth=this.width/2>>0}getPoints(){var ne=this.matrix,le=[];for(var oe=0;oe<ne.length;oe++)for(var se=0;se<ne[0].length;se++)ne[oe][se]&&le.push([se-this.halfWidth,oe-this.halfHeight]);return le}getMask(){var ne=new J.default(this.width,this.height,{kind:ee.BINARY});for(var le=0;le<this.matrix.length;le++)for(var oe=0;oe<this.matrix[0].length;oe++)this.matrix[le][oe]&&ne.setBitXY(oe,le);return ne}}},{"../image/Image":151,"../image/kindNames":188,"ml-matrix":91}],266:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.encode=function(Z){var Q=void 0,$=Z.length,J="";for(Q=0;Q<$;Q+=3)J+=L[Z[Q]>>2],J+=L[(3&Z[Q])<<4|Z[Q+1]>>4],J+=L[(15&Z[Q+1])<<2|Z[Q+2]>>6],J+=L[63&Z[Q+2]];return 2==$%3?J=J.substring(0,J.length-1)+"=":1==$%3&&(J=J.substring(0,J.length-2)+"=="),J},T.decode=function(Z){var Q=0.75*Z.length,$=Z.length,J=void 0,ee=0,te=void 0,ae=void 0,ie=void 0,ne=void 0;"="===Z[Z.length-1]&&(Q--,"="===Z[Z.length-2]&&Q--);var le=new Uint8Array(Q);for(J=0;J<$;J+=4)te=E[Z.charCodeAt(J)],ae=E[Z.charCodeAt(J+1)],ie=E[Z.charCodeAt(J+2)],ne=E[Z.charCodeAt(J+3)],le[ee++]=te<<2|ae>>4,le[ee++]=(15&ae)<<4|ie>>2,le[ee++]=(3&ie)<<6|63&ne;return le};var L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=new Uint8Array(256);for(var G=0;G<L.length;G++)E[L.charCodeAt(G)]=G},{}],267:[function(I,R,T){"use strict";function L(Q,$){var J=$?Q.channels:Q.components,ee=Array(J);for(var te=0;te<J;te++)ee[te]=te;return ee}function E(Q,$,J){Array.isArray($)||($=[$]);for(var ee=0;ee<$.length;ee++)$[ee]=G(Q,$[ee],J);return $}function G(Q,$){var J=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!0;if($===void 0)throw new RangeError("validateChannel : the channel has to be >=0 and <"+Q.channels);if("string"==typeof $){switch(Q.colorModel){case Z.GREY:break;case Z.RGB:"rgb".includes($)&&("r"===$?$=0:"g"===$?$=1:"b"===$?$=2:void 0);break;case Z.HSL:"hsl".includes($)&&("h"===$?$=0:"s"===$?$=1:"l"===$?$=2:void 0);break;case Z.HSV:"hsv".includes($)&&("h"===$?$=0:"s"===$?$=1:"v"===$?$=2:void 0);break;case Z.CMYK:"cmyk".includes($)&&("c"===$?$=0:"m"===$?$=1:"y"===$?$=2:"k"===$?$=3:void 0);break;default:throw new Error(`Unexpected color model: ${Q.colorModel}`);}if("a"===$){if(!Q.alpha)throw new Error("validateChannel : the image does not contain alpha channel");$=Q.components}if("string"==typeof $)throw new Error("validateChannel : undefined channel: "+$)}if($>=Q.channels)throw new RangeError("validateChannel : the channel has to be >=0 and <"+Q.channels);if(!J&&$>=Q.components)throw new RangeError("validateChannel : alpha channel may not be selected");return $}Object.defineProperty(T,"__esModule",{value:!0}),T.validateArrayOfChannels=function($){var J=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},ee=J.channels,te=J.allowAlpha,ae=J.defaultAlpha;return"boolean"!=typeof te&&(te=!0),"undefined"==typeof ee?L($,ae):E($,ee,te)},T.validateChannel=G;var W=I("../image/model/model"),Z=function($){if($&&$.__esModule)return $;var J={};if(null!=$)for(var ee in $)Object.prototype.hasOwnProperty.call($,ee)&&(J[ee]=$[ee]);return J.default=$,J}(W)},{"../image/model/model":191}],268:[function(I,R,T){"use strict";function L(W,Z,Q){return 0>Q&&(Q+=1),1<Q&&(Q-=1),Q<1/6?W+6*(Z-W)*Q:Q<1/2?Z:Q<2/3?W+6*((Z-W)*(2/3-Q)):W}function E(W,Z,Q){var $=void 0,J=void 0,ee=void 0,te=void 0,ae=void 0,ie=void 0;return Z/=100,Q/=100,0===Z?te=ae=ie=255*Q:(J=0.5>=Q?Q*(Z+1):Q+Z-Q*Z,$=2*Q-J,ee=W/360,te=L($,J,ee+1/3),ae=L($,J,ee),ie=L($,J,ee-1/3)),{r:te,g:ae,b:ie}}Object.defineProperty(T,"__esModule",{value:!0}),T.css2array=function(Z){var Q=(0,G.cssColor)(Z);return[Q.r,Q.g,Q.b,Math.round(255*Q.a/100)]},T.getDistinctColors=function(Z){var Q=Array(Z),$=0;for(var J=0;360>J;J+=360/Z){$++;var ee=E(J,100,30+15*($%4));Q[$-1]=[Math.round(255*ee.r),Math.round(255*ee.g),Math.round(255*ee.b)]}return Q},T.getRandomColor=function(){return[Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random())]};var G=I("color-functions")},{"color-functions":8}],269:[function(I,R,T){"use strict";function L(E){if("string"==typeof E){var G=E[E.length-1];E=parseFloat(E),"%"===G&&(E/=100)}return E}Object.defineProperty(T,"__esModule",{value:!0}),T.getFactor=L,T.getThreshold=function(G,W){if(!W)throw Error("getThreshold : the maxValue should be specified");if("string"==typeof G){var Z=G[G.length-1];if("%"!==Z)throw Error("getThreshold : if the value is a string it must finish by %");return parseFloat(G)/100*W}if("number"==typeof G)return 1>G?G*W:G;throw Error("getThreshold : the value is not valid")},T.factorDimensions=function(G,W,Z){G=L(G);var Q=Math.round(G*W),$=Math.round(G*Z);return 0>=Q&&(Q=1),0>=$&&($=1),{width:Q,height:$}}},{}],270:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.dxs=[1,0,-1,0,1,1,-1,-1],T.dys=[0,1,0,-1,1,-1,1,-1]},{}],271:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.median=function(E){var G=E.reduce((J,ee)=>J+ee);if(0===G)throw new Error("unreachable");for(var W=0,Z=0,Q=G/2,$=void 0;!0;){if(0<E[W]){if(void 0!=$)return($+W)/2;if(Z+=E[W],Z>Q)return W;Z==Q&&($=W)}W++}},T.mean=function(E){var G=0,W=0;for(var Z=0;Z<E.length;Z++)G+=E[Z],W+=E[Z]*Z;return 0===G?0:W/G}},{}],272:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.validateKernel=function(W){var Z=void 0,Q=void 0;if(!Array.isArray(W))throw new Error("validateKernel: Invalid Kernel: "+W);else if(!Array.isArray(W[0])){var $=Math.sqrt(W.length);if((0,E.default)($))Q=Z=Math.floor(Math.sqrt(W.length)/2);else throw new RangeError("validateKernel: Kernel array should be a square");var J=Array($);for(var ee=0;ee<$;ee++){J[ee]=Array($);for(var te=0;te<$;te++)J[ee][te]=W[ee*$+te]}W=J}else if(0==(1&W.length)||0==(1&W[0].length))throw new RangeError("validateKernel: Kernel rows and columns should be odd numbers");else Z=Math.floor(W.length/2),Q=Math.floor(W[0].length/2);return{kernel:W,kWidth:Q,kHeight:Z}};var L=I("is-integer"),E=function(W){return W&&W.__esModule?W:{default:W}}(L)},{"is-integer":57}],273:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.DISCRETE_LAPLACE_4=[[0,1,0],[1,-4,1],[0,1,0]],T.DISCRETE_LAPLACE_8=[[1,1,1],[1,-8,1],[1,1,1]],T.GRADIENT_X=[[-1,0,1],[-2,0,2],[-1,0,1]],T.GRADIENT_Y=[[-1,-2,-1],[0,0,0],[1,2,1]],T.SECOND_DERIVATIVE=[[-1,-2,0,2,1],[-2,-4,0,4,2],[0,0,0,0,0],[1,2,0,-2,-1],[2,4,0,-4,-2]],T.SECOND_DERIVATIVE_INV=[[1,2,0,-2,-1],[2,4,0,-4,-2],[0,0,0,0,0],[-2,-4,0,4,2],[-1,-2,0,2,1]]},{}],274:[function(I,R,T){"use strict";function L(E,G,W){var Z=Array(E);for(var Q=0;Q<E;Q++)Z[Q]=Array(G);if(W)for(var $=0;$<E;$++)for(var J=0;J<G;J++)Z[$][J]=W;return Z.width=E,Z.height=G,Z.__proto__=L.prototype,Z}Object.defineProperty(T,"__esModule",{value:!0}),T.default=L,L.prototype.localMin=function(E,G){var W=this[E][G],Z=[E,G];for(var Q=Math.max(0,E-1);Q<Math.min(this.length,E+2);Q++)for(var $=Math.max(0,G-1);$<Math.min(this[0].length,G+2);$++)this[Q][$]<W&&(W=this[Q][$],Z=[Q,$]);return{position:Z,value:W}},L.prototype.localMax=function(E,G){var W=this[E][G],Z=[E,G];for(var Q=Math.max(0,E-1);Q<Math.min(this.length,E+2);Q++)for(var $=Math.max(0,G-1);$<Math.min(this[0].length,G+2);$++)this[Q][$]>W&&(W=this[Q][$],Z=[Q,$]);return{position:Z,value:W}},L.prototype.localSearch=function(E,G,W){var Z=[];for(var Q=Math.max(0,E-1);Q<Math.min(this.length,E+2);Q++)for(var $=Math.max(0,G-1);$<Math.min(this[0].length,G+2);$++)this[Q][$]===W&&Z.push([Q,$]);return Z}},{}],275:[function(I,R,T){"use strict";function L(Q){return Q&&Q.__esModule?Q:{default:Q}}Object.defineProperty(T,"__esModule",{value:!0}),T.checkNumberArray=function($){if(!isNaN($)){if(0>=$)throw new Error("checkNumberArray: the value must be greater than 0");return $}if($ instanceof G.default)return $.data;if(!(0,Z.default)($))throw new Error("checkNumberArray: the value should be either a number, array or Image");return $};var E=I("../image/Image"),G=L(E),W=I("is-array-type"),Z=L(W)},{"../image/Image":151,"is-array-type":53}],276:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W){W.extendMethod("background",E.default)};var L=I("./process/background"),E=function(W){return W&&W.__esModule?W:{default:W}}(L)},{"./process/background":277}],277:[function(I,R,T){"use strict";function L(J){return J&&J.__esModule?J:{default:J}}function E(J,ee,te){return J.post("data",[ee,te]).then(function(ae){for(var ie in ae)ae[ie]=new Q.default(ae[ie]);return ae})}Object.defineProperty(T,"__esModule",{value:!0});var G=I("extend"),W=L(G),Z=I("../../image/Image"),Q=L(Z),$={regression:{kernelType:"polynomial",kernelOptions:{degree:2,constant:1}},threshold:0.02,roi:{minSurface:100,positive:!1},sampling:20,include:[]};T.default={run:function(ee,te,ae){te=(0,W.default)({},$,te);var ie=this.manager;return Array.isArray(ee)?Promise.all(ee.map(function(ne){var le=E(ie,ne,te);return"function"==typeof ae&&le.then(ae),le})):E(ie,ee,te)},work:function(){worker.on("data",function(ee,te,ae){function ie(fe,_e){ae.include.includes(fe)&&(ne[fe]=_e,le.push(_e.data.buffer))}te=new IJS(te);var ne={},le=[],oe=te.grey(),se=oe.sobelFilter();ie("sobel",se);var de=se.level().mask({threshold:ae.threshold});ie("mask",de);var he=se.getRoiManager();he.fromMask(de);var ue=he.getMask(ae.roi);ie("realMask",ue);var ce=oe.getPixelsGrid({sampling:ae.sampling,mask:ue}),ge=te.getBackground(ce.xyS,ce.zS,ae.regression);ie("background",ge);var pe=te.subtract(ge);ne.result=pe,le.push(pe.data.buffer),ee(ne,le)})}}},{"../../image/Image":151,extend:34}],278:[function(I,R,T){"use strict";function L($){return $&&$.__esModule?$:{default:$}}Object.defineProperty(T,"__esModule",{value:!0});var E=I("web-worker-manager"),G=L(E),W=I("./extend"),Z=L(W);class Q{constructor(){this._url=null,this._deps=[null]}checkUrl(){if(null===this._url)throw new Error("image worker must be initialized with an URL")}get url(){return this._url}set url($){if("string"!=typeof $)throw new TypeError("worker URL must be a string");this._url=$,this._deps[0]=$}static extendMethod($,J){function ee(){var ne;te||(this.checkUrl(),ae=this.url,te=new G.default(J.work,{deps:ae}),ie.manager=te);for(var le=arguments.length,oe=Array(le),se=0;se<le;se++)oe[se]=arguments[se];return(ne=J.run).call.apply(ne,[ie].concat(oe))}var te=void 0,ae=void 0,ie={};ee.reset=function(){te&&(te.terminate(),te=new G.default(J.work,{deps:ae}),ie.manager=te)},Q.prototype[$]=ee}}(0,Z.default)(Q),T.default=new Q},{"./extend":276,"web-worker-manager":149}]},{},[253])(253)});

//# sourceMappingURL=image.min.js.map